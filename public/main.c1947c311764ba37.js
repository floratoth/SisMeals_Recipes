"use strict";(self.webpackChunkSISMEALS_RECIPES=self.webpackChunkSISMEALS_RECIPES||[]).push([[179],{2011:(ct,Te,k)=>{k.d(Te,{hO:()=>Ke,xv:()=>de,Dh:()=>fe,GT:()=>ge,cc:()=>Ne,on:()=>G,pX:()=>X});var u=k(5e3),Y=k(127),P=k(5813);ct=k.hmd(ct);const ae=["ngOnDestroy"],X=(Ee,rt,Qe,Se={})=>new Proxy(Ee,{get:(be,we)=>Qe.runOutsideAngular(()=>{var qe;if(Ee[we])return(null===(qe=null==Se?void 0:Se.spy)||void 0===qe?void 0:qe.get)&&Se.spy.get(we,Ee[we]),Ee[we];if(ae.indexOf(we)>-1)return()=>{};const $e=rt.toPromise().then(ne=>{const Z=ne&&ne[we];return"function"==typeof Z?Z.bind(ne):Z&&Z.then?Z.then(se=>Qe.run(()=>se)):Qe.run(()=>Z)});return new Proxy(()=>{},{get:(ne,Z)=>$e[Z],apply:(ne,Z,se)=>$e.then(me=>{var oe;const Oe=me&&me(...se);return(null===(oe=null==Se?void 0:Se.spy)||void 0===oe?void 0:oe.apply)&&Se.spy.apply(we,se,Oe),Oe})})})}),ge=(Ee,rt)=>{rt.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Se=>{Object.defineProperty(Ee.prototype,Se,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Se))})})};class ie{constructor(rt){return rt}}const fe=new u.OlP("angularfire2.app.options"),de=new u.OlP("angularfire2.app.name");function G(Ee,rt,Qe){const be="object"==typeof Qe&&Qe||{};be.name=be.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const qe=Y.Z.apps.filter($e=>$e&&$e.name===be.name)[0]||rt.runOutsideAngular(()=>Y.Z.initializeApp(Ee,be));try{JSON.stringify(Ee)!==JSON.stringify(qe.options)&&H("error",`${qe.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new ie(qe)}const H=(Ee,...rt)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ee](...rt)},Q={provide:ie,useFactory:G,deps:[fe,u.R0b,[new u.FiY,de]]};let Ke=(()=>{class Ee{constructor(Qe){Y.Z.registerVersion("angularfire",P.q4.full,"core"),Y.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Y.Z.registerVersion("angular",u.q4F.full,Qe.toString())}static initializeApp(Qe,Se){return{ngModule:Ee,providers:[{provide:fe,useValue:Qe},{provide:de,useValue:Se}]}}}return Ee.\u0275fac=function(Qe){return new(Qe||Ee)(u.LFG(u.Lbi))},Ee.\u0275mod=u.oAB({type:Ee}),Ee.\u0275inj=u.cJS({providers:[Q]}),Ee})();function Ne(Ee,rt,Qe,Se,be){const[,we,qe]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Ee)||[];if(we)return function ke(Ee,rt){try{return Ee.toString()===rt.toString()}catch(Qe){return Ee===rt}}(be,qe)||(pe("error",`${rt} was already initialized on the ${Qe} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:be,was:qe})),we;{const $e=Se();return globalThis.\u0275AngularfireInstanceCache.push([Ee,$e,be]),$e}}const Be=!!ct.hot,pe=(Ee,...rt)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ee](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,Te,k)=>{k.d(Te,{q4:()=>In,iC:()=>Ao,fc:()=>sa,HU:()=>xl,vb:()=>ec,JM:()=>eo});var u=k(5e3),Y=k(5867),P=k(5861),ae=k(9681),X=k(2090),ge=k(4859),ie=k(1877);const fe="@firebase/installations",H="w:0.5.7",Q="FIS_v2",Ee=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(C){return C instanceof X.ZR&&C.code.includes("request-failed")}function Qe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Se(C){return{token:C.token,requestStatus:2,expiresIn:se(C.expiresIn),creationTime:Date.now()}}function be(C,T){return we.apply(this,arguments)}function we(){return(we=(0,P.Z)(function*(C,T){const V=(yield T.json()).error;return Ee.create("request-failed",{requestName:C,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function qe({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function $e(C,{refreshToken:T}){const M=qe(C);return M.append("Authorization",function me(C){return`${Q} ${C}`}(T)),M}function ne(C){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function se(C){return Number(C.replace("s","000"))}function oe(C,T){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:M}){const V=Qe(C),W=qe(C),ee=T.getImmediate({optional:!0});if(ee){const Dt=yield ee.getHeartbeatsHeader();Dt&&W.append("x-firebase-client",Dt)}const Ye={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:Q,appId:C.appId,sdkVersion:H})},Xe=yield ne(()=>fetch(V,Ye));if(Xe.ok){const Dt=yield Xe.json();return{fid:Dt.fid||M,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Se(Dt.authToken)}}throw yield be("Create Installation",Xe)})).apply(this,arguments)}function le(C){return new Promise(T=>{setTimeout(T,C)})}const en=/^[cdef][\w-]{21}$/;function dt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function bt(C){return function St(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return en.test(M)?M:""}catch(C){return""}}function hn(C){return`${C.appName}!${C.appId}`}const fn=new Map;function Mi(C,T){const M=hn(C);tn(M,T),function qt(C,T){const M=function _i(){return!gr&&"BroadcastChannel"in self&&(gr=new BroadcastChannel("[Firebase] FID Change"),gr.onmessage=C=>{tn(C.data.key,C.data.fid)}),gr}();M&&M.postMessage({key:C,fid:T}),function Ps(){0===fn.size&&gr&&(gr.close(),gr=null)}()}(M,T)}function tn(C,T){const M=fn.get(C);if(M)for(const V of M)V(T)}let gr=null;const Gr="firebase-installations-store";let ls=null;function us(){return ls||(ls=(0,X.X3)("firebase-installations-database",1,(C,T)=>{0===T&&C.createObjectStore(Gr)})),ls}function pt(C,T){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,P.Z)(function*(C,T){const M=hn(C),W=(yield us()).transaction(Gr,"readwrite"),ee=W.objectStore(Gr),xe=yield ee.get(M);return yield ee.put(T,M),yield W.complete,(!xe||xe.fid!==T.fid)&&Mi(C,T.fid),T})).apply(this,arguments)}function rr(C){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(C){const T=hn(C),V=(yield us()).transaction(Gr,"readwrite");yield V.objectStore(Gr).delete(T),yield V.complete})).apply(this,arguments)}function yi(C,T){return uo.apply(this,arguments)}function uo(){return(uo=(0,P.Z)(function*(C,T){const M=hn(C),W=(yield us()).transaction(Gr,"readwrite"),ee=W.objectStore(Gr),xe=yield ee.get(M),Ye=T(xe);return void 0===Ye?yield ee.delete(M):yield ee.put(Ye,M),yield W.complete,Ye&&(!xe||xe.fid!==Ye.fid)&&Mi(C,Ye.fid),Ye})).apply(this,arguments)}function En(C){return ir.apply(this,arguments)}function ir(){return(ir=(0,P.Z)(function*(C){let T;const M=yield yi(C.appConfig,V=>{const W=Fs(V),ee=Ta(C,W);return T=ee.registrationPromise,ee.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function Fs(C){return Ht(C||{fid:dt(),registrationStatus:0})}function Ta(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ee.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function zt(C,T){return ut.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ct(C)}:{installationEntry:T}}function ut(){return(ut=(0,P.Z)(function*(C,T){try{const M=yield oe(C,T);return pt(C.appConfig,M)}catch(M){throw rt(M)&&409===M.customData.serverCode?yield rr(C.appConfig):yield pt(C.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Ct(C){return mr.apply(this,arguments)}function mr(){return(mr=(0,P.Z)(function*(C){let T=yield Wi(C.appConfig);for(;1===T.registrationStatus;)yield le(100),T=yield Wi(C.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield En(C);return V||M}return T})).apply(this,arguments)}function Wi(C){return yi(C,T=>{if(!T)throw Ee.create("installation-not-found");return Ht(T)})}function Ht(C){return function co(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Tr(C,T){return _r.apply(this,arguments)}function _r(){return(_r=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:T},M){const V=gt(C,M),W=$e(C,M),ee=T.getImmediate({optional:!0});if(ee){const Dt=yield ee.getHeartbeatsHeader();Dt&&W.append("x-firebase-client",Dt)}const Ye={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:H,appId:C.appId}})},Xe=yield ne(()=>fetch(V,Ye));if(Xe.ok)return Se(yield Xe.json());throw yield be("Generate Auth Token",Xe)})).apply(this,arguments)}function gt(C,{fid:T}){return`${Qe(C)}/${T}/authTokens:generate`}function Sr(C){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,P.Z)(function*(C,T=!1){let M;const V=yield yi(C.appConfig,ee=>{if(!Lt(ee))throw Ee.create("not-registered");const xe=ee.authToken;if(!T&&j(xe))return ee;if(1===xe.requestStatus)return M=et(C,T),ee;{if(!navigator.onLine)throw Ee.create("app-offline");const Ye=q(ee);return M=mt(C,Ye),Ye}});return M?yield M:V.authToken})).apply(this,arguments)}function et(C,T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,P.Z)(function*(C,T){let M=yield tt(C.appConfig);for(;1===M.authToken.requestStatus;)yield le(100),M=yield tt(C.appConfig);const V=M.authToken;return 0===V.requestStatus?Sr(C,T):V})).apply(this,arguments)}function tt(C){return yi(C,T=>{if(!Lt(T))throw Ee.create("not-registered");return function he(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function mt(C,T){return jt.apply(this,arguments)}function jt(){return(jt=(0,P.Z)(function*(C,T){try{const M=yield Tr(C,T),V=Object.assign(Object.assign({},T),{authToken:M});return yield pt(C.appConfig,V),M}catch(M){if(!rt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield pt(C.appConfig,V)}else yield rr(C.appConfig);throw M}})).apply(this,arguments)}function Lt(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function B(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+36e5}(C)}function q(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}function je(){return(je=(0,P.Z)(function*(C){const T=C,{installationEntry:M,registrationPromise:V}=yield En(T);return V?V.catch(console.error):Sr(T).catch(console.error),M.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,P.Z)(function*(C,T=!1){const M=C;return yield Ir(M),(yield Sr(M,T)).token})).apply(this,arguments)}function Ir(C){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,P.Z)(function*(C){const{registrationPromise:T}=yield En(C);T&&(yield T)})).apply(this,arguments)}function Jn(C){return Ee.create("missing-app-config-values",{valueName:C})}const Ia="installations",Pe=C=>{const T=C.getProvider("app").getImmediate(),M=function cs(C){if(!C||!C.options)throw Jn("App Configuration");if(!C.name)throw Jn("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!C.options[M])throw Jn(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ft=C=>{const T=C.getProvider("app").getImmediate(),M=(0,ae._getProvider)(T,Ia).getImmediate();return{getId:()=>function J(C){return je.apply(this,arguments)}(M),getToken:W=>function wt(C){return Jt.apply(this,arguments)}(M,W)}};(function _n(){(0,ae._registerComponent)(new ge.wA(Ia,Pe,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("installations-internal",Ft,"PRIVATE"))})(),(0,ae.registerVersion)(fe,"0.5.7"),(0,ae.registerVersion)(fe,"0.5.7","esm2017");const yr="@firebase/remote-config",Ln=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class uf{constructor(T,M,V,W){this.client=T,this.storage=M,this.storageCache=V,this.logger=W}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,W=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var M=this;return(0,P.Z)(function*(){const[V,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(T.cacheMaxAgeMillis,V))return W;T.eTag=W&&W.eTag;const ee=yield M.client.fetch(T),xe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&xe.push(M.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(xe),ee})()}}function qo(C=navigator){return C.languages&&C.languages[0]||C.language}class fl{constructor(T,M,V,W,ee,xe){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=V,this.projectId=W,this.apiKey=ee,this.appId=xe}fetch(T){var M=this;return(0,P.Z)(function*(){const[V,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Xe={sdk_version:M.sdkVersion,app_instance_id:V,app_instance_id_token:W,app_id:M.appId,language_code:qo()},Dt={method:"POST",headers:Ye,body:JSON.stringify(Xe)},$t=fetch(xe,Dt),It=new Promise((Wn,Xi)=>{T.signal.addEventListener(()=>{const ji=new Error("The operation was aborted.");ji.name="AbortError",Xi(ji)})});let zn;try{yield Promise.race([$t,It]),zn=yield $t}catch(Wn){let Xi="fetch-client-network";throw"AbortError"===Wn.name&&(Xi="fetch-timeout"),Ln.create(Xi,{originalErrorMessage:Wn.message})}let Un=zn.status;const ri=zn.headers.get("ETag")||void 0;let Xn,Ui;if(200===zn.status){let Wn;try{Wn=yield zn.json()}catch(Xi){throw Ln.create("fetch-client-parse",{originalErrorMessage:Xi.message})}Xn=Wn.entries,Ui=Wn.state}if("INSTANCE_STATE_UNSPECIFIED"===Ui?Un=500:"NO_CHANGE"===Ui?Un=304:("NO_TEMPLATE"===Ui||"EMPTY_CONFIG"===Ui)&&(Xn={}),304!==Un&&200!==Un)throw Ln.create("fetch-status",{httpStatus:Un});return{status:Un,eTag:ri,config:Xn}})()}}class Ag{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,P.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:V}){var W=this;return(0,P.Z)(function*(){yield function Hn(C,T){return new Promise((M,V)=>{const W=Math.max(T-Date.now(),0),ee=setTimeout(M,W);C.addEventListener(()=>{clearTimeout(ee),V(Ln.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ee=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function cd(C){if(!(C instanceof X.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ee))throw ee;const xe={throttleEndTimeMillis:Date.now()+(0,X.$s)(V),backoffCount:V+1};return yield W.storage.setThrottleMetadata(xe),W.attemptFetch(T,xe)}})()}}class Su{constructor(T,M,V,W,ee){this.app=T,this._client=M,this._storageCache=V,this._storage=W,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Iu(C,T){const M=C.target.error||void 0;return Ln.create(T,{originalErrorMessage:M&&M.message})}const js="app_namespace_store";class xg{constructor(T,M,V,W=function Mg(){return new Promise((C,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=V=>{T(Iu(V,"storage-open"))},M.onsuccess=V=>{C(V.target.result)},M.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(js,{keyPath:"compositeKey"})}}catch(M){T(Ln.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=V,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,P.Z)(function*(){const V=yield M.openDbPromise;return new Promise((W,ee)=>{const Ye=V.transaction([js],"readonly").objectStore(js),Xe=M.createCompositeKey(T);try{const Dt=Ye.get(Xe);Dt.onerror=$t=>{ee(Iu($t,"storage-get"))},Dt.onsuccess=$t=>{const It=$t.target.result;W(It?It.value:void 0)}}catch(Dt){ee(Ln.create("storage-get",{originalErrorMessage:Dt&&Dt.message}))}})})()}set(T,M){var V=this;return(0,P.Z)(function*(){const W=yield V.openDbPromise;return new Promise((ee,xe)=>{const Xe=W.transaction([js],"readwrite").objectStore(js),Dt=V.createCompositeKey(T);try{const $t=Xe.put({compositeKey:Dt,value:M});$t.onerror=It=>{xe(Iu(It,"storage-set"))},$t.onsuccess=()=>{ee()}}catch($t){xe(Ln.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(T){var M=this;return(0,P.Z)(function*(){const V=yield M.openDbPromise;return new Promise((W,ee)=>{const Ye=V.transaction([js],"readwrite").objectStore(js),Xe=M.createCompositeKey(T);try{const Dt=Ye.delete(Xe);Dt.onerror=$t=>{ee(Iu($t,"storage-delete"))},Dt.onsuccess=()=>{W()}}catch(Dt){ee(Ln.create("storage-delete",{originalErrorMessage:Dt&&Dt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class hd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const M=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),ee=yield M;ee&&(T.lastFetchStatus=ee);const xe=yield V;xe&&(T.lastSuccessfulFetchTimestampMillis=xe);const Ye=yield W;Ye&&(T.activeConfig=Ye)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function go(){return cf.apply(this,arguments)}function cf(){return(cf=(0,P.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}!function zo(){(0,ae._registerComponent)(new ge.wA("remote-config",function C(T,{instanceIdentifier:M}){const V=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ln.create("registration-window");if(!(0,X.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:ee,apiKey:xe,appId:Ye}=V.options;if(!ee)throw Ln.create("registration-project-id");if(!xe)throw Ln.create("registration-api-key");if(!Ye)throw Ln.create("registration-app-id");const Xe=new xg(Ye,V.name,M=M||"firebase"),Dt=new hd(Xe),$t=new ie.Yd(yr);$t.logLevel=ie.in.ERROR;const It=new fl(W,ae.SDK_VERSION,M,ee,xe,Ye),zn=new Ag(It,Xe),Un=new uf(zn,Xe,Dt,$t),ri=new Su(V,Un,Dt,Xe,$t);return function vr(C){const T=(0,X.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ri),ri},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(yr,"0.3.6"),(0,ae.registerVersion)(yr,"0.3.6","esm2017")}();const Au="/firebase-messaging-sw.js",Gs="/firebase-cloud-messaging-push-scope",Qr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mo="google.c.a.c_id",Na="google.c.a.c_l",fd="google.c.a.ts",Og="google.c.a.e";var Hs=(()=>{return(C=Hs||(Hs={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Hs;var C})();function wi(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gl(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),W=new Uint8Array(V.length);for(let ee=0;ee<V.length;++ee)W[ee]=V.charCodeAt(ee);return W}const ml="fcm_token_details_db",br="fcm_token_object_Store";function df(C){return _l.apply(this,arguments)}function _l(){return _l=(0,P.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(ml))return null;let T=null;return(yield(0,X.X3)(ml,5,function(){var V=(0,P.Z)(function*(W,ee,xe,Ye){var Xe;if(ee<2||!W.objectStoreNames.contains(br))return;const Dt=Ye.objectStore(br),$t=yield Dt.index("fcmSenderId").get(C);if(yield Dt.clear(),$t)if(2===ee){const It=$t;if(!It.auth||!It.p256dh||!It.endpoint)return;T={token:It.fcmToken,createTime:null!==(Xe=It.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:wi(It.vapidKey)}}}else if(3===ee){const It=$t;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:wi(It.auth),p256dh:wi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:wi(It.vapidKey)}}}else if(4===ee){const It=$t;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:wi(It.auth),p256dh:wi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:wi(It.vapidKey)}}}});return function(W,ee,xe,Ye){return V.apply(this,arguments)}}())).close(),yield(0,X.Lj)(ml),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),pd(T)?T:null}),_l.apply(this,arguments)}function pd(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ps="firebase-messaging-store";let Ra=null;function Nu(){return Ra||(Ra=(0,X.X3)("firebase-messaging-database",1,(C,T)=>{0===T&&C.createObjectStore(ps)})),Ra}function yn(C){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,P.Z)(function*(C){const T=yo(C),V=yield(yield Nu()).transaction(ps).objectStore(ps).get(T);if(V)return V;{const W=yield df(C.appConfig.senderId);if(W)return yield $s(C,W),W}})).apply(this,arguments)}function $s(C,T){return dn.apply(this,arguments)}function dn(){return(dn=(0,P.Z)(function*(C,T){const M=yo(C),W=(yield Nu()).transaction(ps,"readwrite");return yield W.objectStore(ps).put(T,M),yield W.complete,T})).apply(this,arguments)}function gd(C){return _o.apply(this,arguments)}function _o(){return(_o=(0,P.Z)(function*(C){const T=yo(C),V=(yield Nu()).transaction(ps,"readwrite");yield V.objectStore(ps).delete(T),yield V.complete})).apply(this,arguments)}function yo({appConfig:C}){return C.appId}const Vn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ma(C,T){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,P.Z)(function*(C,T){const M=yield zs(C),V=_t(T),W={method:"POST",headers:M,body:JSON.stringify(V)};let ee;try{ee=yield(yield fetch(Xr(C.appConfig),W)).json()}catch(xe){throw Vn.create("token-subscribe-failed",{errorInfo:xe})}if(ee.error)throw Vn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Vn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Nr(C,T){return qs.apply(this,arguments)}function qs(){return(qs=(0,P.Z)(function*(C,T){const M=yield zs(C),V=_t(T.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(V)};let ee;try{ee=yield(yield fetch(`${Xr(C.appConfig)}/${T.token}`,W)).json()}catch(xe){throw Vn.create("token-update-failed",{errorInfo:xe})}if(ee.error)throw Vn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Vn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function gs(C,T){return bl.apply(this,arguments)}function bl(){return(bl=(0,P.Z)(function*(C,T){const V={method:"DELETE",headers:yield zs(C)};try{const ee=yield(yield fetch(`${Xr(C.appConfig)}/${T}`,V)).json();if(ee.error)throw Vn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(W){throw Vn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function Xr({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function zs(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,P.Z)(function*({appConfig:C,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function _t({p256dh:C,auth:T,endpoint:M,vapidKey:V}){const W={web:{endpoint:M,auth:T,p256dh:C}};return V!==Qr&&(W.web.applicationPubKey=V),W}const wl=6048e5;function xa(C){return El.apply(this,arguments)}function El(){return(El=(0,P.Z)(function*(C){const T=yield xu(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:wi(T.getKey("auth")),p256dh:wi(T.getKey("p256dh"))},V=yield yn(C.firebaseDependencies);if(V){if(Ko(V.subscriptionOptions,M))return Date.now()>=V.createTime+wl?Ru(C,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield gs(C.firebaseDependencies,V.token)}catch(W){console.warn(W)}return Ce(C.firebaseDependencies,M)}return Ce(C.firebaseDependencies,M)})).apply(this,arguments)}function Dl(C){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,P.Z)(function*(C){const T=yield yn(C.firebaseDependencies);T&&(yield gs(C.firebaseDependencies,T.token),yield gd(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ru(C,T){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,P.Z)(function*(C,T){try{const M=yield Nr(C.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield $s(C.firebaseDependencies,V),M}catch(M){throw yield Dl(C),M}})).apply(this,arguments)}function Ce(C,T){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,P.Z)(function*(C,T){const V={token:yield Ma(C,T),createTime:Date.now(),subscriptionOptions:T};return yield $s(C,V),V.token})).apply(this,arguments)}function xu(C,T){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,P.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gl(T)})})).apply(this,arguments)}function Ko(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}function Yo(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ei(C,T){if(!T.notification)return;C.notification={};const M=T.notification.title;M&&(C.notification.title=M);const V=T.notification.body;V&&(C.notification.body=V);const W=T.notification.image;W&&(C.notification.image=W)}(T,C),function Ou(C,T){!T.data||(C.data=T.data)}(T,C),function ku(C,T){if(!T.fcmOptions)return;C.fcmOptions={};const M=T.fcmOptions.link;M&&(C.fcmOptions.link=M);const V=T.fcmOptions.analytics_label;V&&(C.fcmOptions.analyticsLabel=V)}(T,C),T}function md(C){return"object"==typeof C&&!!C&&mo in C}function Pu(C,T){const M=[];for(let V=0;V<C.length;V++)M.push(C.charAt(V)),V<T.length&&M.push(T.charAt(V));return M.join("")}function Zs(C){return Vn.create("missing-app-config-values",{valueName:C})}Pu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Pu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wr{constructor(T,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Tl(C){if(!C||!C.options)throw Zs("App Configuration Object");if(!C.name)throw Zs("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const V of T)if(!M[V])throw Zs(V);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ei(C){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,P.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Au,{scope:Gs}),C.swRegistration.update().catch(()=>{})}catch(T){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Ks(C,T){return ki.apply(this,arguments)}function ki(){return(ki=(0,P.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield Ei(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function Fu(C,T){return Il.apply(this,arguments)}function Il(){return(Il=(0,P.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=Qr)})).apply(this,arguments)}function Lu(){return(Lu=(0,P.Z)(function*(C,T){if(!navigator)throw Vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vn.create("permission-blocked");return yield Fu(C,null==T?void 0:T.vapidKey),yield Ks(C,null==T?void 0:T.serviceWorkerRegistration),xa(C)})).apply(this,arguments)}function Oa(C,T,M){return ka.apply(this,arguments)}function ka(){return(ka=(0,P.Z)(function*(C,T,M){const V=Vu(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[mo],message_name:M[Na],message_time:M[fd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Vu(C){switch(C){case Hs.NOTIFICATION_CLICKED:return"notification_open";case Hs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _d(){return(_d=(0,P.Z)(function*(C,T){const M=T.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===Hs.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Yo(M)):C.onMessageHandler.next(Yo(M)));const V=M.data;md(V)&&"1"===V[Og]&&(yield Oa(C,M.messageType,V))})).apply(this,arguments)}const Uu="@firebase/messaging",yd=C=>{const T=new wr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Bu(C,T){return _d.apply(this,arguments)}(T,M)),T},bo=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:V=>function Al(C,T){return Lu.apply(this,arguments)}(T,V)}};function bd(){return wo.apply(this,arguments)}function wo(){return(wo=(0,P.Z)(function*(){try{yield(0,X.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vd(){(0,ae._registerComponent)(new ge.wA("messaging",yd,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("messaging-internal",bo,"PRIVATE")),(0,ae.registerVersion)(Uu,"0.9.11"),(0,ae.registerVersion)(Uu,"0.9.11","esm2017")}();const Gu="analytics",fy="firebase_id",Pa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nl="https://www.googletagmanager.com/gtag/js",$n=new ie.Yd("@firebase/analytics");function wd(C){return Promise.all(C.map(T=>T.catch(M=>M)))}function kg(C,T){const M=document.createElement("script");M.src=`${Nl}?l=${C}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Jo(C,T,M,V,W,ee){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,P.Z)(function*(C,T,M,V,W,ee){const xe=V[W];try{if(xe)yield T[xe];else{const Xe=(yield wd(M)).find(Dt=>Dt.measurementId===W);Xe&&(yield T[Xe.appId])}}catch(Ye){$n.error(Ye)}C("config",W,ee)})).apply(this,arguments)}function $u(C,T,M,V,W){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,P.Z)(function*(C,T,M,V,W){try{let ee=[];if(W&&W.send_to){let xe=W.send_to;Array.isArray(xe)||(xe=[xe]);const Ye=yield wd(M);for(const Xe of xe){const Dt=Ye.find(It=>It.measurementId===Xe),$t=Dt&&T[Dt.appId];if(!$t){ee=[];break}ee.push($t)}}0===ee.length&&(ee=Object.values(T)),yield Promise.all(ee),C("event",V,W||{})}catch(ee){$n.error(ee)}})).apply(this,arguments)}function Pg(){const C=window.document.getElementsByTagName("script");for(const T of Object.values(C))if(T.src&&T.src.includes(Nl))return T;return null}const Er=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),xn=new class ht{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Cn(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Pi(C){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,P.Z)(function*(C){var T;const{appId:M,apiKey:V}=C,W={method:"GET",headers:Cn(V)},ee=Pa.replace("{app-id}",M),xe=yield fetch(ee,W);if(200!==xe.status&&304!==xe.status){let Ye="";try{const Xe=yield xe.json();(null===(T=Xe.error)||void 0===T?void 0:T.message)&&(Ye=Xe.error.message)}catch(Xe){}throw Er.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Ye})}return xe.json()})).apply(this,arguments)}function or(C){return nn.apply(this,arguments)}function nn(){return(nn=(0,P.Z)(function*(C,T=xn,M){const{appId:V,apiKey:W,measurementId:ee}=C.options;if(!V)throw Er.create("no-app-id");if(!W){if(ee)return{measurementId:ee,appId:V};throw Er.create("no-api-key")}const xe=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Fi;return setTimeout((0,P.Z)(function*(){Ye.abort()}),void 0!==M?M:6e4),Bn({appId:V,apiKey:W,measurementId:ee},xe,Ye,T)})).apply(this,arguments)}function Bn(C,T,M){return at.apply(this,arguments)}function at(){return(at=(0,P.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:M},V,W=xn){const{appId:ee,measurementId:xe}=C;try{yield pf(V,T)}catch(Ye){if(xe)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:ee,measurementId:xe};throw Ye}try{const Ye=yield Pi(C);return W.deleteThrottleMetadata(ee),Ye}catch(Ye){if(!qu(Ye)){if(W.deleteThrottleMetadata(ee),xe)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:ee,measurementId:xe};throw Ye}const Xe=503===Number(Ye.customData.httpStatus)?(0,X.$s)(M,W.intervalMillis,30):(0,X.$s)(M,W.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+Xe,backoffCount:M+1};return W.setThrottleMetadata(ee,Dt),$n.debug(`Calling attemptFetch again in ${Xe} millis`),Bn(C,Dt,V,W)}})).apply(this,arguments)}function pf(C,T){return new Promise((M,V)=>{const W=Math.max(T-Date.now(),0),ee=setTimeout(M,W);C.addEventListener(()=>{clearTimeout(ee),V(Er.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function qu(C){if(!(C instanceof X.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Fi{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function gf(){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*(){if(!(0,X.hl)())return $n.warn(Er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(C){return $n.warn(Er.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function ys(){return(ys=(0,P.Z)(function*(C,T,M,V,W,ee,xe){var Ye;const Xe=or(C);Xe.then(Un=>{M[Un.measurementId]=Un.appId,C.options.measurementId&&Un.measurementId!==C.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Un.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Un=>$n.error(Un)),T.push(Xe);const Dt=gf().then(Un=>{if(Un)return V.getId()}),[$t,It]=yield Promise.all([Xe,Dt]);Pg()||kg(ee,$t.measurementId),W("js",new Date);const zn=null!==(Ye=null==xe?void 0:xe.config)&&void 0!==Ye?Ye:{};return zn.origin="firebase",zn.update=!0,null!=It&&(zn[fy]=It),W("config",$t.measurementId,zn),$t.measurementId})).apply(this,arguments)}class Do{constructor(T){this.app=T}_delete(){return delete ti[this.app.options.appId],Promise.resolve()}}let ti={},$r=[];const Cd={};let ea,Qs,Co="dataLayer",Rl=!1;function sn(C,T,M){!function To(){const C=[];if((0,X.ru)()&&C.push("This is a browser extension environment."),(0,X.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((V,W)=>`(${W+1}) ${V}`).join(" "),M=Er.create("invalid-analytics-context",{errorInfo:T});$n.warn(M.message)}}();const V=C.options.appId;if(!V)throw Er.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Er.create("no-api-key");$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ti[V])throw Er.create("already-exists",{id:V});if(!Rl){!function _s(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(Co);const{wrappedGtag:ee,gtagCore:xe}=function ff(C,T,M,V,W){let ee=function(...xe){window[V].push(arguments)};return window[W]&&"function"==typeof window[W]&&(ee=window[W]),window[W]=function Dd(C,T,M,V){function ee(){return(ee=(0,P.Z)(function*(xe,Ye,Xe){try{"event"===xe?yield $u(C,T,M,Ye,Xe):"config"===xe?yield Jo(C,T,M,V,Ye,Xe):C("set",Ye)}catch(Dt){$n.error(Dt)}})).apply(this,arguments)}return function W(xe,Ye,Xe){return ee.apply(this,arguments)}}(ee,C,T,M),{gtagCore:ee,wrappedGtag:window[W]}}(ti,$r,Cd,Co,"gtag");Qs=ee,ea=xe,Rl=!0}return ti[V]=function Xo(C,T,M,V,W,ee,xe){return ys.apply(this,arguments)}(C,$r,Cd,T,ea,Co,M),new Do(C)}function ta(){return(ta=(0,P.Z)(function*(C,T,M,V,W){if(W&&W.global)C("event",M,V);else{const ee=yield T;C("event",M,Object.assign(Object.assign({},V),{send_to:ee}))}})).apply(this,arguments)}function Va(){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,P.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}const Ku="@firebase/analytics";!function Sd(){(0,ae._registerComponent)(new ge.wA(Gu,(T,{options:M})=>sn(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ge.wA("analytics-internal",function C(T){try{const M=T.getProvider(Gu).getImmediate();return{logEvent:(V,W,ee)=>function Vg(C,T,M,V){C=(0,X.m9)(C),function Wu(C,T,M,V,W){return ta.apply(this,arguments)}(Qs,ti[C.app.options.appId],T,M,V).catch(W=>$n.error(W))}(M,V,W,ee)}}catch(M){throw Er.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Ku,"0.7.7"),(0,ae.registerVersion)(Ku,"0.7.7","esm2017")}();var mf=k(4408),Id=k(7565);const Ad=new class On extends Id.v{}(class So extends mf.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,M,V):T.flush(this)}});var Bg=k(4986),Ju=k(8505),Mr=k(5363),Vi=k(9468);const In=new u.GfV("7.3.0"),bn="__angularfire_symbol__analyticsIsSupportedValue",Bi="__angularfire_symbol__analyticsIsSupported",Ji="__angularfire_symbol__remoteConfigIsSupportedValue",Ua="__angularfire_symbol__remoteConfigIsSupported",Qu="__angularfire_symbol__messagingIsSupportedValue",Xu="__angularfire_symbol__messagingIsSupported";function eo(C,T,M){if(T){if(1===T.length)return T[0];const ee=T.filter(xe=>xe.app===M);if(1===ee.length)return ee[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[Bi]||(globalThis[Bi]=Va().then(C=>globalThis[bn]=C).catch(()=>globalThis[bn]=!1)),globalThis[Xu]||(globalThis[Xu]=bd().then(C=>globalThis[Qu]=C).catch(()=>globalThis[Qu]=!1)),globalThis[Ua]||(globalThis[Ua]=go().then(C=>globalThis[Ji]=C).catch(()=>globalThis[Ji]=!1));const ec=(C,T)=>{const M=T?[T]:(0,Y.C6)(),V=[];return M.forEach(W=>{W.container.getProvider(C).instances.forEach(xe=>{V.includes(xe)||V.push(xe)})}),V};function Io(){}class ia{constructor(T,M=Ad){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,V){const W=this.zone;return this.delegate.schedule(function(xe){W.runGuarded(()=>{T.apply(this,[xe])})},M,V)}}class _f{constructor(T){this.zone=T,this.task=null}call(T,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Io,{},Io,Io)),M.pipe((0,Ju.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xl=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ia(Zone.current)),this.insideAngular=M.run(()=>new ia(Zone.current,Bg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(u.LFG(u.R0b))},C.\u0275prov=u.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Di(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function sa(C){return C.pipe((0,Mr.Q)(Di().outsideAngular))}function Ao(C){return Di(),function Dr(C){return function(M){return(M=M.lift(new _f(C.ngZone))).pipe((0,Vi.R)(C.outsideAngular),(0,Mr.Q)(C.insideAngular))}}(Di())(C)}},2090:(ct,Te,k)=>{k.d(Te,{BH:()=>Ne,LL:()=>St,ZR:()=>le,zI:()=>me,US:()=>ie,tV:()=>G,L:()=>de,$s:()=>co,r3:()=>tn,Sg:()=>ke,ne:()=>pt,vZ:()=>Ps,ZB:()=>Q,Lj:()=>jt,pd:()=>ls,m9:()=>gt,z$:()=>Be,jU:()=>rt,ru:()=>Qe,d:()=>be,xb:()=>gr,w1:()=>we,hl:()=>Z,uI:()=>pe,UG:()=>Ee,b$:()=>Se,G6:()=>ne,Mn:()=>qe,X3:()=>mt,xO:()=>zi,zd:()=>Gr,eu:()=>se});var u=k(5861);const X=function(j){const B=[];let q=0;for(let he=0;he<j.length;he++){let J=j.charCodeAt(he);J<128?B[q++]=J:J<2048?(B[q++]=J>>6|192,B[q++]=63&J|128):55296==(64512&J)&&he+1<j.length&&56320==(64512&j.charCodeAt(he+1))?(J=65536+((1023&J)<<10)+(1023&j.charCodeAt(++he)),B[q++]=J>>18|240,B[q++]=J>>12&63|128,B[q++]=J>>6&63|128,B[q++]=63&J|128):(B[q++]=J>>12|224,B[q++]=J>>6&63|128,B[q++]=63&J|128)}return B},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,B){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let J=0;J<j.length;J+=3){const je=j[J],wt=J+1<j.length,Jt=wt?j[J+1]:0,Ir=J+2<j.length,Wt=Ir?j[J+2]:0;let mn=(15&Jt)<<2|Wt>>6,sr=63&Wt;Ir||(sr=64,wt||(mn=64)),he.push(q[je>>2],q[(3&je)<<4|Jt>>4],q[mn],q[sr])}return he.join("")},encodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(j):this.encodeByteArray(X(j),B)},decodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(j):function(j){const B=[];let q=0,he=0;for(;q<j.length;){const J=j[q++];if(J<128)B[he++]=String.fromCharCode(J);else if(J>191&&J<224){const je=j[q++];B[he++]=String.fromCharCode((31&J)<<6|63&je)}else if(J>239&&J<365){const Ir=((7&J)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;B[he++]=String.fromCharCode(55296+(Ir>>10)),B[he++]=String.fromCharCode(56320+(1023&Ir))}else{const je=j[q++],wt=j[q++];B[he++]=String.fromCharCode((15&J)<<12|(63&je)<<6|63&wt)}}return B.join("")}(this.decodeStringToByteArray(j,B))},decodeStringToByteArray(j,B){this.init_();const q=B?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let J=0;J<j.length;){const je=q[j.charAt(J++)],Jt=J<j.length?q[j.charAt(J)]:0;++J;const Wt=J<j.length?q[j.charAt(J)]:64;++J;const kt=J<j.length?q[j.charAt(J)]:64;if(++J,null==je||null==Jt||null==Wt||null==kt)throw Error();he.push(je<<2|Jt>>4),64!==Wt&&(he.push(Jt<<4&240|Wt>>2),64!==kt&&he.push(Wt<<6&192|kt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const B=X(j);return ie.encodeByteArray(B,!0)}(j).replace(/\./g,"")},G=function(j){try{return ie.decodeString(j,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function Q(j,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return B}for(const q in B)!B.hasOwnProperty(q)||!Ke(q)||(j[q]=Q(j[q],B[q]));return j}function Ke(j){return"__proto__"!==j}class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,q)=>{this.resolve=B,this.reject=q})}wrapCallback(B){return(q,he)=>{q?this.reject(q):this.resolve(he),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(q):B(q,he))}}}function ke(j,B){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=B||"demo-project",J=j.iat||0,je=j.sub||j.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:J,exp:J+3600,auth_time:J,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(wt)),""].join(".")}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function rt(){return"object"==typeof self&&self.self===self}function Qe(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function be(){return Be().indexOf("Electron/")>=0}function we(){const j=Be();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function qe(){return Be().indexOf("MSAppHost/")>=0}function ne(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z(){return"object"==typeof indexedDB}function se(){return new Promise((j,B)=>{try{let q=!0;const he="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(he);J.onsuccess=()=>{J.result.close(),q||self.indexedDB.deleteDatabase(he),j(!0)},J.onupgradeneeded=()=>{q=!1},J.onerror=()=>{var je;B((null===(je=J.error)||void 0===je?void 0:je.message)||"")}}catch(q){B(q)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class le extends Error{constructor(B,q,he){super(q),this.code=B,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(B,q,he){this.service=B,this.serviceName=q,this.errors=he}create(B,...q){const he=q[0]||{},J=`${this.service}/${B}`,je=this.errors[B],wt=je?function en(j,B){return j.replace(Fn,(q,he)=>{const J=B[he];return null!=J?String(J):`<${he}?>`})}(je,he):"Error";return new le(J,`${this.serviceName}: ${wt} (${J}).`,he)}}const Fn=/\{\$([^}]+)}/g;function tn(j,B){return Object.prototype.hasOwnProperty.call(j,B)}function gr(j){for(const B in j)if(Object.prototype.hasOwnProperty.call(j,B))return!1;return!0}function Ps(j,B){if(j===B)return!0;const q=Object.keys(j),he=Object.keys(B);for(const J of q){if(!he.includes(J))return!1;const je=j[J],wt=B[J];if(jr(je)&&jr(wt)){if(!Ps(je,wt))return!1}else if(je!==wt)return!1}for(const J of he)if(!q.includes(J))return!1;return!0}function jr(j){return null!==j&&"object"==typeof j}function zi(j){const B=[];for(const[q,he]of Object.entries(j))Array.isArray(he)?he.forEach(J=>{B.push(encodeURIComponent(q)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(q)+"="+encodeURIComponent(he));return B.length?"&"+B.join("&"):""}function Gr(j){const B={};return j.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[J,je]=he.split("=");B[decodeURIComponent(J)]=decodeURIComponent(je)}}),B}function ls(j){const B=j.indexOf("?");if(!B)return"";const q=j.indexOf("#",B);return j.substring(B,q>0?q:void 0)}function pt(j,B){const q=new Yr(j,B);return q.subscribe.bind(q)}class Yr{constructor(B,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{B(this)}).catch(he=>{this.error(he)})}next(B){this.forEachObserver(q=>{q.next(B)})}error(B){this.forEachObserver(q=>{q.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,q,he){let J;if(void 0===B&&void 0===q&&void 0===he)throw new Error("Missing Observer.");J=function Yn(j,B){if("object"!=typeof j||null===j)return!1;for(const q of B)if(q in j&&"function"==typeof j[q])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:q,complete:he},void 0===J.next&&(J.next=yi),void 0===J.error&&(J.error=yi),void 0===J.complete&&(J.complete=yi);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(wt){}}),this.observers.push(J),je}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,B)}sendOne(B,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{q(this.observers[B])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yi(){}function co(j,B=1e3,q=2){const he=B*Math.pow(q,j),J=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+J)}function gt(j){return j&&j._delegate?j._delegate:j}function Sr(j,B){return new Promise((q,he)=>{j.onsuccess=J=>{q(J.target.result)},j.onerror=J=>{var je;he(`${B}: ${null===(je=J.target.error)||void 0===je?void 0:je.message}`)}})}class Ut{constructor(B){this._db=B,this.objectStoreNames=this._db.objectStoreNames}transaction(B,q){return new et(this._db.transaction.call(this._db,B,q))}createObjectStore(B,q){return new Ie(this._db.createObjectStore(B,q))}close(){this._db.close()}}class et{constructor(B){this._transaction=B,this.complete=new Promise((q,he)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{he(this._transaction.error)},this._transaction.onabort=()=>{he(this._transaction.error)}})}objectStore(B){return new Ie(this._transaction.objectStore(B))}}class Ie{constructor(B){this._store=B}index(B){return new tt(this._store.index(B))}createIndex(B,q,he){return new tt(this._store.createIndex(B,q,he))}get(B){return Sr(this._store.get(B),"Error reading from IndexedDB")}put(B,q){return Sr(this._store.put(B,q),"Error writing to IndexedDB")}delete(B){return Sr(this._store.delete(B),"Error deleting from IndexedDB")}clear(){return Sr(this._store.clear(),"Error clearing IndexedDB object store")}}class tt{constructor(B){this._index=B}get(B){return Sr(this._index.get(B),"Error reading from IndexedDB")}}function mt(j,B,q){return new Promise((he,J)=>{try{const je=indexedDB.open(j,B);je.onsuccess=wt=>{he(new Ut(wt.target.result))},je.onerror=wt=>{var Jt;J(`Error opening indexedDB: ${null===(Jt=wt.target.error)||void 0===Jt?void 0:Jt.message}`)},je.onupgradeneeded=wt=>{q(new Ut(je.result),wt.oldVersion,wt.newVersion,new et(je.transaction))}}catch(je){J(`Error opening indexedDB: ${je.message}`)}})}function jt(j){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,u.Z)(function*(j){return new Promise((B,q)=>{try{const he=indexedDB.deleteDatabase(j);he.onsuccess=()=>{B()},he.onerror=J=>{var je;q(`Error deleting indexedDB database "${j}": ${null===(je=J.target.error)||void 0===je?void 0:je.message}`)}}catch(he){q(`Error deleting indexedDB database "${j}": ${he.message}`)}})})).apply(this,arguments)}},3918:(ct,Te,k)=>{var u=k(5e3);let Y=null;function P(){return Y}const ie=new u.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function de(){return(0,u.LFG)(H)}()},providedIn:"platform"}),n})();const G=new u.OlP("Location Initialized");let H=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ke(){return new H((0,u.LFG)(ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,u.LFG)(ie).location;return new Qe((0,u.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const rt=new u.OlP("appBaseHref");let Qe=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const d=this.prepareExternalUrl(i+Be(a));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){const d=this.prepareExternalUrl(i+Be(a));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe),u.LFG(rt,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let d=this.prepareExternalUrl(i+Be(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){let d=this.prepareExternalUrl(i+Be(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe),u.LFG(rt,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke($e(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Ne,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(u.LFG(pe),u.LFG(fe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function we(){return new be((0,u.LFG)(pe),(0,u.LFG)(fe))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}function fo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Bs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Bs(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===a?void 0:a);else if(null!==a){const p=r.get(a);r.move(p,d),ds(p,i)}});for(let i=0,a=r.length;i<a;i++){const p=r.get(i).context;p.index=i,p.count=a,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ds(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ds(n,e){n.context.$implicit=e.item}let vr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cn{constructor(){this.$implicit=null,this.ngIf=null}}function cl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let qo=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[u.TTD]}),n})();class cd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ag{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const fs=new Ag,Ng=new cd;let Su=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return fs;if((0,u.F4k)(t))return Ng;throw function Hn(n,e){return new u.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})(),Qn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Hs="browser";function br(n){return"server"===n}let yl=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new vl((0,u.LFG)(ie),window)}),n})();class vl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ra(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const d=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ps(this.window.history)||ps(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ps(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class yn{}class $s extends class Zo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new $s)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function gd(){return dn=dn||document.querySelector("base"),dn?dn.getAttribute("href"):null}();return null==t?null:function yo(n){_o=_o||document.createElement("a"),_o.setAttribute("href",n);const e=_o.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){dn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fo(document.cookie,e)}}let _o,dn=null;const Ar=new u.OlP("TRANSITION_ID"),Ma=[{provide:u.ip1,useFactory:function Vn(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ar,ie,u.zs3],multi:!0}];class Oi{static init(){(0,u.VLi)(new Oi)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,d=!1;const p=function(_){d=d||_,a--,0==a&&r(d)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Nr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const qs=new u.OlP("EventManagerPlugins");let gs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const d=i[a];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qs),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class bl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Xr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n extends Xr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const d=this._doc.createElement("style");d.textContent=a,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ws),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ws))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Ws(n){P().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wl=/%COMP%/g;function Ce(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ce(n,i,t):(i=i.replace(wl,n),t.push(i))}return t}function Vt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ko(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ou(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new ku(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ce(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gs),u.LFG(zs),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ko{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_t[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=_t[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_t[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vt(r)):this.eventManager.addEventListener(e,t,Vt(r))}}class Ou extends Ko{constructor(e,t,r,i){super(e),this.component=r;const a=Ce(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ru(n){return"_ngcontent-%COMP%".replace(wl,n)}(i+"-"+r.id),this.hostAttr=function Mu(n){return"_nghost-%COMP%".replace(wl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ku extends Ko{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ce(i.id,i.styles,[]);for(let d=0;d<a.length;d++){const p=document.createElement("style");p.textContent=a[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let md=(()=>{class n extends bl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=["alt","control","meta","shift"],Zs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ei={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sl=(()=>{class n extends bl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),d=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let d="";if(Pu.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),d+=_+".")}),d+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=d,p}static getEventFullKey(t){let r="",i=function Ks(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&wr.hasOwnProperty(e)&&(e=wr[e]))}return Zs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pu.forEach(a=>{a!=i&&Ei[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Lu=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Hs},{provide:u.g9A,useValue:function ki(){$s.makeCurrent(),Oi.init()},multi:!0},{provide:ie,useFactory:function Il(){return(0,u.RDi)(document),document},deps:[]}]),Oa=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Fu(){return new u.qLn},deps:[]},{provide:qs,useClass:md,multi:!0,deps:[ie,u.R0b,u.Lbi]},{provide:qs,useClass:Sl,multi:!0,deps:[ie]},{provide:Dn,useClass:Dn,deps:[gs,zs,u.AFp]},{provide:u.FYo,useExisting:Dn},{provide:Xr,useExisting:zs},{provide:zs,useClass:zs,deps:[ie]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:gs,useClass:gs,deps:[qs,u.R0b]},{provide:yn,useClass:Nr,deps:[]}];let ka=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Ar,useExisting:u.AFp},Ma]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Oa,imports:[Qn,u.hGG]}),n})();"undefined"!=typeof window&&window;const Er_firebaseConfig={apiKey:"AIzaSyDNOmYsQxThVOk38mFiClkfo1kwEYOq430",authDomain:"sismeals-recipes.firebaseapp.com",projectId:"sismeals-recipes",storageBucket:"sismeals-recipes.appspot.com",messagingSenderId:"517654564483",appId:"1:517654564483:web:760c42fd4e5cce679395b6",measurementId:"G-0R1W18RKS5"};var Ki=k(3269),Zt=k(8996);function ht(...n){const e=(0,Ki.yG)(n);return(0,Zt.D)(n,e)}var xn=k(8306),Cn=k(5577),Pi=k(576);function Qt(n,e){return(0,Pi.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}var or=k(4482),nn=k(5403);function Bn(n,e){return(0,or.e)((t,r)=>{let i=0;t.subscribe((0,nn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var at=k(4004);class pf{}class qu{}class Fi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(d):this.headers.set(a,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===a.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class gf{encodeKey(e){return Do(e)}encodeValue(e){return Do(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Xo=/%(\d[a-f0-9])/gi,ys={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Do(n){return encodeURIComponent(n).replace(Xo,(e,t)=>{var r;return null!==(r=ys[t])&&void 0!==r?r:e})}function ti(n){return`${n}`}class $r{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new gf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Qo(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[d,p]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(d)||[];_.push(p),t.set(d,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new $r({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ti(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ti(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Co{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ea(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Qs(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Rl(n){return"undefined"!=typeof FormData&&n instanceof FormData}class To{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function zu(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Fi),this.context||(this.context=new Co),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new $r,this.urlWithParams=t}serializeBody(){return null===this.body?null:ea(this.body)||Qs(this.body)||Rl(this.body)||function Fg(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $r?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Rl(this.body)?null:Qs(this.body)?this.body.type||null:ea(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $r?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,d=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,S=e.params||this.params;const N=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((O,L)=>O.set(L,e.setHeaders[L]),E)),e.setParams&&(S=Object.keys(e.setParams).reduce((O,L)=>O.set(L,e.setParams[L]),S)),new To(r,i,d,{params:S,headers:E,context:N,reportProgress:_,responseType:a,withCredentials:p})}}var sn=(()=>((sn=sn||{})[sn.Sent=0]="Sent",sn[sn.UploadProgress=1]="UploadProgress",sn[sn.ResponseHeader=2]="ResponseHeader",sn[sn.DownloadProgress=3]="DownloadProgress",sn[sn.Response=4]="Response",sn[sn.User=5]="User",sn))();class Wu{constructor(e,t=200,r="OK"){this.headers=e.headers||new Fi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ta extends Wu{constructor(e={}){super(e),this.type=sn.ResponseHeader}clone(e={}){return new ta({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Fa extends Wu{constructor(e={}){super(e),this.type=sn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Fa({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Li extends Wu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ml(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let na=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof To)a=t;else{let _,E;_=i.headers instanceof Fi?i.headers:new Fi(i.headers),i.params&&(E=i.params instanceof $r?i.params:new $r({fromObject:i.params})),a=new To(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=ht(a).pipe(Qt(_=>this.handler.handle(_)));if(t instanceof To||"events"===i.observe)return d;const p=d.pipe(Bn(_=>_ instanceof Fa));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,at.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,at.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new $r).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ml(i,r))}post(t,r,i={}){return this.request("POST",t,Ml(i,r))}put(t,r,i={}){return this.request("PUT",t,Ml(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pf))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class La{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const vs=new u.OlP("HTTP_INTERCEPTORS");let ra=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const my=/^\)\]\}',?\n/;let Ku=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,$)=>i.setRequestHeader(L,$.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const a=t.serializeBody();let d=null;const p=()=>{if(null!==d)return d;const L=i.statusText||"OK",$=new Fi(i.getAllResponseHeaders()),te=function Vg(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return d=new ta({headers:$,status:i.status,statusText:L,url:te}),d},_=()=>{let{headers:L,status:$,statusText:te,url:ve}=p(),Fe=null;204!==$&&(Fe=void 0===i.response?i.responseText:i.response),0===$&&($=Fe?200:0);let Ae=$>=200&&$<300;if("json"===t.responseType&&"string"==typeof Fe){const Je=Fe;Fe=Fe.replace(my,"");try{Fe=""!==Fe?JSON.parse(Fe):null}catch(Me){Fe=Je,Ae&&(Ae=!1,Fe={error:Me,text:Fe})}}Ae?(r.next(new Fa({body:Fe,headers:L,status:$,statusText:te,url:ve||void 0})),r.complete()):r.error(new Li({error:Fe,headers:L,status:$,statusText:te,url:ve||void 0}))},E=L=>{const{url:$}=p(),te=new Li({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:$||void 0});r.error(te)};let S=!1;const N=L=>{S||(r.next(p()),S=!0);let $={type:sn.DownloadProgress,loaded:L.loaded};L.lengthComputable&&($.total=L.total),"text"===t.responseType&&!!i.responseText&&($.partialText=i.responseText),r.next($)},O=L=>{let $={type:sn.UploadProgress,loaded:L.loaded};L.lengthComputable&&($.total=L.total),r.next($)};return i.addEventListener("load",_),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",N),null!==a&&i.upload&&i.upload.addEventListener("progress",O)),i.send(a),r.next({type:sn.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",_),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",N),null!==a&&i.upload&&i.upload.removeEventListener("progress",O)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Yu=new u.OlP("XSRF_COOKIE_NAME"),Sd=new u.OlP("XSRF_HEADER_NAME");class mf{}let So=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(u.Lbi),u.LFG(Yu))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Id=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(mf),u.LFG(Sd))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),On=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(vs,[]);this.chain=r.reduceRight((i,a)=>new La(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qu),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Bg=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Id,useClass:ra}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Yu,useValue:t.cookieName}:[],t.headerName?{provide:Sd,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Id,{provide:vs,useExisting:Id,multi:!0},{provide:mf,useClass:So},{provide:Yu,useValue:"XSRF-TOKEN"},{provide:Sd,useValue:"X-XSRF-TOKEN"}]}),n})(),Ju=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[na,{provide:pf,useClass:On},Ku,{provide:qu,useExisting:Ku}],imports:[[Bg.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var In=k(7579);class bn extends In.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Bi}=Array,{getPrototypeOf:Ji,prototype:Ua,keys:Qu}=Object;function Xu(n){if(1===n.length){const e=n[0];if(Bi(e))return{args:e,keys:null};if(function Nd(n){return n&&"object"==typeof n&&Ji(n)===Ua}(e)){const t=Qu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Xs=k(4671);const{isArray:ni}=Array;function eo(n){return(0,at.U)(e=>function Rd(n,e){return ni(e)?n(...e):n(e)}(n,e))}function ec(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Io=k(9672);function ia(...n){const e=(0,Ki.yG)(n),t=(0,Ki.jO)(n),{args:r,keys:i}=Xu(n);if(0===r.length)return(0,Zt.D)([],e);const a=new xn.y(function _f(n,e,t=Xs.y){return r=>{xl(e,()=>{const{length:i}=n,a=new Array(i);let d=i,p=i;for(let _=0;_<i;_++)xl(e,()=>{const E=(0,Zt.D)(n[_],e);let S=!1;E.subscribe((0,nn.x)(r,N=>{a[_]=N,S||(S=!0,p--),p||r.next(t(a.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>ec(i,d):Xs.y));return t?a.pipe(eo(t)):a}function xl(n,e,t){n?(0,Io.f)(t,n,e):e()}function Di(n,e){const t=(0,Pi.m)(n)?n:()=>n,r=i=>i.error(t());return new xn.y(e?i=>e.schedule(r,0,i):r)}const qr=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var sa=k(8189);function Ao(...n){return function tc(){return(0,sa.J)(1)}()((0,Zt.D)(n,(0,Ki.yG)(n)))}var Dr=k(8421);function oa(n){return new xn.y(e=>{(0,Dr.Xf)(n()).subscribe(e)})}var Qi=k(515),C=k(727);function T(){return(0,or.e)((n,e)=>{let t=null;n._refCount++;const r=(0,nn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class M extends xn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,or.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new C.w0;const t=this.getSubject();e.add(this.source.subscribe((0,nn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=C.w0.EMPTY)}return e}refCount(){return T()(this)}}function V(n,e){return(0,or.e)((t,r)=>{let i=null,a=0,d=!1;const p=()=>d&&!i&&r.complete();t.subscribe((0,nn.x)(r,_=>{null==i||i.unsubscribe();let E=0;const S=a++;(0,Dr.Xf)(n(_,S)).subscribe(i=(0,nn.x)(r,N=>r.next(e?e(_,N,S,E++):N),()=>{i=null,p()}))},()=>{d=!0,p()}))})}var W=k(5698);function ee(...n){const e=(0,Ki.yG)(n);return(0,or.e)((t,r)=>{(e?Ao(n,t,e):Ao(n,t)).subscribe(r)})}function xe(n,e,t,r,i){return(a,d)=>{let p=t,_=e,E=0;a.subscribe((0,nn.x)(d,S=>{const N=E++;_=p?n(_,S,N):(p=!0,S),r&&d.next(_)},i&&(()=>{p&&d.next(_),d.complete()})))}}function Ye(n,e){return(0,or.e)(xe(n,e,arguments.length>=2,!0))}function Xe(n){return(0,or.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,nn.x)(t,void 0,void 0,d=>{a=(0,Dr.Xf)(n(d,Xe(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Dt(n){return n<=0?()=>Qi.E:(0,or.e)((e,t)=>{let r=[];e.subscribe((0,nn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $t(n=It){return(0,or.e)((e,t)=>{let r=!1;e.subscribe((0,nn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function It(){return new qr}function zn(n){return(0,or.e)((e,t)=>{let r=!1;e.subscribe((0,nn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ri(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((i,a)=>n(i,a,r)):Xs.y,(0,W.q)(1),t?zn(e):$t(()=>new qr))}var Xn=k(8505);function Ui(n){return(0,or.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Wn{constructor(e,t){this.id=e,this.url=t}}class Xi extends Wn{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ji extends Wn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vf extends Wn{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ug extends Wn{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Md extends Wn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ol extends Wn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jg extends Wn{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _y extends Wn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yy extends Wn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class No{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vy{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class by{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gg{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xd{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wy{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class Ey{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Pl(n){return new Ey(n)}const nc="ngNavigationCancelingError";function rc(n){const e=Error("NavigationCancelingError: "+n);return e[nc]=!0,e}function Dy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const d=r[a],p=n[a];if(d.startsWith(":"))i[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ro(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!ic(n[i],e[i]))return!1;return!0}function ic(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Od(n){return Array.prototype.concat.apply([],n)}function wf(n){return n.length>0?n[n.length-1]:null}function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function bs(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Zt.D)(Promise.resolve(n)):ht(n)}const Sy={exact:function ws(n,e,t){if(!ja(n.segments,e.segments)||!oc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ws(n.children[r],e.children[r],t))return!1;return!0},subset:Ef},Hg={exact:function Iy(n,e){return Ro(n,e)},subset:function sc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ic(n[t],e[t]))},ignored:()=>!0};function kd(n,e,t){return Sy[t.paths](n.root,e.root,t.matrixParams)&&Hg[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ef(n,e,t){return Ay(n,e,e.segments,t)}function Ay(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ja(i,t)||e.hasChildren()||!oc(i,t,r))}if(n.segments.length===t.length){if(!ja(n.segments,t)||!oc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ef(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ja(n.segments,i)&&oc(n.segments,i,r)&&n.children[Gt])&&Ay(n.children[Gt],e,a,r)}}function oc(n,e,t){return e.every((r,i)=>Hg[t](n[i].parameters,r.parameters))}class Ll{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pl(this.queryParams)),this._queryParamMap}toString(){return rw.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ar(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pd(this)}}class ac{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Pl(this.parameters)),this._parameterMap}toString(){return My(this)}}function ja(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ry{}class aa{parse(e){const t=new Oy(e);return new Ll(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${to(e.root,!0)}`,r=function iw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ii(t)}=${ii(i)}`).join("&"):`${ii(t)}=${ii(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function lc(n){return encodeURI(n)}(e.fragment)}`:""}`}}const rw=new aa;function Pd(n){return n.segments.map(e=>My(e)).join("/")}function to(n,e){if(!n.hasChildren())return Pd(n);if(e){const t=n.children[Gt]?to(n.children[Gt],!1):"",r=[];return ar(n.children,(i,a)=>{a!==Gt&&r.push(`${a}:${to(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ny(n,e){let t=[];return ar(n.children,(r,i)=>{i===Gt&&(t=t.concat(e(r,i)))}),ar(n.children,(r,i)=>{i!==Gt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Gt?[to(n.children[Gt],!1)]:[`${i}:${to(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${Pd(n)}/${t[0]}`:`${Pd(n)}/(${t.join("//")})`}}function Df(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ii(n){return Df(n).replace(/%3B/gi,";")}function Fd(n){return Df(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ga(n){return decodeURIComponent(n)}function Cf(n){return Ga(n.replace(/\+/g,"%20"))}function My(n){return`${Fd(n.path)}${function qg(n){return Object.keys(n).map(e=>`;${Fd(e)}=${Fd(n[e])}`).join("")}(n.parameters)}`}const Tf=/^[^\/()?;=#]+/;function Vl(n){const e=n.match(Tf);return e?e[0]:""}const Sf=/^[^=?&#]+/,xy=/^[^&#]+/;class Oy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new Kt(e,t)),r}parseSegment(){const e=Vl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ac(Ga(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Vl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Vl(this.remaining);i&&(r=i,this.capture(r))}e[Ga(t)]=Ga(r)}parseQueryParam(e){const t=function sw(n){const e=n.match(Sf);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Ld(n){const e=n.match(xy);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Cf(t),a=Cf(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Gt);const d=this.parseChildren();t[a]=1===Object.keys(d).length?d[Gt]:new Kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class zg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cc(e,this._root).map(t=>t.value)}}function uc(n,e){if(n===e.value)return e;for(const t of e.children){const r=uc(n,t);if(r)return r}return null}function cc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cc(n,t);if(r.length)return r.unshift(e),r}return[]}class no{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dc extends zg{constructor(e,t){super(e),this.snapshot=t,Nf(this,e)}toString(){return this.snapshot.toString()}}function Vd(n,e){const t=function ky(n,e){const d=new Bl([],{},{},"",{},Gt,e,null,n.root,-1,{});return new Af("",new no(d,[]))}(n,e),r=new bn([new ac("",{})]),i=new bn({}),a=new bn({}),d=new bn({}),p=new bn(""),_=new wn(r,i,d,p,a,Gt,e,t.root);return _.snapshot=t.root,new dc(new no(_,[]),t)}class wn{constructor(e,t,r,i,a,d,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>Pl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>Pl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function If(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Py(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Bl{constructor(e,t,r,i,a,d,p,_,E,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=p,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Af extends zg{constructor(e,t){super(t),this.url=e,Nf(this,t)}toString(){return hc(this._root)}}function Nf(n,e){e.value._routerState=n,e.children.forEach(t=>Nf(n,t))}function hc(n){const e=n.children.length>0?` { ${n.children.map(hc).join(", ")} } `:"";return`${n.value}${e}`}function Rf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ro(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ro(e.params,t.params)||n.params.next(t.params),function bf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ro(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ro(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bd(n,e){const t=Ro(n.params,e.params)&&function $g(n,e){return ja(n,e)&&n.every((t,r)=>Ro(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Bd(n.parent,e.parent))}function Ud(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ow(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ud(n,r,i);return Ud(n,r)})}(n,e,t);return new no(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const d=a.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(p=>Ud(n,p)),d}}const r=function fc(n){return new wn(new bn(n.url),new bn(n.params),new bn(n.queryParams),new bn(n.fragment),new bn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Ud(n,a));return new no(r,i)}}function la(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ua(n){return"object"==typeof n&&null!=n&&n.outlets}function pc(n,e,t,r,i){let a={};if(r&&ar(r,(p,_)=>{a[_]=Array.isArray(p)?p.map(E=>`${E}`):`${p}`}),n===e)return new Ll(t,a,i);const d=xr(n,e,t);return new Ll(d,a,i)}function xr(n,e,t){const r={};return ar(n.children,(i,a)=>{r[a]=i===e?t:xr(i,e,t)}),new Kt(n.segments,r)}class ca{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&la(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ua);if(i&&i!==wf(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class si{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function mc(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return Ul(n,e,t);const r=function Wg(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const d=n.segments[i],p=t[r];if(ua(p))break;const _=`${p}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!Of(_,E,d))return a;r+=2}else{if(!Of(_,{},d))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Kt(n.segments.slice(0,r.pathIndex),{});return a.children[Gt]=new Kt(n.segments.slice(r.pathIndex),n.children),Ul(a,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?jd(n,e,t):r.match?Ul(n,0,i):jd(n,e,t)}function Ul(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function Ly(n){return ua(n[0])?n[0].outlets:{[Gt]:n}}(t),i={};return ar(r,(a,d)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[d]=mc(n.children[d],e,a))}),ar(n.children,(a,d)=>{void 0===r[d]&&(i[d]=a)}),new Kt(n.segments,i)}}function jd(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(ua(a)){const _=Vy(a.outlets);return new Kt(r,_)}if(0===i&&la(t[0])){r.push(new ac(n.segments[e].path,Es(t[0]))),i++;continue}const d=ua(a)?a.outlets[Gt]:`${a}`,p=i<t.length-1?t[i+1]:null;d&&p&&la(p)?(r.push(new ac(d,Es(p))),i+=2):(r.push(new ac(d,{})),i++)}return new Kt(r,{})}function Vy(n){const e={};return ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jd(new Kt([],{}),0,t))}),e}function Es(n){const e={};return ar(n,(t,r)=>e[r]=`${t}`),e}function Of(n,e,t){return n==t.path&&Ro(e,t.parameters)}class kf{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Mo(t);e.children.forEach(a=>{const d=a.value.outlet;this.deactivateRoutes(a,i[d],r),delete i[d]}),ar(i,(a,d)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Mo(e);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);if(r&&r.outlet){const d=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Mo(e);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Mo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new xd(a.value.snapshot))}),e.children.length&&this.forwardEvent(new by(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Rf(i),i===a)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),Rf(p.route.value),this.activateChildRoutes(e,null,d.children)}else{const p=function Uy(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=_,d.outlet&&d.outlet.activateWith(i,_),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Gd{constructor(e,t){this.routes=e,this.module=t}}function An(n){return"function"==typeof n}function xo(n){return n instanceof Ll}const jl=Symbol("INITIAL_VALUE");function yc(){return V(n=>ia(n.map(e=>e.pipe((0,W.q)(1),ee(jl)))).pipe(Ye((e,t)=>{let r=!1;return t.reduce((i,a,d)=>i!==jl?i:(a===jl&&(r=!0),r||!1!==a&&d!==t.length-1&&!xo(a)?i:a),e)},jl),Bn(e=>e!==jl),(0,at.U)(e=>xo(e)?e:!0===e),(0,W.q)(1)))}class Lf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new vc,this.attachRef=null}}class vc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Lf,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Vf=(()=>{class n{constructor(t,r,i,a,d){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||Gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new Gy(t,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vc),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Gy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wn?this.route:e===vc?this.childContexts:this.parent.get(e,t)}}let Zg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[Vf],encapsulation:2}),n})();function y(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];f(r,m(e,r))}}function f(n,e){n.children&&y(n.children,e)}function m(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function b(n){const e=n.children&&n.children.map(b),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=Zg),t}function I(n){return n.outlet||Gt}function x(n,e){const t=n.filter(r=>I(r)===e);return t.push(...n.filter(r=>I(r)!==e)),t}const z={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function re(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},z):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Dy)(t,n,e);if(!a)return Object.assign({},z);const d={};ar(a.posParams,(_,E)=>{d[E]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},d),a.consumed[a.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Ue(n,e,t,r,i="corrected"){if(t.length>0&&function ft(n,e,t){return t.some(r=>oi(n,e,r)&&I(r)!==Gt)}(n,t,r)){const d=new Kt(e,function Et(n,e,t,r){const i={};i[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&I(a)!==Gt){const d=new Kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[I(a)]=d}return i}(n,e,r,new Kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function kn(n,e,t){return t.some(r=>oi(n,e,r))}(n,t,r)){const d=new Kt(n.segments,function it(n,e,t,r,i,a){const d={};for(const p of r)if(oi(n,t,p)&&!i[I(p)]){const _=new Kt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,d[I(p)]=_}return Object.assign(Object.assign({},i),d)}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const a=new Kt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function oi(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Gl(n,e,t,r){return!!(I(n)===r||r!==Gt&&oi(e,t,n))&&("**"===n.path||re(e,n,t).matched)}function bc(n,e,t){return 0===e.length&&!n.children[t]}class da{constructor(e){this.segmentGroup=e||null}}class Hd{constructor(e){this.urlTree=e}}function wc(n){return Di(new da(n))}function ko(n){return Di(new Hd(n))}class qd{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=Ue(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Gt).pipe((0,at.U)(a=>this.createUrlTree(Ec(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xe(a=>{if(a instanceof Hd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof da?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Gt).pipe((0,at.U)(i=>this.createUrlTree(Ec(i),e.queryParams,e.fragment))).pipe(Xe(i=>{throw i instanceof da?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Kt([],{[Gt]:e}):e;return new Ll(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(a=>new Kt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Zt.D)(i).pipe(Qt(a=>{const d=r.children[a],p=x(t,a);return this.expandSegmentGroup(e,p,d,a).pipe((0,at.U)(_=>({segment:_,outlet:a})))}),Ye((a,d)=>(a[d.outlet]=d.segment,a),{}),function Un(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((i,a)=>n(i,a,r)):Xs.y,Dt(1),t?zn(e):$t(()=>new qr))}())}expandSegment(e,t,r,i,a,d){return(0,Zt.D)(r).pipe(Qt(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,d).pipe(Xe(E=>{if(E instanceof da)return ht(null);throw E}))),ri(p=>!!p),Xe((p,_)=>{if(p instanceof qr||"EmptyError"===p.name)return bc(t,i,a)?ht(new Kt([],{})):wc(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,d,p){return Gl(i,t,a,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d):wc(t):wc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ko(a):this.lineralizeSegments(r,a).pipe((0,Cn.z)(d=>{const p=new Kt(d,{});return this.expandSegment(e,p,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){const{matched:p,consumedSegments:_,remainingSegments:E,positionalParamSegments:S}=re(t,i,a);if(!p)return wc(t);const N=this.applyRedirectCommands(_,i.redirectTo,S);return i.redirectTo.startsWith("/")?ko(N):this.lineralizeSegments(i,N).pipe((0,Cn.z)(O=>this.expandSegment(e,t,r,O.concat(E),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ht(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,at.U)(N=>(r._loadedConfig=N,new Kt(i,{})))):ht(new Kt(i,{}));const{matched:d,consumedSegments:p,remainingSegments:_}=re(t,r,i);return d?this.getChildConfig(e,r,i).pipe((0,Cn.z)(S=>{const N=S.module,O=S.routes,{segmentGroup:L,slicedSegments:$}=Ue(t,p,_,O),te=new Kt(L.segments,L.children);if(0===$.length&&te.hasChildren())return this.expandChildren(N,O,te).pipe((0,at.U)(Je=>new Kt(p,Je)));if(0===O.length&&0===$.length)return ht(new Kt(p,{}));const ve=I(r)===a;return this.expandSegment(N,te,O,$,ve?Gt:a,!0).pipe((0,at.U)(Ae=>new Kt(p.concat(Ae.segments),Ae.children)))})):wc(t)}getChildConfig(e,t,r){return t.children?ht(new Gd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ht(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,at.U)(a=>(t._loadedConfig=a,a))):function Bf(n){return Di(rc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ht(new Gd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?ht(i.map(d=>{const p=e.get(d);let _;if(function jy(n){return n&&An(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!An(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return bs(_)})).pipe(yc(),(0,Xn.b)(d=>{if(!xo(d))return;const p=rc(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),(0,at.U)(d=>!0===d)):ht(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ht(r);if(i.numberOfChildren>1||!i.children[Gt])return Di(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ll(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ar(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let d={};return ar(t.children,(p,_)=>{d[_]=this.createSegmentGroup(e,p,r,i)}),new Kt(a,d)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ec(n){const e={};for(const r of Object.keys(n.children)){const a=Ec(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Hy(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class aw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kg{constructor(e,t){this.component=e,this.route=t}}function SC(n,e,t){const r=n._root;return Dc(r,e?e._root:null,t,[r.value])}function zd(n,e,t){const r=function uw(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Dc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Mo(e);return n.children.forEach(d=>{(function IC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,d=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){const _=function AC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ja(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ja(n.url,e.url)||!Ro(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bd(n,e)||!Ro(n.queryParams,e.queryParams);default:return!Bd(n,e)}}(d,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new aw(r)):(a.data=d.data,a._resolvedData=d._resolvedData),Dc(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Kg(p.outlet.component,d))}else d&&Wd(e,p,i),i.canActivateChecks.push(new aw(r)),Dc(n,null,a.component?p?p.children:null:t,r,i)})(d,a[d.value.outlet],t,r.concat([d.value]),i),delete a[d.value.outlet]}),ar(a,(d,p)=>Wd(d,t.getContext(p),i)),i}function Wd(n,e,t){const r=Mo(n),i=n.value;ar(r,(a,d)=>{Wd(a,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Kg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class pw{}function qy(n){return new xn.y(e=>e.error(n))}class gw{constructor(e,t,r,i,a,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=d}recognize(){const e=Ue(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Gt);if(null===t)return null;const r=new Bl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new no(r,t),a=new Af(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=If(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const d=t.children[a],p=x(e,a),_=this.processSegmentGroup(p,d,a);if(null===_)return null;r.push(..._)}const i=Xg(r);return function Jg(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const d=this.processSegmentAgainstRoute(a,t,r,i);if(null!==d)return d}return bc(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Gl(e,t,r,i))return null;let a,d=[],p=[];if("**"===e.path){const L=r.length>0?wf(r).parameters:{};a=new Bl(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_w(e),I(e),e.component,e,em(t),Zd(t)+r.length,Wy(e))}else{const L=re(t,e,r);if(!L.matched)return null;d=L.consumedSegments,p=L.remainingSegments,a=new Bl(d,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_w(e),I(e),e.component,e,em(t),Zd(t)+d.length,Wy(e))}const _=function Qg(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:S}=Ue(t,d,p,_.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===S.length&&E.hasChildren()){const L=this.processChildren(_,E);return null===L?null:[new no(a,L)]}if(0===_.length&&0===S.length)return[new no(a,[])];const N=I(e)===i,O=this.processSegment(_,E,S,N?Gt:i);return null===O?null:[new no(a,O)]}}function mw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Xg(n){const e=[],t=new Set;for(const r of n){if(!mw(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Xg(r.children);e.push(new no(r.value,i))}return e.filter(r=>!t.has(r))}function em(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zd(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function _w(n){return n.data||{}}function Wy(n){return n.resolve||{}}function Ky(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tm(n){return V(e=>{const t=n(e);return t?(0,Zt.D)(t).pipe((0,at.U)(()=>e)):ht(e)})}class PC extends class vw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Yy=new u.OlP("ROUTES");class ro{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,at.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=a.create(e);return new Gd(Od(d.injector.get(Yy,void 0,u.XFs.Self|u.XFs.Optional)).map(b),d)}),Xe(a=>{throw t._loader$=void 0,a}));return t._loader$=new M(i,()=>new In.x).pipe(T()),t._loader$}loadModuleFactory(e){return bs(e()).pipe((0,Cn.z)(t=>t instanceof u.YKP?ht(t):(0,Zt.D)(this.compiler.compileModuleAsync(t))))}}class bw{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function LC(n){throw n}function VC(n,e,t){return e.parse("/")}function ww(n,e){return ht(null)}const BC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ew={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gi=(()=>{class n{constructor(t,r,i,a,d,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new In.x,this.errorHandler=LC,this.malformedUriErrorHandler=VC,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ww,afterPreactivation:ww},this.urlHandlingStrategy=new bw,this.routeReuseStrategy=new PC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(u.h0i),this.console=d.get(u.c2e);const N=d.get(u.R0b);this.isNgZoneEnabled=N instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function Ty(){return new Ll(new Kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ro(d,p,O=>this.triggerEvent(new No(O)),O=>this.triggerEvent(new kl(O))),this.routerState=Vd(this.currentUrlTree,this.rootComponentType),this.transitions=new bn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Bn(i=>0!==i.id),(0,at.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),V(i=>{let a=!1,d=!1;return ht(i).pipe((0,Xn.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),V(p=>{const _=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Dw(p.source)&&(this.browserUrlTree=p.extractedUrl),ht(p).pipe(V(N=>{const O=this.transitions.getValue();return r.next(new Xi(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),O!==this.transitions.getValue()?Qi.E:Promise.resolve(N)}),function $y(n,e,t,r){return V(i=>function Uf(n,e,t,r,i){return new qd(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xn.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function xC(n,e,t,r,i){return(0,Cn.z)(a=>function zy(n,e,t,r,i="emptyOnly",a="legacy"){try{const d=new gw(n,e,t,r,i,a).recognize();return null===d?qy(new pw):ht(d)}catch(d){return qy(d)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,at.U)(d=>Object.assign(Object.assign({},a),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xn.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(L,N)}this.browserUrlTree=N.urlAfterRedirects}const O=new Md(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(O)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:L,source:$,restoredState:te,extras:ve}=p,Fe=new Xi(O,this.serializeUrl(L),$,te);r.next(Fe);const Ae=Vd(L,this.rootComponentType).snapshot;return ht(Object.assign(Object.assign({},p),{targetSnapshot:Ae,urlAfterRedirects:L,extras:Object.assign(Object.assign({},ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Qi.E}),tm(p=>{const{targetSnapshot:_,id:E,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:O,replaceUrl:L}}=p;return this.hooks.beforePreactivation(_,{navigationId:E,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!O,replaceUrl:!!L})}),(0,Xn.b)(p=>{const _=new Ol(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,at.U)(p=>Object.assign(Object.assign({},p),{guards:SC(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function cw(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:d}}=t;return 0===d.length&&0===a.length?ht(Object.assign(Object.assign({},t),{guardsResult:!0})):function Cc(n,e,t,r){return(0,Zt.D)(n).pipe((0,Cn.z)(i=>function fw(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ht(a.map(p=>{const _=zd(p,e,i);let E;if(function Ff(n){return n&&An(n.canDeactivate)}(_))E=bs(_.canDeactivate(n,e,t,r));else{if(!An(_))throw new Error("Invalid CanDeactivate guard");E=bs(_(n,e,t,r))}return E.pipe(ri())})).pipe(yc()):ht(!0)}(i.component,i.route,t,e,r)),ri(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Cn.z)(p=>p&&function Pf(n){return"boolean"==typeof n}(p)?function dw(n,e,t,r){return(0,Zt.D)(e).pipe(Qt(i=>Ao(function NC(n,e){return null!==n&&e&&e(new vy(n)),ht(!0)}(i.route.parent,r),function hw(n,e){return null!==n&&e&&e(new Gg(n)),ht(!0)}(i.route,r),function RC(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(d=>function lw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>oa(()=>ht(d.guards.map(_=>{const E=zd(_,d.node,t);let S;if(function _c(n){return n&&An(n.canActivateChild)}(E))S=bs(E.canActivateChild(r,n));else{if(!An(E))throw new Error("Invalid CanActivateChild guard");S=bs(E(r,n))}return S.pipe(ri())})).pipe(yc())));return ht(a).pipe(yc())}(n,i.path,t),function Yg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ht(!0);const i=r.map(a=>oa(()=>{const d=zd(a,e,t);let p;if(function Oo(n){return n&&An(n.canActivate)}(d))p=bs(d.canActivate(e,n));else{if(!An(d))throw new Error("Invalid CanActivate guard");p=bs(d(e,n))}return p.pipe(ri())}));return ht(i).pipe(yc())}(n,i.route,t))),ri(i=>!0!==i,!0))}(r,a,n,e):ht(p)),(0,at.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Xn.b)(p=>{if(xo(p.guardsResult)){const E=rc(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw E.url=p.guardsResult,E}const _=new jg(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Bn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),tm(p=>{if(p.guards.canActivateChecks.length)return ht(p).pipe((0,Xn.b)(_=>{const E=new _y(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}),V(_=>{let E=!1;return ht(_).pipe(function OC(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ht(t);let a=0;return(0,Zt.D)(i).pipe(Qt(d=>function yw(n,e,t,r){return function Zy(n,e,t,r){const i=Ky(n);if(0===i.length)return ht({});const a={};return(0,Zt.D)(i).pipe((0,Cn.z)(d=>function gA(n,e,t,r){const i=zd(n,e,r);return bs(i.resolve?i.resolve(e,t):i(e,t))}(n[d],e,t,r).pipe((0,Xn.b)(p=>{a[d]=p}))),Dt(1),(0,Cn.z)(()=>Ky(a).length===i.length?ht(a):Qi.E))}(n._resolve,n,e,r).pipe((0,at.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),If(n,t).resolve),null)))}(d.route,r,n,e)),(0,Xn.b)(()=>a++),Dt(1),(0,Cn.z)(d=>a===i.length?ht(t):Qi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xn.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Xn.b)(_=>{const E=new yy(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}))}),tm(p=>{const{targetSnapshot:_,id:E,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:O,replaceUrl:L}}=p;return this.hooks.afterPreactivation(_,{navigationId:E,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!O,replaceUrl:!!L})}),(0,at.U)(p=>{const _=function Fy(n,e,t){const r=Ud(n,e._root,t?t._root:void 0);return new dc(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,Xn.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new kf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Xn.b)({next(){a=!0},complete(){a=!0}}),Ui(()=>{var p;a||d||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),Xe(p=>{if(d=!0,function Fl(n){return n&&n[nc]}(p)){const _=xo(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const E=new vf(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(E),_?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),N={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dw(i.source)};this.scheduleNavigation(S,"imperative",null,N,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Ug(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(E){i.reject(E)}}return Qi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},d=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(d){const _=Object.assign({},d);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,d,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){y(t),this.config=t.map(b),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:d,queryParamsHandling:p,preserveFragment:_}=r,E=i||this.routerState.root,S=_?this.currentUrlTree.fragment:d;let N=null;switch(p){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=a||null}return null!==N&&(N=this.removeEmptyProps(N)),function zr(n,e,t,r,i){if(0===t.length)return pc(e.root,e.root,e.root,r,i);const a=function Mf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ca(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,d)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return ar(a.outlets,(_,E)=>{p[E]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===d?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new ca(t,e,r)}(t);if(a.toRoot())return pc(e.root,e.root,new Kt([],{}),r,i);const d=function gc(n,e,t){if(n.isAbsolute)return new si(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new si(a,a===e.root,0)}const r=la(n.commands[0])?0:1;return function xf(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new si(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=d.processChildren?Ul(d.segmentGroup,d.index,a.commands):mc(d.segmentGroup,d.index,a.commands);return pc(e.root,d.segmentGroup,p,r,i)}(E,this.currentUrlTree,t,N,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=xo(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function UC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},BC):!1===r?Object.assign({},Ew):r,xo(t))return kd(this.currentUrlTree,t,i);const a=this.parseUrl(t);return kd(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ji(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,d){var p,_;if(this.disposed)return Promise.resolve(!1);let E,S,N;d?(E=d.resolve,S=d.reject,N=d.promise):N=new Promise(($,te)=>{E=$,S=te});const O=++this.navigationId;let L;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),L=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):L=0,this.setTransition({id:O,targetPageId:L,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:E,reject:S,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch($=>Promise.reject($))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new vf(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Dw(n){return"imperative"!==n}let Nt=(()=>{class n{constructor(t,r,i,a,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=d,this.commands=null,this.onChanges=new In.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Tc(this.skipLocationChange),replaceUrl:Tc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Tc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Gi),u.Y36(wn),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function Tc(n){return""===n||!!n}class io{}class Sw{preload(e,t){return ht(null)}}let im=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new ro(i,r,_=>t.triggerEvent(new No(_)),_=>t.triggerEvent(new kl(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bn(t=>t instanceof ji),Qt(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const d=a._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Zt.D)(i).pipe((0,sa.J)(),(0,at.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ht(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Gi),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(io))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Po=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ji&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new wy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Hl=new u.OlP("ROUTER_CONFIGURATION"),sm=new u.OlP("ROUTER_FORROOT_GUARD"),mA=[be,{provide:Ry,useClass:aa},{provide:Gi,useFactory:function Qy(n,e,t,r,i,a,d={},p,_){const E=new Gi(null,n,e,t,r,i,Od(a));return p&&(E.urlHandlingStrategy=p),_&&(E.routeReuseStrategy=_),function _A(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,E),d.enableTracing&&E.events.subscribe(S=>{var N,O;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(O=console.groupEnd)||void 0===O||O.call(console)}),E},deps:[Ry,vc,be,u.zs3,u.Sil,Yy,Hl,[class FC{},new u.FiY],[class kC{},new u.FiY]]},vc,{provide:wn,useFactory:function GC(n){return n.routerState.root},deps:[Gi]},im,Sw,class Tw{preload(e,t){return t().pipe(Xe(()=>ht(null)))}},{provide:Hl,useValue:{enableTracing:!1}}];function Aw(){return new u.PXZ("Router",Gi)}let jC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[mA,lm(t),{provide:sm,useFactory:Jy,deps:[[Gi,new u.FiY,new u.tp0]]},{provide:Hl,useValue:r||{}},{provide:pe,useFactory:am,deps:[fe,[new u.tBr(rt),new u.FiY],Hl]},{provide:Po,useFactory:om,deps:[Gi,yl,Hl]},{provide:io,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Sw},{provide:u.PXZ,multi:!0,useFactory:Aw},[Xy,{provide:u.ip1,multi:!0,useFactory:HC,deps:[Xy]},{provide:ev,useFactory:$C,deps:[Xy]},{provide:u.tb,multi:!0,useExisting:ev}]]}}static forChild(t){return{ngModule:n,providers:[lm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(sm,8),u.LFG(Gi,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function om(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Po(n,e,t)}function am(n,e,t={}){return t.useHash?new Se(n,e):new Qe(n,e)}function Jy(n){return"guarded"}function lm(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Yy,multi:!0,useValue:n}]}let Xy=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new In.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Gi),d=this.injector.get(Hl);return"disabled"===d.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ht(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Hl),i=this.injector.get(im),a=this.injector.get(Po),d=this.injector.get(Gi),p=this.injector.get(u.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),a.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function HC(n){return n.appInitializer.bind(n)}function $C(n){return n.bootstrapListener.bind(n)}const ev=new u.OlP("Router Initializer");class bA{constructor(){this.id="",this.name="",this.time=0,this.category="",this.imgUrl="src/assets/home_images/sisters.jpg",this.ingredients=[{value:""}],this.description=""}}var jf=k(4986),Zn=k(5813);function tv(){return(0,or.e)((n,e)=>{let t,r=!1;n.subscribe((0,nn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Kd(n,e=Xs.y){return n=null!=n?n:wA,(0,or.e)((t,r)=>{let i,a=!0;t.subscribe((0,nn.x)(r,d=>{const p=e(d);(a||!n(i,p))&&(a=!1,i=p,r.next(d))}))})}function wA(n,e){return n===e}var nt,es=k(2011),qC=(k(4087),k(3942)),ye=k(5861),ha=k(9681),Gf=k(4859),Sc=k(1877),Rt=k(2090),EA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ci={},nv=nv||{},xt=EA||self;function Yd(){}function um(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ic(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fa="closure_uid_"+(1e9*Math.random()>>>0),Nw=0;function WC(n,e,t){return n.call.apply(n.bind,arguments)}function rv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WC:rv).apply(null,arguments)}function Hf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function li(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[i].apply(r,d)}}function $l(){this.s=this.s,this.o=this.o}var Jd={};$l.prototype.s=!1,$l.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function zC(n){return Object.prototype.hasOwnProperty.call(n,fa)&&n[fa]||(n[fa]=++Nw)}(this);delete Jd[n]}},$l.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Ac=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Nc(n){return Array.prototype.concat.apply([],arguments)}function iv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zf(n){return/^[\s\xa0]*$/.test(n)}var Ti,sv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ui(n,e){return-1!=n.indexOf(e)}function Wf(n,e){return n<e?-1:n>e?1:0}e:{var Zf=xt.navigator;if(Zf){var Rw=Zf.userAgent;if(Rw){Ti=Rw;break e}}Ti=""}function dm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ZC(n){const e={};for(const t in n)e[t]=n[t];return e}var ov="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function av(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<ov.length;a++)t=ov[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function lv(n){return lv[" "](n),n}lv[" "]=Yd;var Kf,n,KC=ui(Ti,"Opera"),Qd=ui(Ti,"Trident")||ui(Ti,"MSIE"),ts=ui(Ti,"Edge"),uv=ts||Qd,xw=ui(Ti,"Gecko")&&!(ui(Ti.toLowerCase(),"webkit")&&!ui(Ti,"Edge"))&&!(ui(Ti,"Trident")||ui(Ti,"MSIE"))&&!ui(Ti,"Edge"),DA=ui(Ti.toLowerCase(),"webkit")&&!ui(Ti,"Edge");function YC(){var n=xt.document;return n?n.documentMode:void 0}e:{var Ow="",cv=(n=Ti,xw?/rv:([^\);]+)(\)|;)/.exec(n):ts?/Edge\/([\d\.]+)/.exec(n):Qd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):DA?/WebKit\/(\S+)/.exec(n):KC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cv&&(Ow=cv?cv[1]:""),Qd){var Yf=YC();if(null!=Yf&&Yf>parseFloat(Ow)){Kf=String(Yf);break e}}Kf=Ow}var kw={};var Fw=xt.document&&Qd&&(YC()||parseInt(Kf,10))||void 0,QC=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",Yd,e),xt.removeEventListener("test",Yd,e)}catch(t){}return n}();function ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Jf(n,e){if(ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(xw){e:{try{lv(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:XC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Jf.Z.h.call(this)}}ci.prototype.h=function(){this.defaultPrevented=!0},li(Jf,ci);var XC={2:"touch",3:"pen",4:"mouse"};Jf.prototype.h=function(){Jf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xd="closure_listenable_"+(1e6*Math.random()|0),Lw=0;function eT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Lw,this.ca=this.fa=!1}function Ds(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function eh(n){this.src=n,this.g={},this.h=0}function hv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=cm(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Ds(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function fv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}eh.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var d=fv(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new eT(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Vw="closure_lm_"+(1e6*Math.random()|0),hm={};function Bw(n,e,t,r,i){if(r&&r.once)return fm(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Bw(n,e[a],t,r,i);return null}return t=ep(t),n&&n[Xd]?n.N(e,t,Ic(r)?!!r.capture:!!r,i):Uw(n,e,t,!1,r,i)}function Uw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var d=Ic(i)?!!i.capture:!!i,p=mv(n);if(p||(n[Vw]=p=new eh(n)),(t=p.add(e,t,r,d,a)).proxy)return t;if(r=function tT(){var e=gv;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QC||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Qf(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function fm(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)fm(n,e[a],t,r,i);return null}return t=ep(t),n&&n[Xd]?n.O(e,t,Ic(r)?!!r.capture:!!r,i):Uw(n,e,t,!0,r,i)}function jw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)jw(n,e[a],t,r,i);else r=Ic(r)?!!r.capture:!!r,t=ep(t),n&&n[Xd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=fv(a=n.g[e],t,r,i))&&(Ds(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=mv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=fv(e,t,r,i)),(t=-1<n?e[n]:null)&&pv(t))}function pv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Xd])hv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Qf(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mv(e))?(hv(t,n),0==t.h&&(t.src=null,e[Vw]=null)):Ds(n)}}}function Qf(n){return n in hm?hm[n]:hm[n]="on"+n}function gv(n,e){if(n.ca)n=!0;else{e=new Jf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&pv(n),n=t.call(r,e)}return n}function mv(n){return(n=n[Vw])instanceof eh?n:null}var Xf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ep(n){return"function"==typeof n?n:(n[Xf]||(n[Xf]=function(e){return n.handleEvent(e)}),n[Xf])}function Or(){$l.call(this),this.i=new eh(this),this.P=this,this.I=null}function di(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ci(e,n);else if(e instanceof ci)e.target=e.target||n;else{var i=e;av(e=new ci(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var d=e.g=t[a];i=pm(d,r,!0,e)&&i}if(i=pm(d=e.g=n,r,!0,e)&&i,i=pm(d,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=pm(d=e.g=t[a],r,!1,e)&&i}function pm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var d=e[a];if(d&&!d.ca&&d.capture==t){var p=d.listener,_=d.ia||d.src;d.fa&&hv(n.i,d),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}li(Or,$l),Or.prototype[Xd]=!0,Or.prototype.removeEventListener=function(n,e,t,r){jw(this,n,e,t,r)},Or.prototype.M=function(){if(Or.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ds(t[r]);delete n.g[e],n.h--}}this.I=null},Or.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var tp=xt.JSON.stringify;function CA(){var n=$w;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mm,_v=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Gw,n=>n.reset());class Gw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hw(n){xt.setTimeout(()=>{throw n},0)}function gm(n,e){mm||function Ha(){var n=xt.Promise.resolve(void 0);mm=function(){n.then(rT)}}(),th||(mm(),th=!0),$w.add(n,e)}var th=!1,$w=new class nT{constructor(){this.h=this.g=null}add(e,t){const r=_v.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function rT(){for(var n;n=CA();){try{n.h.call(n.g)}catch(t){Hw(t)}var e=_v;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}th=!1}function yv(n,e){Or.call(this),this.h=n||1,this.g=e||xt,this.j=ai(this.kb,this),this.l=Date.now()}function np(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _m(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function ym(n){n.g=_m(()=>{n.g=null,n.i&&(n.i=!1,ym(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}li(yv,Or),(nt=yv.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),di(this,"tick"),this.da&&(np(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){yv.Z.M.call(this),np(this),delete this.g};class rp extends $l{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ym(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ip(n){$l.call(this),this.h=n,this.g={}}li(ip,$l);var vm=[];function vv(n,e,t,r){Array.isArray(t)||(t&&(vm[0]=t.toString()),t=vm);for(var i=0;i<t.length;i++){var a=Bw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function bv(n){dm(n.g,function(e,t){this.g.hasOwnProperty(t)&&pv(e)},n),n.g={}}function sp(){this.g=!0}function nh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var d=1;d<i.length;d++)i[d]=""}}}return tp(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}ip.prototype.M=function(){ip.Z.M.call(this),bv(this)},ip.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sp.prototype.Aa=function(){this.g=!1},sp.prototype.info=function(){};var so={},Ev=null;function bm(){return Ev=Ev||new Or}function zw(n){ci.call(this,so.Ma,n)}function pa(n){const e=bm();di(e,new zw(e,n))}function Ww(n,e){ci.call(this,so.STAT_EVENT,n),this.stat=e}function Hi(n){const e=bm();di(e,new Ww(e,n))}function Zw(n,e){ci.call(this,so.Na,n),this.size=e}function op(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}so.Ma="serverreachability",li(zw,ci),so.STAT_EVENT="statevent",li(Ww,ci),so.Na="timingevent",li(Zw,ci);var ns={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},wm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Em(){}function Cv(){}Em.prototype.h=null;var Iv,rh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Tv(){ci.call(this,"d")}function Sv(){ci.call(this,"c")}function Dm(){}function ih(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ip(this),this.P=Kw,this.W=new yv(n=uv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new oT}function oT(){this.i=null,this.g="",this.h=!1}li(Tv,ci),li(Sv,ci),li(Dm,Em),Dm.prototype.g=function(){return new XMLHttpRequest},Dm.prototype.i=function(){return{}},Iv=new Dm;var Kw=45e3,Av={},Cm={};function Yw(n,e,t){n.K=1,n.v=Rc(qa(e)),n.s=t,n.U=!0,aT(n,null)}function aT(n,e){n.F=Date.now(),sh(n),n.A=qa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Oc(t.h,"t",r),n.C=0,t=n.l.H,n.h=new oT,n.g=zm(n.l,t?e:null,!n.s),0<n.O&&(n.L=new rp(ai(n.Ia,n,n.g),n.O)),vv(n.V,n.g,"readystatechange",n.gb),e=n.H?ZC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),pa(1),function iT(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var d="",p=a.split("&"),_=0;_<p.length;_++){var E=p[_].split("=");if(1<E.length){var S=E[0];E=E[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+E+"&":d+(S+"=redacted&")}}else d=null;else d=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Tm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Jw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Qw(n,t),i==Cm){4==e&&(n.o=4,Hi(14),r=!1),nh(n.j,n.m,null,"[Incomplete Response]");break}if(i==Av){n.o=4,Hi(15),nh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}nh(n.j,n.m,i,null),Im(n,i)}Tm(n)&&i!=Cm&&i!=Av&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Hi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Fv(e),e.L=!0,Hi(11))):(nh(n.j,n.m,t,"[Invalid Chunked Response]"),oh(n),Sm(n))}function Qw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Cm:(t=Number(e.substring(t,r)),isNaN(t)?Av:(r+=1)+t>e.length?Cm:(e=e.substr(r,t),n.C=r+t,e))}function sh(n){n.Y=Date.now()+n.P,lT(n,n.P)}function lT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=op(ai(n.eb,n),e)}function rs(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Sm(n){0==n.l.G||n.I||fE(n.l,n)}function oh(n){rs(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,np(n.W),bv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Im(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Pm(t.i,n)))if(t.I=n.N,!n.J&&Pm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=op(ai(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;pp(t),Hm(t)}Pv(t),Hi(18)}if(1>=Fc(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else Kl(t,11)}else if((n.J||t.g==n)&&pp(t),!zf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const S=E[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const N=E[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const O=E[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const $=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var a=r.i;!a.g&&(ui($,"spdy")||ui($,"quic")||ui($,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Fm(a,a.h),a.h=null))}if(r.D){const te=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.sa=te,jn(r.F,r.D,te))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=yT(r,r.H?r.la:null,r.W),d.J){Nv(r.i,d);var p=d,_=r.K;_&&p.setTimeout(_),p.B&&(rs(p),sh(p)),r.g=d}else dE(r);0<t.l.length&&fp(t)}else"stop"!=E[0]&&"close"!=E[0]||Kl(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Kl(t,7):Zl(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}pa(4)}catch(E){}}function Am(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(um(n)||"string"==typeof n)Ac(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(um(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Xw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(um(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function ah(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ah)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function eE(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ql(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)ql(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function ql(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=ih.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==Wl(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const S=Wl(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>S)&&(3!=S||uv||this.g&&(this.h.h||this.g.ga()||mT(this.g)))){this.I||4!=S||7==e||pa(8==e||0>=N?3:2),rs(this);var t=this.g.ba();this.N=t;t:if(Tm(this)){var r=mT(this.g);n="";var i=r.length,a=4==Wl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){oh(this),Sm(this);var d="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function wv(n,e,t,r,i,a,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+d})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zf(p)){var E=p;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Hi(12),oh(this),Sm(this);break e}nh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Im(this,t)}this.U?(Jw(this,S,d),uv&&this.i&&3==S&&(vv(this.V,this.W,"tick",this.fb),this.W.start())):(nh(this.j,this.m,d,null),Im(this,d)),4==S&&oh(this),this.i&&!this.I&&(4==S?fE(this.l,this):(this.i=!1,sh(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Hi(12)):(this.o=0,Hi(13)),oh(this),Sm(this)}}}catch(S){}},nt.fb=function(){if(this.g){var n=Wl(this.g),e=this.g.ga();this.C<e.length&&(rs(this),Jw(this,n,e),this.i&&4!=n&&sh(this))}},nt.cancel=function(){this.I=!0,oh(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function sT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pa(3),Hi(17)),oh(this),this.o=2,Sm(this)):lT(this,this.Y-n)},(nt=ah.prototype).R=function(){eE(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return eE(this),this.g.concat()},nt.get=function(n,e){return ql(this.h,n)?this.h[n]:e},nt.set=function(n,e){ql(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Nm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $a(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $a){this.g=void 0!==e?e:n.g,Rm(this,n.j),this.s=n.s,Mm(this,n.i),xm(this,n.m),this.l=n.l,e=n.h;var t=new zl;t.i=e.i,e.g&&(t.g=new ah(e.g),t.h=e.h),tE(this,t),this.o=n.o}else n&&(t=String(n).match(Nm))?(this.g=!!e,Rm(this,t[1]||"",!0),this.s=za(t[2]||""),Mm(this,t[3]||"",!0),xm(this,t[4]),this.l=za(t[5]||"",!0),tE(this,t[6]||"",!0),this.o=za(t[7]||"")):(this.g=!!e,this.h=new zl(null,this.g))}function qa(n){return new $a(n)}function Rm(n,e,t){n.j=t?za(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Mm(n,e,t){n.i=t?za(e,!0):e}function xm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function tE(n,e,t){e instanceof zl?(n.h=e,function uh(n,e){e&&!n.j&&(kr(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(km(this,r),Oc(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ap(e,Si)),n.h=new zl(e,n.g))}function jn(n,e,t){n.h.set(e,t)}function Rc(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function za(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ap(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,dT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function dT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$a.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ap(e,Om,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ap(e,Om,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ap(t,"/"==t.charAt(0)?lp:ga,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ap(t,Mc)),n.join("")};var Om=/[#\/\?@]/g,ga=/[#\?:]/g,lp=/[#\?]/g,Si=/[#\?@]/g,Mc=/#/g;function zl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function kr(n){n.g||(n.g=new ah,n.h=0,n.i&&function uT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function km(n,e){kr(n),e=Fo(n,e),ql(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ql((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&eE(n)))}function xc(n,e){return kr(n),e=Fo(n,e),ql(n.g.h,e)}function Oc(n,e,t){km(n,e),0<t.length&&(n.i=null,n.g.set(Fo(n,e),iv(t)),n.h+=t.length)}function Fo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function kc(n){this.l=n||dh,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=zl.prototype).add=function(n,e){kr(this),this.i=null,n=Fo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){kr(this),this.g.forEach(function(t,r){Ac(t,function(i){n.call(e,i,r,this)},this)},this)},nt.T=function(){kr(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},nt.R=function(n){kr(this);var e=[];if("string"==typeof n)xc(this,n)&&(e=Nc(e,this.g.get(Fo(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Nc(e,n[t])}return e},nt.set=function(n,e){return kr(this),this.i=null,xc(this,n=Fo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var d=i;""!==r[a]&&(d+="="+encodeURIComponent(String(r[a]))),n.push(d)}}return this.i=n.join("&")};var dh=10;function Pc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Fc(n){return n.h?1:n.g?n.g.size:0}function Pm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Fm(n,e){n.g?n.g.add(e):n.h=e}function Nv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Rv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return iv(n.i)}function Lm(){}function nE(){this.g=new Lm}function rE(n,e,t){const r=t||"";try{Am(n,function(i,a){let d=i;Ic(i)&&(d=tp(i)),e.push(r+a+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function up(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function cp(n){this.l=n.$b||null,this.j=n.ib||!1}function dp(n,e){Or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Mv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kc.prototype.cancel=function(){if(this.i=Rv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Lm.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},Lm.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},li(cp,Em),cp.prototype.g=function(){return new dp(this.l,this.j)},cp.prototype.i=function(n){return function(){return n}}({}),li(dp,Or);var Mv=0;function xv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function hh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hp(n)}function hp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=dp.prototype).open=function(n,e){if(this.readyState!=Mv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hp(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hh(this)),this.readyState=Mv},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hp(this)),this.g&&(this.readyState=3,hp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?hh(this):hp(this),3==this.readyState&&xv(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,hh(this))},nt.Ta=function(n){this.g&&(this.response=n,hh(this))},nt.ha=function(){this.g&&hh(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var hT=xt.JSON.parse;function lr(n){Or.call(this),this.headers=new ah,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sE,this.K=this.L=!1}li(lr,Or);var sE="",oE=/^https?$/i,fT=["POST","PUT"];function TA(n){return"content-type"==n.toLowerCase()}function aE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Vm(n),Um(n)}function Vm(n){n.D||(n.D=!0,di(n,"complete"),di(n,"error"))}function Bm(n){if(n.h&&void 0!==nv&&(!n.C[1]||4!=Wl(n)||2!=n.ba()))if(n.v&&4==Wl(n))_m(n.Fa,0,n);else if(di(n,"readystatechange"),4==Wl(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(Nm)[1]||null;if(!i&&xt.self&&xt.self.location){var a=xt.self.location.protocol;i=a.substr(0,a.length-1)}r=!oE.test(i?i.toLowerCase():"")}t=r}if(t)di(n,"complete"),di(n,"success");else{n.m=6;try{var d=2<Wl(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.ba()+"]",Vm(n)}}finally{Um(n)}}}function Um(n,e){if(n.g){gT(n);const t=n.g,r=n.C[0]?Yd:null;n.g=null,n.C=null,e||di(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function gT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function Wl(n){return n.g?n.g.readyState:0}function mT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function jm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function _T(n){let e="";return dm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function Gm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lE(n){this.za=0,this.l=[],this.h=new sp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Gm("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Gm("baseRetryDelayMs",5e3,n),this.$a=Gm("retryDelaySeedMs",1e4,n),this.Ya=Gm("forwardChannelMaxRetries",2,n),this.ra=Gm("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new kc(n&&n.concurrentRequestLimit),this.Ca=new nE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Zl(n){if(Ov(n),3==n.G){var e=n.V++,t=qa(n.F);jn(t,"SID",n.J),jn(t,"RID",e),jn(t,"TYPE","terminate"),fh(n,t),(e=new ih(n,n.h,e,void 0)).K=2,e.v=Rc(qa(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=zm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sh(e)}qm(n)}function Hm(n){n.g&&(Fv(n),n.g.cancel(),n.g=null)}function Ov(n){Hm(n),n.u&&(xt.clearTimeout(n.u),n.u=null),pp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function kv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&fp(n)}function fp(n){Pc(n.i)||n.m||(n.m=!0,gm(n.Ha,n),n.C=0)}function uE(n,e){var t;t=e?e.m:n.V++;const r=qa(n.F);jn(r,"SID",n.J),jn(r,"RID",t),jn(r,"AID",n.U),fh(n,r),n.o&&n.s&&jm(r,n.o,n.s),t=new ih(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=cE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Fm(n.i,t),Yw(t,r,e)}function fh(n,e){n.j&&Am({},function(t,r){jn(e,r,t)})}function cE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ai(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const d=["count="+t];-1==a?0<t?(a=i[0].h,d.push("ofs="+a)):a=0:d.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let E=i[_].h;const S=i[_].g;if(E-=a,0>E)a=Math.max(0,i[_].h-100),p=!1;else try{rE(S,d,"req"+E+"_")}catch(N){r&&r(S)}}if(p){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function dE(n){n.g||n.u||(n.Y=1,gm(n.Ga,n),n.A=0)}function Pv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=op(ai(n.Ga,n),Lv(n,n.A)),n.A++,0))}function Fv(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function hE(n){n.g=new ih(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=qa(n.oa);jn(e,"RID","rpc"),jn(e,"SID",n.J),jn(e,"CI",n.N?"0":"1"),jn(e,"AID",n.U),fh(n,e),jn(e,"TYPE","xmlhttp"),n.o&&n.s&&jm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Rc(qa(e)),t.s=null,t.U=!0,aT(t,n)}function pp(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function fE(n,e){var t=null;if(n.g==e){pp(n),Fv(n),n.g=null;var r=2}else{if(!Pm(n.i,e))return;t=e.D,Nv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;di(r=bm(),new Zw(r,t,e,i)),fp(n)}else dE(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function $m(n,e){return!(Fc(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=op(ai(n.Ha,n,e),Lv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Pv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Kl(n,5);break;case 4:Kl(n,10);break;case 3:Kl(n,6);break;default:Kl(n,2)}}function Lv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Kl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ai(n.jb,n);t||(t=new $a("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Rm(t,"https"),Rc(t)),function iE(n,e){const t=new sp;if(xt.Image){const r=new Image;r.onload=Hf(up,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Hf(up,t,r,"TestLoadImage: error",!1,e),r.onabort=Hf(up,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hf(up,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Hi(2);n.G=0,n.j&&n.j.va(e),qm(n),Ov(n)}function qm(n){n.G=0,n.I=-1,n.j&&((0!=Rv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,iv(n.l),n.l.length=0),n.j.ua())}function yT(n,e,t){let r=function lh(n){return n instanceof $a?qa(n):new $a(n,void 0)}(t);if(""!=r.i)e&&Mm(r,e+"."+r.i),xm(r,r.m);else{const i=xt.location;r=function cT(n,e,t,r){var i=new $a(null,void 0);return n&&Rm(i,n),e&&Mm(i,e),t&&xm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&dm(n.aa,function(i,a){jn(r,a,i)}),t=n.sa,(e=n.D)&&t&&jn(r,e,t),jn(r,"VER",n.ma),fh(n,r),r}function zm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&n.Ba&&!n.qa?new cp({ib:!0}):n.qa)).L=n.H,e}function pE(){}function Vv(){if(Qd&&!(10<=Number(Fw)))throw Error("Environmental error: no available transport.")}function hi(n,e){Or.call(this),this.g=new lE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!zf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yl(this)}function Bv(n){Tv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Wm(){Sv.call(this),this.status=1}function Yl(n){this.g=n}(nt=lr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Iv.g(),this.C=function Dv(n){return n.h||(n.h=n.i())}(this.u?this.u:Iv),this.g.onreadystatechange=ai(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void aE(this,a)}n=t||"";const i=new ah(this.headers);r&&Am(r,function(a,d){i.set(d,a)}),r=function qf(n){e:{var e=TA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=cm(fT,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,d){this.g.setRequestHeader(d,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gT(this),0<this.B&&((this.K=function pT(n){return Qd&&function JC(){return function Mw(n){var e=kw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=sv(String(Kf)).split("."),t=sv("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",a=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Wf(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Wf(0==i[2].length,0==a[2].length)||Wf(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.pa,this)):this.A=_m(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){aE(this,a)}},nt.pa=function(){void 0!==nv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,di(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,di(this,"complete"),di(this,"abort"),Um(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Um(this,!0)),lr.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?Bm(this):this.cb())},nt.cb=function(){Bm(this)},nt.ba=function(){try{return 2<Wl(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),hT(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=lE.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ih(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=ZC(a),av(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cE(this,i,e),jn(t=qa(this.F),"RID",n),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),fh(this,t),this.o&&a&&jm(t,this.o,a),Fm(this.i,i),this.Ra&&jn(t,"TYPE","init"),this.ja?(jn(t,"$req",e),jn(t,"SID","null"),i.$=!0,Yw(i,t,null)):Yw(i,t,e),this.G=2}}else 3==this.G&&(n?uE(this,n):0==this.l.length||Pc(this.i)||uE(this))},nt.Ga=function(){if(this.u=null,hE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=op(ai(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hi(10),Hm(this),hE(this))},nt.ab=function(){null!=this.v&&(this.v=null,Hm(this),Pv(this),Hi(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Hi(2)):(this.h.info("Failed to ping google.com"),Hi(1))},(nt=pE.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},Vv.prototype.g=function(n,e){return new hi(n,e)},li(hi,Or),hi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),gm(ai(n.hb,n,e))),Hi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=yT(n,null,n.W),fp(n)},hi.prototype.close=function(){Zl(this.g)},hi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,kv(this.g,e)}else this.v?((e={}).__data__=tp(n),kv(this.g,e)):kv(this.g,n)},hi.prototype.M=function(){this.g.j=null,delete this.j,Zl(this.g),delete this.g,hi.Z.M.call(this)},li(Bv,Tv),li(Wm,Sv),li(Yl,pE),Yl.prototype.xa=function(){di(this.g,"a")},Yl.prototype.wa=function(n){di(this.g,new Bv(n))},Yl.prototype.va=function(n){di(this.g,new Wm(n))},Yl.prototype.ua=function(){di(this.g,"b")},Vv.prototype.createWebChannel=Vv.prototype.g,hi.prototype.send=hi.prototype.u,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,wm.COMPLETE="complete",Cv.EventType=rh,rh.OPEN="a",rh.CLOSE="b",rh.ERROR="c",rh.MESSAGE="d",Or.prototype.listen=Or.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var vT=Ci.createWebChannelTransport=function(){return new Vv},Zm=Ci.getStatEventTarget=function(){return bm()},ph=Ci.ErrorCode=ns,Uv=Ci.EventType=wm,SA=Ci.Event=so,gE=Ci.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jv=Ci.FetchXmlHttpFactory=cp,gh=Ci.WebChannel=Cv,mE=Ci.XhrIo=lr;const Gv="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Lc="9.6.10";const Wa=new Sc.Yd("@firebase/firestore");function gp(){return Wa.logLevel}function Le(n,...e){if(Wa.logLevel<=Sc.in.DEBUG){const t=e.map(mp);Wa.debug(`Firestore (${Lc}): ${n}`,...t)}}function ur(n,...e){if(Wa.logLevel<=Sc.in.ERROR){const t=e.map(mp);Wa.error(`Firestore (${Lc}): ${n}`,...t)}}function mh(n,...e){if(Wa.logLevel<=Sc.in.WARN){const t=e.map(mp);Wa.warn(`Firestore (${Lc}): ${n}`,...t)}}function mp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${Lc}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function Mt(n,e){n||ot()}function Ze(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Rt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class bE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wE{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let d=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Fr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const E=d;e.enqueueRetryable((0,ye.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},_=E=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Fr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new Hv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new Pr(e)}}class EE{constructor(e,t,r){this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class DE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new EE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const d=a.token!==this.p;return this.p=a.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.p=t.token,new $v(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function CE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Cs.A=-1;class TE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=CE(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function yt(n,e){return n<e?-1:n>e?1:0}function Vc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function SE(n){return n+"\0"}class cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new cr(0,0))}static max(){return new Tt(new cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function IE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ma{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ma.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ma?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),d=t.get(i);if(a<d)return-1;if(a>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends ma{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const bT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends ma{construct(e,t,r){return new Lr(e,t,r)}static isValidIdentifier(e){return bT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(d=!d,i++):"."!==p||d?(r+=p,i++):(a(),i++)}if(a(),d)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(t)}static emptyPath(){return new Lr([])}}class _h{constructor(e){this.fields=e,e.sort(Lr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const zv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=zv.exec(n);if(Mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pn(n.seconds),nanos:pn(n.nanos)}}function pn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bc(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function Km(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lo(n){const e=n.mapValue.fields.__previous_value__;return Km(e)?Lo(e):e}function $i(n){const e=_a(n.mapValue.fields.__local_write_time__.timestampValue);return new cr(e.seconds,e.nanos)}class Vo{constructor(e,t,r,i,a,d,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class ya{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ya("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}function Ql(n){return null==n}function _p(n){return 0===n&&1/n==-1/0}function NE(n){return"number"==typeof n&&Number.isInteger(n)&&!_p(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He(rn.fromString(e))}static fromName(e){return new He(rn.fromString(e).popFirst(5))}static empty(){return new He(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new rn(e.slice()))}}const RE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ym={nullValue:"NULL_VALUE"};function Bo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Km(n)?4:Zv(n)?9:10:ot()}function va(n,e){if(n===e)return!0;const t=Bo(n);if(t!==Bo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $i(n).isEqual($i(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=_a(r.timestampValue),d=_a(i.timestampValue);return a.seconds===d.seconds&&a.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Bc(n.bytesValue).isEqual(Bc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return pn(r.geoPointValue.latitude)===pn(i.geoPointValue.latitude)&&pn(r.geoPointValue.longitude)===pn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return pn(r.integerValue)===pn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=pn(r.doubleValue),d=pn(i.doubleValue);return a===d?_p(a)===_p(d):isNaN(a)&&isNaN(d)}return!1}(n,e);case 9:return Vc(n.arrayValue.values||[],e.arrayValue.values||[],va);case 10:return function(r,i){const a=r.mapValue.fields||{},d=i.mapValue.fields||{};if(IE(a)!==IE(d))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===d[p]||!va(a[p],d[p])))return!1;return!0}(n,e);default:return ot()}var i}function yh(n,e){return void 0!==(n.values||[]).find(t=>va(t,e))}function Xl(n,e){if(n===e)return 0;const t=Bo(n),r=Bo(e);if(t!==r)return yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const d=pn(i.integerValue||i.doubleValue),p=pn(a.integerValue||a.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return Wv(n.timestampValue,e.timestampValue);case 4:return Wv($i(n),$i(e));case 5:return yt(n.stringValue,e.stringValue);case 6:return function(i,a){const d=Bc(i),p=Bc(a);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const d=i.split("/"),p=a.split("/");for(let _=0;_<d.length&&_<p.length;_++){const E=yt(d[_],p[_]);if(0!==E)return E}return yt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const d=yt(pn(i.latitude),pn(a.latitude));return 0!==d?d:yt(pn(i.longitude),pn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const d=i.values||[],p=a.values||[];for(let _=0;_<d.length&&_<p.length;++_){const E=Xl(d[_],p[_]);if(E)return E}return yt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const d=i.fields||{},p=Object.keys(d),_=a.fields||{},E=Object.keys(_);p.sort(),E.sort();for(let S=0;S<p.length&&S<E.length;++S){const N=yt(p[S],E[S]);if(0!==N)return N;const O=Xl(d[p[S]],_[E[S]]);if(0!==O)return O}return yt(p.length,E.length)}(n.mapValue,e.mapValue);default:throw ot()}}function Wv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return yt(n,e);const t=_a(n),r=_a(e),i=yt(t.seconds,r.seconds);return 0!==i?i:yt(t.nanos,r.nanos)}function Uc(n){return vh(n)}function vh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=_a(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bc(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const d of r.values||[])a?a=!1:i+=",",i+=vh(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",d=!0;for(const p of i)d?d=!1:a+=",",a+=`${p}:${vh(r.fields[p])}`;return a+"}"}(n.mapValue):ot();var e}function bh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jm(n){return!!n&&"integerValue"in n}function wh(n){return!!n&&"arrayValue"in n}function Qm(n){return!!n&&"nullValue"in n}function yp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vp(n){return!!n&&"mapValue"in n}function Eh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Eh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Zv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kv(n,e){return void 0===n?e:void 0===e||Xl(n,e)>0?n:e}function Yv(n,e){return void 0===n?e:void 0===e||Xl(n,e)<0?n:e}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eh(t)}setAll(e){let t=Lr.emptyPath(),r={},i=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}d?r[p.lastSegment()]=Eh(d):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());vp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new fi(Eh(this.value))}}function Jv(n){const e=[];return Jl(n.fields,(t,r)=>{const i=new Lr([t]);if(vp(r)){const a=Jv(r.mapValue).fields;if(0===a.length)e.push(i);else for(const d of a)e.push(i.child(d))}else e.push(i)}),new _h(e)}class Nn{constructor(e,t,r,i,a,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=d}static newInvalidDocument(e){return new Nn(e,0,Tt.min(),Tt.min(),fi.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,Tt.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Tt.min(),fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Qv(n){return n.fields.find(e=>2===e.kind)}function Dh(n){return n.fields.filter(e=>2!==e.kind)}Xm.UNKNOWN_ID=-1;class e_{constructor(e,t){this.fieldPath=e,this.kind=t}}class bp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bp(0,Za.min())}}function ME(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new cr(t+1,0):new cr(t,r));return new Za(i,He.empty(),e)}function wT(n){return new Za(n.readTime,n.key,-1)}class Za{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Za(Tt.min(),He.empty(),-1)}static max(){return new Za(Tt.max(),He.empty(),-1)}}function ET(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:yt(n.largestBatchId,e.largestBatchId))}class DT{constructor(e,t=null,r=[],i=[],a=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=d,this.endAt=p,this.P=null}}function xE(n,e=null,t=[],r=[],i=null,a=null,d=null){return new DT(n,e,t,r,i,a,d)}function jc(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Uc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ql(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uc(r)).join(",")),e.P=t}return e.P}function wp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!e0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!va(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eu(n.startAt,e.startAt)&&eu(n.endAt,e.endAt)}function t_(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function n_(n,e){return n.filters.filter(t=>t instanceof pi&&t.field.isEqual(e))}class pi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new TT(e,t,r):"array-contains"===t?new PE(e,r):"in"===t?new FE(e,r):"not-in"===t?new LE(e,r):"array-contains-any"===t?new VE(e,r):new pi(e,t,r)}static V(e,t,r){return"in"===t?new OE(e,r):new kE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Xl(t,this.value)):null!==t&&Bo(this.value)===Bo(t)&&this.v(Xl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class TT extends pi{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class OE extends pi{constructor(e,t){super(e,"in",t),this.keys=Xv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kE extends pi{constructor(e,t){super(e,"not-in",t),this.keys=Xv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class PE extends pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wh(t)&&yh(t.arrayValue,this.value)}}class FE extends pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yh(this.value.arrayValue,t)}}class LE extends pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yh(this.value.arrayValue,t)}}class VE extends pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yh(this.value.arrayValue,r))}}class Ka{constructor(e,t){this.position=e,this.inclusive=t}}class Gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function e0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function t0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],d=n.position[i];if(r=a.field.isKeyField()?He.comparator(He.fromName(d.referenceValue),t.key):Xl(d,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function eu(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!va(n.position[t],e.position[t]))return!1;return!0}class Ya{constructor(e,t=null,r=[],i=[],a=null,d="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=d,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function BE(n,e,t,r,i,a,d,p){return new Ya(n,e,t,r,i,a,d,p)}function Uo(n){return new Ya(n)}function n0(n){return!Ql(n.limit)&&"F"===n.limitType}function Ch(n){return!Ql(n.limit)&&"L"===n.limitType}function UE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function r_(n){for(const e of n.filters)if(e.S())return e.field;return null}function i_(n){return null!==n.collectionGroup}function Ep(n){const e=Ze(n);if(null===e.D){e.D=[];const t=r_(e),r=UE(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Gc(t)),e.D.push(new Gc(Lr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Gc(Lr.keyField(),a))}}}return e.D}function lt(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=xE(e.path,e.collectionGroup,Ep(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Ep(e))t.push(new Gc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ka(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Ka(e.startAt.position,!e.startAt.inclusive):null;e.C=xE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function jE(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dp(n,e){return wp(lt(n),lt(e))&&n.limitType===e.limitType}function GE(n){return`${jc(lt(n))}|lt:${n.limitType}`}function Th(n){return`Query(target=${function CT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Uc(r.value)}`;var r}).join(", ")}]`),Ql(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Uc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Uc(t)).join(",")),`Target(${e})`}(lt(n))}; limitType=${n.limitType})`}function r0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):He.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,d){const p=t0(i,a,d);return i.inclusive?p<=0:p<0}(t.startAt,Ep(t),r)||t.endAt&&!function(i,a,d){const p=t0(i,a,d);return i.inclusive?p>=0:p>0}(t.endAt,Ep(t),r)));var t,r}function Cp(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Tp(n){return(e,t)=>{let r=!1;for(const i of Ep(n)){const a=er(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function er(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(i,a,d){const p=a.data.field(i),_=d.data.field(i);return null!==p&&null!==_?Xl(p,_):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function ST(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_p(e)?"-0":e}}function s0(n){return{integerValue:""+n}}function HE(n,e){return NE(e)?s0(e):ST(n,e)}class s_{constructor(){this._=void 0}}function $E(n,e,t){return n instanceof Hc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof $c?zE(n,e):n instanceof qc?Sh(n,e):function(r,i){const a=o0(r,i),d=WE(a)+WE(r.k);return Jm(a)&&Jm(r.k)?s0(d):ST(r.M,d)}(n,e)}function qE(n,e,t){return n instanceof $c?zE(n,e):n instanceof qc?Sh(n,e):t}function o0(n,e){return n instanceof Ih?Jm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hc extends s_{}class $c extends s_{constructor(e){super(),this.elements=e}}function zE(n,e){const t=ZE(e);for(const r of n.elements)t.some(i=>va(i,r))||t.push(r);return{arrayValue:{values:t}}}class qc extends s_{constructor(e){super(),this.elements=e}}function Sh(n,e){let t=ZE(e);for(const r of n.elements)t=t.filter(i=>!va(i,r));return{arrayValue:{values:t}}}class Ih extends s_{constructor(e,t){super(),this.M=e,this.k=t}}function WE(n){return pn(n.integerValue||n.doubleValue)}function ZE(n){return wh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class tu{constructor(e,t){this.field=e,this.transform=t}}class YE{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function o_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nu{}function Sp(n,e,t){n instanceof Ah?function(r,i,a){const d=r.value.clone(),p=u0(r.fieldTransforms,i,a.transformResults);d.setAll(p),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ru?function(r,i,a){if(!o_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const d=u0(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(QE(r)),p.setAll(d),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function a0(n,e,t){var i;n instanceof Ah?function(r,i,a){if(!o_(r.precondition,i))return;const d=r.value.clone(),p=XE(r.fieldTransforms,a,i);d.setAll(p),i.convertToFoundDocument(l0(i),d).setHasLocalMutations()}(n,e,t):n instanceof ru?function(r,i,a){if(!o_(r.precondition,i))return;const d=XE(r.fieldTransforms,a,i),p=i.data;p.setAll(QE(r)),p.setAll(d),i.convertToFoundDocument(l0(i),p).setHasLocalMutations()}(n,e,t):o_(n.precondition,i=e)&&i.convertToNoDocument(Tt.min())}function IT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=o0(r.transform,i||null);null!=a&&(null==t&&(t=fi.empty()),t.set(r.field,a))}return t||null}function JE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Vc(t,r,(i,a)=>function KE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $c&&r instanceof $c||t instanceof qc&&r instanceof qc?Vc(t.elements,r.elements,va):t instanceof Ih&&r instanceof Ih?va(t.k,r.k):t instanceof Hc&&r instanceof Hc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function l0(n){return n.isFoundDocument()?n.version:Tt.min()}class Ah extends nu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class ru extends nu{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function QE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function u0(n,e,t){const r=new Map;Mt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],d=a.transform,p=e.data.field(a.field);r.set(a.field,qE(d,p,t[i]))}return r}function XE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,d=t.data.field(i.field);r.set(i.field,$E(a,d,e))}return r}class Ip extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class e1 extends nu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class NA{constructor(e){this.count=e}}var Vr,on;function c0(n){switch(n){default:return ot();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Ap(n){if(void 0===n)return ur("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Vr.OK:return ue.OK;case Vr.CANCELLED:return ue.CANCELLED;case Vr.UNKNOWN:return ue.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return ue.INTERNAL;case Vr.UNAVAILABLE:return ue.UNAVAILABLE;case Vr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Vr.NOT_FOUND:return ue.NOT_FOUND;case Vr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Vr.ABORTED:return ue.ABORTED;case Vr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Vr.DATA_LOSS:return ue.DATA_LOSS;default:return ot()}}(on=Vr||(Vr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return qv(this.inner)}size(){return this.innerSize}}class hr{constructor(e,t){this.comparator=e,this.root=t||fr.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fr.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Np(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Np(this.root,e,this.comparator,!1)}getReverseIterator(){return new Np(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Np(this.root,e,this.comparator,!0)}}class Np{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:fr.RED,this.left=null!=i?i:fr.EMPTY,this.right=null!=a?a:fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new fr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}fr.EMPTY=null,fr.RED=!0,fr.BLACK=!1,fr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,i){return this}insert(n,e,t){return new fr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new t1(this.data.getIterator())}getIteratorFrom(e){return new t1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class t1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nh(n){return n.hasNext()?n.getNext():void 0}const AT=new hr(He.comparator);function oo(){return AT}const n1=new hr(He.comparator);function d0(){return n1}function Rp(){return new iu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Rh=new hr(He.comparator),NT=new Pn(He.comparator);function gn(...n){let e=NT;for(const t of n)e=e.add(t);return e}const RT=new Pn(yt);function Mp(){return RT}class xp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,t)),new xp(Tt.min(),r,Mp(),oo(),gn())}}class Mh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Mh(Wr.EMPTY_BYTE_STRING,t,gn(),gn(),gn())}}class a_{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class l_{constructor(e,t){this.targetId=e,this.$=t}}class r1{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class h0{constructor(){this.B=0,this.L=o1(),this.U=Wr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=gn(),t=gn(),r=gn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ot()}}),new Mh(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=o1()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class i1{constructor(e){this.nt=e,this.st=new Map,this.it=oo(),this.rt=s1(),this.ot=new Pn(yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(t_(a))if(0===r){const d=new He(a.path);this.ct(t,d,Nn.newNoDocument(d,Tt.min()))}else Mt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,d)=>{const p=this.wt(d);if(p){if(a.current&&t_(p.target)){const _=new He(p.target.path);null!==this.it.get(_)||this.It(d,_)||this.ct(d,_,Nn.newNoDocument(_,e))}a.j&&(t.set(d,a.H()),a.J())}});let r=gn();this.rt.forEach((a,d)=>{let p=!0;d.forEachWhile(_=>{const E=this.wt(_);return!E||2===E.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.it.forEach((a,d)=>d.setReadTime(e));const i=new xp(e,t,this.ot,this.it,r);return this.it=oo(),this.rt=s1(),this.ot=new Pn(yt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new h0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Pn(yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new h0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function s1(){return new hr(He.comparator)}function o1(){return new hr(He.comparator)}const MT={asc:"ASCENDING",desc:"DESCENDING"},f0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class xT{constructor(e,t){this.databaseId=e,this.N=t}}function xh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a1(n,e){return n.N?e.toBase64():e.toUint8Array()}function OT(n,e){return xh(n,e.toTimestamp())}function Zr(n){return Mt(!!n),Tt.fromTimestamp(function(e){const t=_a(e);return new cr(t.seconds,t.nanos)}(n))}function p0(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function l1(n){const e=rn.fromString(n);return Mt(p1(e)),e}function Op(n,e){return p0(n.databaseId,e.path)}function ba(n,e){const t=l1(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(_0(t))}function g0(n,e){return p0(n.databaseId,e)}function m0(n){const e=l1(n);return 4===e.length?rn.emptyPath():_0(e)}function Oh(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _0(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function u1(n,e,t){return{name:Op(n,e),fields:t.value.mapValue.fields}}function u_(n,e,t){const r=ba(n,e.name),i=Zr(e.updateTime),a=new fi({mapValue:{fields:e.fields}}),d=Nn.newFoundDocument(r,i,a);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function kp(n,e){let t;if(e instanceof Ah)t={update:u1(n,e.key,e.value)};else if(e instanceof Ip)t={delete:Op(n,e.key)};else if(e instanceof ru)t={update:u1(n,e.key,e.data),updateMask:RA(e.fieldMask)};else{if(!(e instanceof e1))return ot();t={verify:Op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const d=a.transform;if(d instanceof Hc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $c)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof qc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ih)return{fieldPath:a.field.canonicalString(),increment:d.k};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:OT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ot()),t;var i}function Pp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?dr.updateTime(Zr(i.updateTime)):void 0!==i.exists?dr.exists(i.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,d){let p=null;"setToServerValue"in d?(Mt("REQUEST_TIME"===d.setToServerValue),p=new Hc):"appendMissingElements"in d?p=new $c(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new qc(d.removeAllFromArray.values||[]):"increment"in d?p=new Ih(a,d.increment):ot();const _=Lr.fromServerFormat(d.fieldPath);return new tu(_,p)}(n,i)):[];var i;if(e.update){const i=ba(n,e.update.name),a=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new _h((e.updateMask.fieldPaths||[]).map(E=>Lr.fromServerFormat(E)));return new ru(i,a,d,t,r)}return new Ah(i,a,t,r)}if(e.delete){const i=ba(n,e.delete);return new Ip(i,t)}if(e.verify){const i=ba(n,e.verify);return new e1(i,t)}return ot()}function v0(n,e){return{documents:[g0(n,e.path)]}}function c_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=g0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=g0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const E=_.map(S=>function(N){if("=="===N.op){if(yp(N.value))return{unaryFilter:{field:kh(N.field),op:"IS_NAN"}};if(Qm(N.value))return{unaryFilter:{field:kh(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(yp(N.value))return{unaryFilter:{field:kh(N.field),op:"IS_NOT_NAN"}};if(Qm(N.value))return{unaryFilter:{field:kh(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kh(N.field),op:h1(N.op),value:N.value}}}(S));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(E=>{return{field:kh((S=E).field),direction:FT(S.dir)};var S})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const d=(E=e.limit,n.N||Ql(E)?E:{value:E});var E,p,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function d1(n){let e=m0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let a=[];t.where&&(a=d_(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new Gc(zc((N=S).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let p=null;t.limit&&(p=function(S){let N;return N="object"==typeof S?S.value:S,Ql(N)?null:N}(t.limit));let _=null;var S;t.startAt&&(_=new Ka((S=t.startAt).values||[],!!S.before));let E=null;return t.endAt&&(E=function(S){return new Ka(S.values||[],!S.before)}(t.endAt)),BE(e,i,d,a,p,"F",_,E)}function d_(n){return n?void 0!==n.unaryFilter?[f1(n)]:void 0!==n.fieldFilter?[LT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>d_(e)).reduce((e,t)=>e.concat(t)):ot():[]}function FT(n){return MT[n]}function h1(n){return f0[n]}function kh(n){return{fieldPath:n.canonicalString()}}function zc(n){return Lr.fromServerFormat(n.fieldPath)}function LT(n){return pi.create(zc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function f1(n){switch(n.unaryFilter.op){case"IS_NAN":const e=zc(n.unaryFilter.field);return pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=zc(n.unaryFilter.field);return pi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zc(n.unaryFilter.field);return pi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zc(n.unaryFilter.field);return pi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function RA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function p1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function pr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wc(e)),e=VT(n.get(t),e);return Wc(e)}function VT(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Wc(n){return n+"\x01\x01"}function qi(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const d=n.indexOf("\x01",a);switch((d<0||d>t)&&ot(),n.charAt(d+1)){case"\x01":const p=n.substring(a,d);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,d),i+="\0";break;case"\x11":i+=n.substring(a,d+1);break;default:ot()}a=d+2}return new rn(r)}const g1=["userId","batchId"];function b0(n,e){return[n,pr(e)]}function w0(n,e,t){return[n,pr(e),t]}const BT={},UT=["prefixPath","collectionGroup","readTime","documentId"],jT=["prefixPath","collectionGroup","documentId"],GT=["collectionGroup","readTime","prefixPath","documentId"],m1=["canonicalId","targetId"],_1=["targetId","path"],E0=["path","targetId"],h_=["collectionId","parent"],Fp=["indexId","uid"],HT=["uid","sequenceNumber"],y1=["indexId","uid","arrayValue","directionalValue","documentKey"],v1=["indexId","uid","documentKey"],$T=["userId","collectionPath","documentId"],qT=["userId","collectionPath","largestBatchId"],D0=["userId","collectionGroup","largestBatchId"],b1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MA=[...b1,"documentOverlays"],w1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zT=[...w1,"indexConfiguration","indexState","indexEntries"],Zc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,a=0,d=!1;e.forEach(p=>{++i,p.next(()=>{++a,d&&a===i&&t()},_=>r(_))}),d=!0,a===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class T0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Fr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new f_(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=g_(r.target.error);this.At.reject(new f_(e,i))}}static open(e,t,r,i){try{return new T0(t,e.transaction(i,r))}catch(a){throw new f_(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xA(t)}}class ao{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===ao.Vt((0,Rt.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),ou(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Rt.hl)())return!1;if(ao.St())return!0;const e=(0,Rt.z$)(),t=ao.Vt(e),r=0<t&&t<10,i=ao.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=d=>{r(d.target.result)},a.onblocked=()=>{i(new f_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=d=>{const p=d.target.error;i("VersionError"===p.name?new Re(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Re(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new f_(e,p))},a.onupgradeneeded=d=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,a.transaction,d.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Nt(e);const _=T0.open(a.db,e,d?"readonly":"readwrite",r),E=i(_).next(S=>(_.bt(),S)).catch(S=>(_.abort(S),ce.reject(S))).toPromise();return E.catch(()=>{}),yield _.Rt,E}catch(_){const E="FirebaseError"!==_.name&&p<3;if(Le("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),a.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class WT{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ou(this.Ft.delete())}}class f_ extends Re{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function su(n){return"IndexedDbTransactionError"===n.name}class xA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ou(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),ou(this.store.add(e))}get(e){return ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),ou(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),ou(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(d,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ce((a,d)=>{i.onerror=p=>{d(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,a)=>{r.onerror=d=>{a(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,d,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=a=>{const d=g_(a.target.error);i(d)},t.onsuccess=a=>{const d=a.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}Gt(e,t){const r=[];return new ce((i,a)=>{e.onerror=d=>{a(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void i();const _=new WT(p),E=t(p.primaryKey,p.value,_);if(E instanceof ce){const S=E.catch(N=>(_.done(),ce.reject(N)));r.push(S)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ou(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=g_(r.target.error);t(i)}})}let p_=!1;function g_(n){const e=ao.Vt((0,Rt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p_||(p_=!0,setTimeout(()=>{throw r},0)),r}}return n}class S0 extends C0{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Br(n,e){const t=Ze(n);return ao.xt(t.Ht,e)}class m_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Sp(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&a0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&a0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gn())}isEqual(e){return this.batchId===e.batchId&&Vc(this.mutations,e.mutations,(t,r)=>JE(t,r))&&Vc(this.baseMutations,e.baseMutations,(t,r)=>JE(t,r))}}class I0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mt(e.mutations.length===r.length);let i=Rh;const a=e.mutations;for(let d=0;d<a.length;d++)i=i.insert(a[d].key,r[d].version);return new I0(e,t,r,i)}}class A0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class au{constructor(e,t,r,i,a=Tt.min(),d=Tt.min(),p=Wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class E1{constructor(e){this.Jt=e}}function D1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Op(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:xh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:uu(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:uu(e.version)}}var i,a;return r}function lu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function uu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cu(n){const e=new cr(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Kc(n,e){const t=(e.baseMutations||[]).map(a=>Pp(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const d=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(d.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Pp(n.Jt,a)),i=cr.fromMillis(e.localWriteTimeMs);return new m_(e.batchId,i,t,r)}function Ph(n){const e=cu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cu(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(Mt(1===(i=n.query).documents.length),r=lt(Uo(m0(i.documents[0])))):r=lt(d1(n.query)),new au(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function N0(n,e){const t=uu(e.snapshotVersion),r=uu(e.lastLimboFreeSnapshotVersion);let i;i=t_(e.target)?v0(n.Jt,e.target):c_(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function __(n){const e=d1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jE(e,e.limit,"L"):e}function R0(n,e){return new A0(e.largestBatchId,Pp(n.Jt,e.overlayMutation))}function M0(n,e){const t=e.path.lastSegment();return[n,pr(e.path.popLast()),t]}class KT{getBundleMetadata(e,t){return x0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return x0(e).put({bundleId:(r=t).id,createTime:uu(Zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return C1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:__(i.bundledQuery),readTime:cu(i.readTime)};var i})}saveNamedQuery(e,t){return C1(e).put({name:(r=t).name,readTime:uu(Zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function x0(n){return Br(n,"bundles")}function C1(n){return Br(n,"namedQueries")}class O0{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new O0(e,t.uid||"")}getOverlay(e,t){return Ja(e).get(M0(this.userId,t)).next(r=>r?R0(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,d)=>{const p=new A0(t,d);i.push(this.Xt(e,p))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(pr(d.getCollectionPath())));const a=[];return i.forEach(d=>{const p=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);a.push(Ja(e).Qt("collectionPathOverlayIndex",p))}),ce.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Rp(),a=pr(t),d=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ja(e).qt("collectionPathOverlayIndex",d).next(p=>{for(const _ of p){const E=R0(this.M,_);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Rp();let d;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ja(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,E,S)=>{const N=R0(this.M,E);a.size()<i||N.largestBatchId===d?(a.set(N.getKey(),N),d=N.largestBatchId):S.done()}).next(()=>a)}Xt(e,t){return Ja(e).put(function(r,i,a){const[d,p,_]=M0(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:kp(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Ja(n){return Br(n,"documentOverlays")}class Fh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(pn(e.integerValue));else if("doubleValue"in e){const r=pn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),_p(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Bc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Zv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ot()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function k0(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function jo(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=k0(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Fh.fe=new Fh;class YT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=jo(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=jo(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class P0{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Lp{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class y_{constructor(){this.De=new YT,this.Ce=new P0(this.De),this.xe=new Lp(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class du{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new du(this.indexId,this.documentKey,this.arrayValue,r)}}function Yc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Vp(n.arrayValue,e.arrayValue),0!==t?t:(t=Vp(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function Vp(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class v_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Qv(e);if(void 0!==t&&!this.Be(t))return!1;const r=Dh(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[a++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class JT{constructor(){this.qe=new F0}addToCollectionParentIndex(e,t){return this.qe.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getFieldIndex(e,t){return ce.resolve(null)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class F0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(rn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(rn.comparator)).toArray()}}const Bp=new Uint8Array(0);class T1{constructor(e){this.user=e,this.Ge=new F0,this.Ke=new iu(t=>jc(t),(t,r)=>wp(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:pr(i)};return b_(e).put(a)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[SE(t),""],!1,!0);return b_(e).qt(i).next(a=>{for(const d of a){if(d.collectionId!==t)break;r.push(qi(d.parent))}return r})}addFieldIndex(e,t){const r=w_(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=w_(e),i=E_(e),a=Lh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Lh(e);let i=!0;const a=new Map;return ce.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(p=>{i&&(i=!!p),a.set(d,p)})).next(()=>{if(i){let d=gn();return ce.forEach(a,(p,_)=>{var E;Le("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Ae=>`${Ae.fieldPath}:${Ae.kind}`).join(",")}`} to execute ${jc(t)}`);const S=function(Ae,Je){const Me=Qv(Je);if(void 0===Me)return null;for(const ze of n_(Ae,Me.fieldPath))switch(ze.op){case"array-contains-any":return ze.value.arrayValue.values||[];case"array-contains":return[ze.value]}return null}(_,p),N=function(Ae,Je){const Me=new Map;for(const ze of Dh(Je))for(const We of n_(Ae,ze.fieldPath))switch(We.op){case"==":case"in":Me.set(ze.fieldPath.canonicalString(),We.value);break;case"not-in":case"!=":return Me.set(ze.fieldPath.canonicalString(),We.value),Array.from(Me.values())}return null}(_,p),O=function(Ae,Je){const Me=[];let ze=!0;for(const Bt of Dh(Je)){let At,Tn=!0;for(const Xt of n_(Ae,Bt.fieldPath)){let Pt,Ri=!0;switch(Xt.op){case"<":case"<=":Pt="nullValue"in(We=Xt.value)?Ym:"booleanValue"in We?{booleanValue:!1}:"integerValue"in We||"doubleValue"in We?{doubleValue:NaN}:"timestampValue"in We?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in We?{stringValue:""}:"bytesValue"in We?{bytesValue:""}:"referenceValue"in We?bh(ya.empty(),He.empty()):"geoPointValue"in We?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in We?{arrayValue:{}}:"mapValue"in We?{mapValue:{}}:ot();break;case"==":case"in":case">=":Pt=Xt.value;break;case">":Pt=Xt.value,Ri=!1;break;case"!=":case"not-in":Pt=Ym}Kv(At,Pt)===Pt&&(At=Pt,Tn=Ri)}if(null!==Ae.startAt)for(let Xt=0;Xt<Ae.orderBy.length;++Xt)if(Ae.orderBy[Xt].field.isEqual(Bt.fieldPath)){const Pt=Ae.startAt.position[Xt];Kv(At,Pt)===Pt&&(At=Pt,Tn=Ae.startAt.inclusive);break}if(void 0===At)return null;Me.push(At),ze&&(ze=Tn)}var We;return new Ka(Me,ze)}(_,p),L=function(Ae,Je){const Me=[];let ze=!0;for(const Bt of Dh(Je)){let At,Tn=!0;for(const Xt of n_(Ae,Bt.fieldPath)){let Pt,Ri=!0;switch(Xt.op){case">=":case">":Pt="nullValue"in(We=Xt.value)?{booleanValue:!1}:"booleanValue"in We?{doubleValue:NaN}:"integerValue"in We||"doubleValue"in We?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in We?{stringValue:""}:"stringValue"in We?{bytesValue:""}:"bytesValue"in We?bh(ya.empty(),He.empty()):"referenceValue"in We?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in We?{arrayValue:{}}:"arrayValue"in We?{mapValue:{}}:"mapValue"in We?RE:ot(),Ri=!1;break;case"==":case"in":case"<=":Pt=Xt.value;break;case"<":Pt=Xt.value,Ri=!1;break;case"!=":case"not-in":Pt=RE}Yv(At,Pt)===Pt&&(At=Pt,Tn=Ri)}if(null!==Ae.endAt)for(let Xt=0;Xt<Ae.orderBy.length;++Xt)if(Ae.orderBy[Xt].field.isEqual(Bt.fieldPath)){const Pt=Ae.endAt.position[Xt];Yv(At,Pt)===Pt&&(At=Pt,Tn=Ae.endAt.inclusive);break}if(void 0===At)return null;Me.push(At),ze&&(ze=Tn)}var We;return new Ka(Me,ze)}(_,p),$=this.je(p,_,O),te=this.je(p,_,L),ve=this.We(p,_,N),Fe=this.ze(p.indexId,S,$,!!O&&O.inclusive,te,!!L&&L.inclusive,ve);return ce.forEach(Fe,Ae=>r.Kt(Ae,t.limit).next(Je=>{Je.forEach(Me=>{d=d.add(new He(qi(Me.documentKey)))})}))}).next(()=>d)}return ce.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,d,p){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),E=_/(null!=t?t.length:1),S=[];for(let N=0;N<_;++N){const O=t?this.He(t[N/E]):Bp,L=r?this.Je(e,O,r[N%E],i):this.Ye(e),$=a?this.Xe(e,O,a[N%E],d):this.Ye(e+1);S.push(...this.createRange(L,$,p.map(te=>this.Je(e,O,te,!0))))}return S}Je(e,t,r,i){const a=new du(e,He.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new du(e,He.empty(),t,r);return i?a.ke():a}Ye(e){return new du(e,He.empty(),Bp,Bp)}getFieldIndex(e,t){const r=new v_(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const d=a.filter(p=>r.$e(p));return d.sort((p,_)=>_.fields.length-p.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new y_;for(const i of Dh(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const d=r.Ne(i.kind);Fh.fe.Zt(a,d)}return r.Se()}He(e){const t=new y_;return Fh.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new y_);let a=0;for(const d of Dh(e)){const p=r[a++];for(const _ of i)if(this.tn(t,d.fieldPath)&&wh(p))i=this.en(i,d,p);else{const E=_.Ne(d.kind);Fh.fe.Zt(p,E)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const d of r.arrayValue.values||[])for(const p of i){const _=new y_;_.seed(p.Se()),Fh.fe.Zt(d,_.Ne(t.kind)),a.push(_)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof pi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=w_(e),i=E_(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const d=[];return ce.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{d.push(function(E,S){const N=S?new bp(S.sequenceNumber,new Za(cu(S.readTime),new He(qi(S.documentKey)),S.largestBatchId)):bp.empty(),O=E.fields.map(([L,$])=>new e_(Lr.fromServerFormat(L),$));return new Xm(E.indexId,E.collectionGroup,O,N)}(p,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=w_(e),a=E_(e);return this.sn(e).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ce.forEach(p,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:uu((O=r).readTime),documentKey:pr(O.documentKey.path),largestBatchId:O.largestBatchId});var O})))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,a)=>{const d=r.get(i.collectionGroup);return(d?ce.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ce.forEach(p,_=>this.rn(e,i,_).next(E=>{const S=this.on(a,_);return E.isEqual(S)?ce.resolve():this.un(e,a,E,S)}))))})}an(e,t,r){return Lh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:pr(t.key.path)})}cn(e,t,r){return Lh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,pr(t.key.path)])}rn(e,t,r){const i=Lh(e);let a=new Pn(Yc);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,pr(t.path)])},(d,p)=>{a=a.add(new du(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}on(e,t){let r=new Pn(Yc);const i=this.Ze(t,e);if(null==i)return r;const a=Qv(t);if(null!=a){const d=e.data.field(a.fieldPath);if(wh(d))for(const p of d.arrayValue.values||[])r=r.add(new du(t.indexId,e.key,this.He(p),i))}else r=r.add(new du(t.indexId,e.key,Bp,i));return r}un(e,t,r,i){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(d,p,_,E,S){const N=d.getIterator(),O=p.getIterator();let L=Nh(N),$=Nh(O);for(;L||$;){let te=!1,ve=!1;if(L&&$){const Fe=_(L,$);Fe<0?ve=!0:Fe>0&&(te=!0)}else null!=L?ve=!0:te=!0;te?(E($),$=Nh(O)):ve?(S(L),L=Nh(N)):(L=Nh(N),$=Nh(O))}}(r,i,Yc,d=>{a.push(this.an(e,t,d))},d=>{a.push(this.cn(e,t,d))}),ce.waitFor(a)}sn(e){let t=1;return E_(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,p)=>Yc(d,p)).filter((d,p,_)=>!p||0!==Yc(d,_[p-1]));const i=[];i.push(e);for(const d of r){const p=Yc(d,e),_=Yc(d,t);if(0===p)i[0]=e.ke();else if(p>0&&_<0)i.push(d),i.push(d.ke());else if(_>0)break}i.push(t);const a=[];for(let d=0;d<i.length;d+=2)a.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,""],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,""]));return a}}function b_(n){return Br(n,"collectionParents")}function Lh(n){return Br(n,"indexEntries")}function w_(n){return Br(n,"indexConfiguration")}function E_(n){return Br(n,"indexState")}const QT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ii{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ii(e,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function D_(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],d=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:d},(S,N,O)=>(p++,O.delete()));a.push(_.next(()=>{Mt(1===p)}));const E=[];for(const S of t.mutations){const N=w0(e,S.key.path,t.batchId);a.push(i.delete(N)),E.push(S.key)}return ce.waitFor(a).next(()=>E)}function Up(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(41943040,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class jp{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Mt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new jp(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).Wt({index:"userMutationsIndex",range:r},(i,a,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Vh(e),d=hu(e);return d.add({}).next(p=>{Mt("number"==typeof p);const _=new m_(p,t,r,i),E=function(O,L,$){const te=$.baseMutations.map(Fe=>kp(O.Jt,Fe)),ve=$.mutations.map(Fe=>kp(O.Jt,Fe));return{userId:L,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:te,mutations:ve}}(this.M,this.userId,_),S=[];let N=new Pn((O,L)=>yt(O.canonicalString(),L.canonicalString()));for(const O of i){const L=w0(this.userId,O.key.path,p);N=N.add(O.key.path.popLast()),S.push(d.put(E)),S.push(a.put(L,BT))}return N.forEach(O=>{S.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.hn[p]=_.keys()}),ce.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return hu(e).get(t).next(r=>r?(Mt(r.userId===this.userId),Kc(this.M,r)):null)}ln(e,t){return this.hn[t]?ce.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return hu(e).Wt({index:"userMutationsIndex",range:i},(d,p,_)=>{p.userId===this.userId&&(Mt(p.batchId>=r),a=Kc(this.M,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,d)=>{r=a.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Kc(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=b0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Vh(e).Wt({range:i},(d,p,_)=>{const[E,S,N]=d,O=qi(S);if(E===this.userId&&t.path.isEqual(O))return hu(e).get(N).next(L=>{if(!L)throw ot();Mt(L.userId===this.userId),a.push(Kc(this.M,L))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(yt);const i=[];return t.forEach(a=>{const d=b0(this.userId,a.path),p=IDBKeyRange.lowerBound(d),_=Vh(e).Wt({range:p},(E,S,N)=>{const[O,L,$]=E,te=qi(L);O===this.userId&&a.path.isEqual(te)?r=r.add($):N.done()});i.push(_)}),ce.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=b0(this.userId,r),d=IDBKeyRange.lowerBound(a);let p=new Pn(yt);return Vh(e).Wt({range:d},(_,E,S)=>{const[N,O,L]=_,$=qi(O);N===this.userId&&r.isPrefixOf($)?$.length===i&&(p=p.add(L)):S.done()}).next(()=>this.fn(e,p))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(hu(e).get(a).next(d=>{if(null===d)throw ot();Mt(d.userId===this.userId),r.push(Kc(this.M,d))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return D_(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Vh(e).Wt({range:r},(a,d,p)=>{if(a[0]===this.userId){const _=qi(a[1]);i.push(_)}else p.done()}).next(()=>{Mt(0===i.length)})})}containsKey(e,t){return C_(e,this.userId,t)}_n(e){return S1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function C_(n,e,t){const r=b0(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let d=!1;return Vh(n).Wt({range:a,jt:!0},(p,_,E)=>{const[S,N,O]=p;S===e&&N===i&&(d=!0),E.done()}).next(()=>d)}function hu(n){return Br(n,"mutations")}function Vh(n){return Br(n,"documentMutations")}function S1(n){return Br(n,"mutationQueues")}class Jc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Jc(0)}static gn(){return new Jc(-1)}}class I1{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Jc(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Tt.fromTimestamp(new cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fu(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return fu(e).Wt((d,p)=>{const _=Ph(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ce.waitFor(a)).next(()=>i)}forEachTarget(e,t){return fu(e).Wt((r,i)=>{const a=Ph(i);t(a)})}yn(e){return L0(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}pn(e,t){return L0(e).put("targetGlobalKey",t)}In(e,t){return fu(e).put(N0(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=jc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return fu(e).Wt({range:i,index:"queryTargetsIndex"},(d,p,_)=>{const E=Ph(p);wp(t,E.target)&&(a=E,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Qa(e);return t.forEach(d=>{const p=pr(d.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,d))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Qa(e);return ce.forEach(t,a=>{const d=pr(a.path);return ce.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Qa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qa(e);let a=gn();return i.Wt({range:r,jt:!0},(d,p,_)=>{const E=qi(d[1]),S=new He(E);a=a.add(S)}).next(()=>a)}containsKey(e,t){const r=pr(t.path),i=IDBKeyRange.bound([r],[SE(r)],!1,!0);let a=0;return Qa(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,p],_,E)=>{0!==d&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return fu(e).get(t).next(r=>r?Ph(r):null)}}function fu(n){return Br(n,"targets")}function L0(n){return Br(n,"targetGlobal")}function Qa(n){return Br(n,"targetDocuments")}function pu(n){return T_.apply(this,arguments)}function T_(){return T_=(0,ye.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Zc)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),T_.apply(this,arguments)}function A1([n,e],[t,r]){const i=yt(n,t);return 0===i?yt(e,r):i}class N1{constructor(e){this.En=e,this.buffer=new Pn(A1),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class R1{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){su(i)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield pu(i)}yield t.vn(e)}))}}class XT{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Cs.A);const r=new N1(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(QT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QT):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,d,p,_,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,d=Date.now(),this.nthSequenceNumber(e,i))).next(N=>(r=N,p=Date.now(),this.removeTargets(e,r,t))).next(N=>(a=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(E=Date.now(),gp()<=Sc.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${i} in `+(p-d)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${N} documents in `+(E-_)+`ms\nTotal Duration: ${E-S}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:N})))}}class M1{constructor(e,t){this.db=e,this.garbageCollector=new XT(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return Gp(e,r)}removeReference(e,t,r){return Gp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Gp(e,t)}Mn(e,t){return function(r,i){let a=!1;return S1(r).zt(d=>C_(r,d,i).next(p=>(p&&(a=!0),ce.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(d,p)=>{if(p<=t){const _=this.Mn(e,d).next(E=>{if(!E)return a++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Tt.min()),Qa(e).delete([0,pr(d.path)])))});i.push(_)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Gp(e,t)}kn(e,t){const r=Qa(e);let i,a=Cs.A;return r.Wt({index:"documentTargetsIndex"},([d,p],{path:_,sequenceNumber:E})=>{0===d?(a!==Cs.A&&t(new He(qi(i)),a),a=E,i=_):a=Cs.A}).next(()=>{a!==Cs.A&&t(new He(qi(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gp(n,e){return Qa(n).put((r=n.currentSequenceNumber,{targetId:0,path:pr(e.path),sequenceNumber:r}));var r}class Ai{constructor(){this.changes=new iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bh{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Uh(e).put(r)}removeEntry(e,t,r){return Uh(e).delete(function(i,a){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],lu(a),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Uh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xa(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Uh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xa(t))},(i,a)=>{r={document:this.Fn(t,a),size:Up(a)}}).next(()=>r)}getEntries(e,t){let r=oo();return this.Bn(e,t,(i,a)=>{const d=this.Fn(i,a);r=r.insert(i,d)}).next(()=>r)}Ln(e,t){let r=oo(),i=new hr(He.comparator);return this.Bn(e,t,(a,d)=>{const p=this.Fn(a,d);r=r.insert(a,p),i=i.insert(a,Up(d))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Pn(S_);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Xa(i.first()),Xa(i.last())),d=i.getIterator();let p=d.getNext();return Uh(e).Wt({index:"documentKeyIndex",range:a},(_,E,S)=>{const N=He.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;p&&S_(p,N)<0;)r(p,null),p=d.getNext();p&&p.isEqual(N)&&(r(p,E),p=d.hasNext()?d.getNext():null),p?S.Ut(Xa(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),lu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uh(e).qt(IDBKeyRange.bound(i,a,!0)).next(d=>{let p=oo();for(const _ of d){const E=this.Fn(He.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(E.key,E)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=oo();const d=O1(t,r),p=O1(t,Za.max());return Uh(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,p,!0)},(_,E,S)=>{const N=this.Fn(He.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(N.key,N),a.size===i&&S.done()}).next(()=>a)}newChangeBuffer(e){return new eS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return x1(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}On(e,t){return x1(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function ZT(n,e){let t;if(e.document)t=u_(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=cu(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=He.fromSegments(e.unknownDocument.path),i=cu(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new cr(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return Nn.newInvalidDocument(e)}}class eS extends Ai{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new iu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((a,d)=>yt(a.canonicalString(),d.canonicalString()));return this.changes.forEach((a,d)=>{const p=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,p.readTime)),d.isValidDocument()){const _=D1(this.qn.M,d);i=i.add(a.path.popLast()),r+=Up(_)-p.size,t.push(this.qn.addEntry(e,a,_))}else if(r-=p.size,this.trackRemovals){const _=D1(this.qn.M,d.convertToNoDocument(Tt.min()));t.push(this.qn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,d)=>{this.Gn.set(a,{size:d,readTime:r.get(a).readTime})}),r))}}function x1(n){return Br(n,"remoteDocumentGlobal")}function Uh(n){return Br(n,"remoteDocumentsV14")}function Xa(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function O1(n,e){const t=e.documentKey.path.toArray();return[n,lu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function S_(n,e){const t=n.path.length-e.path.length;return 0!==t?t:He.comparator(n,e)}class tS{constructor(e){this.M=e}kt(e,t,r,i){const a=new T0("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",g1,{unique:!0}),p.createObjectStore("documentMutations"),V0(e),function(p){p.createObjectStore("remoteDocuments")}(e));let d=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),V0(e)),d=d.next(()=>function(p){const _=p.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(p,_){return _.store("mutations").qt().next(E=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",g1,{unique:!0});const S=_.store("mutations"),N=E.map(O=>S.put(O));return ce.waitFor(N)})}(e,a))),d=d.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Kn(a))),r<6&&i>=6&&(d=d.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(d=d.next(()=>this.jn(a))),r<8&&i>=8&&(d=d.next(()=>this.Wn(e,a))),r<9&&i>=9&&(d=d.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(d=d.next(()=>this.zn(a))),r<11&&i>=11&&(d=d.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:$T});_.createIndex("collectionPathOverlayIndex",qT,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",D0,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:UT});_.createIndex("documentKeyIndex",jT),_.createIndex("collectionGroupIndex",GT)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:Fp}).createIndex("sequenceNumberIndex",HT,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:y1}).createIndex("documentKeyIndex",v1,{unique:!1})}(e)})),d}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Up(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ce.forEach(i,a=>{const d=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(p=>ce.forEach(p,_=>{Mt(_.userId===a.userId);const E=Kc(this.M,_);return D_(e,a.userId,E).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((d,p)=>{const _=new rn(d),E=[0,pr(_)];a.push(t.get(E).next(S=>S?ce.resolve():t.put({targetId:0,path:pr(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:h_});const r=t.store("collectionParents"),i=new F0,a=d=>{if(i.add(d)){const p=d.lastSegment(),_=d.popLast();return r.put({collectionId:p,parent:pr(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,p)=>{const _=new rn(d);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,p,_],E)=>{const S=qi(p);return a(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=Ph(i),d=N0(this.M,a);return t.put(d)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,d)=>{const p=t.store("remoteDocumentsV14"),_=(E=d,E.document?new He(rn.fromString(E.document.name).popFirst(5)):E.noDocument?He.fromSegments(E.noDocument.path):E.unknownDocument?He.fromSegments(E.unknownDocument.path):ot()).path.toArray();var E;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(p.put(S))}).next(()=>ce.waitFor(i))}}function V0(n){n.createObjectStore("targetDocuments",{keyPath:_1}).createIndex("documentTargetsIndex",E0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",m1,{unique:!0}),n.createObjectStore("targetGlobal")}const B0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class U0{constructor(e,t,r,i,a,d,p,_,E,S,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=d,this.document=p,this.Yn=E,this.Xn=S,this.Zn=N,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=O=>Promise.resolve(),!U0.vt())throw new Re(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new M1(this,i),this.cs=t+"main",this.M=new E1(_),this.hs=new ao(this.cs,this.Zn,new tS(this.M)),this.ls=new I1(this.referenceDelegate,this.M),this.fs=new Bh(this.M),this.ds=new KT,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,B0);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Cs(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(su(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Qc(e).get("owner").next(t=>ce.resolve(this.bs(t)))}Ps(e){return Hp(e).delete(this.clientId)}Vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Br(r,"clientMetadata");return i.qt().next(a=>{const d=e.Ss(a,18e5),p=a.filter(_=>-1===d.indexOf(_));return ce.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?ce.resolve(!0):Qc(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(ue.FAILED_PRECONDITION,B0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hp(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new S0(t,Cs.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Hp(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return jp.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new T1(e)}getDocumentOverlayCache(e){return O0.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(d=this.Zn)?zT:13===d?w1:12===d?MA:11===d?b1:void ot();var d;let p;return this.hs.runTransaction(e,i,a,_=>(p=new S0(_,this.ts?this.ts.next():Cs.A),"readwrite-primary"===t?this.Ts(p).next(E=>!!E||this.Es(p)).next(E=>{if(!E)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Re(ue.FAILED_PRECONDITION,Zc);return r(p)}).next(E=>this.Rs(p).next(()=>E)):this.Fs(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Fs(e){return Qc(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ue.FAILED_PRECONDITION,B0)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qc(e).put("owner",t)}static vt(){return ao.vt()}As(e){const t=Qc(e);return t.get("owner").next(r=>this.bs(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Rt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qc(n){return Br(n,"owner")}function Hp(n){return Br(n,"clientMetadata")}function I_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class A_{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return He.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):i_(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new He(t)).next(r=>{let i=d0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=d0();return this.indexManager.getCollectionParents(e,i).next(d=>ce.forEach(d,p=>{const _=(E=t,S=p.child(i),new Ya(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,S;return this.Ws(e,_,r).next(E=>{E.forEach((S,N)=>{a=a.insert(S,N)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const d of a)for(const p of d.mutations){const _=p.key;let E=i.get(_);null==E&&(E=Nn.newInvalidDocument(_),i=i.insert(_,E)),a0(p,E,d.localWriteTime),E.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,d)=>{r0(t,d)||(i=i.remove(a))}),i))}}class $p{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=gn(),i=gn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $p(e,t.fromCache,r,i)}}class nS{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Tt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const d=this.ti(t,a);return(n0(t)||Ch(t))&&this.ei(t.limitType,d,i,r)?this.Zs(e,t):(gp()<=Sc.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Th(t)),this.Xs.Ks(e,t,ME(r,-1)).next(p=>(d.forEach(_=>{p=p.insert(_.key,_)}),p)))});var a}ti(e,t){let r=new Pn(Tp(e));return t.forEach((i,a)=>{r0(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return gp()<=Sc.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Th(t)),this.Xs.Ks(e,t,Za.min())}}class k1{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new hr(yt),this.ii=new iu(a=>jc(a),wp),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new A_(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function P1(n,e,t,r){return new k1(n,e,t,r)}function j0(n,e){return jh.apply(this,arguments)}function jh(){return jh=(0,ye.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const d=[],p=[];let _=gn();for(const E of i){d.push(E.batchId);for(const S of E.mutations)_=_.add(S.key)}for(const E of a){p.push(E.batchId);for(const S of E.mutations)_=_.add(S.key)}return t.ai.qs(r,_).next(E=>({ci:E,removedBatchIds:d,addedBatchIds:p}))})})}),jh.apply(this,arguments)}function F1(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(d,p,_,E){const S=_.batch,N=S.keys();let O=ce.resolve();return N.forEach(L=>{O=O.next(()=>E.getEntry(p,L)).next($=>{const te=_.docVersions.get(L);Mt(null!==te),$.version.compareTo(te)<0&&(S.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),E.addEntry($)))})}),O.next(()=>d.$s.removeMutationBatch(p,S))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function L1(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function G0(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const p=[];e.targetChanges.forEach((E,S)=>{const N=i.get(S);if(!N)return;p.push(t.ls.removeMatchingKeys(a,E.removedDocuments,S).next(()=>t.ls.addMatchingKeys(a,E.addedDocuments,S)));let O=N.withSequenceNumber(a.currentSequenceNumber);var L,$,te;e.targetMismatches.has(S)?O=O.withResumeToken(Wr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,r)),i=i.insert(S,O),$=O,te=E,(0===(L=N).resumeToken.approximateByteSize()||$.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&p.push(t.ls.updateTargetData(a,O))});let _=oo();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),p.push(N_(a,d,e.documentUpdates).next(E=>{_=E})),!r.isEqual(Tt.min())){const E=t.ls.getLastRemoteSnapshotVersion(a).next(S=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(E)}return ce.waitFor(p).next(()=>d.apply(a)).next(()=>t.ai.Gs(a,_)).next(()=>_)}).then(a=>(t.si=i,a))}function N_(n,e,t){let r=gn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=oo();return t.forEach((d,p)=>{const _=i.get(d);p.isNoDocument()&&p.version.isEqual(Tt.min())?(e.removeEntry(d,p.readTime),a=a.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),a=a.insert(d,p)):Le("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),a})}function OA(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Gh(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,ce.resolve(i)):t.ls.allocateTargetId(r).next(d=>(i=new au(e,d,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Hh(n,e,t){return R_.apply(this,arguments)}function R_(){return R_=(0,ye.Z)(function*(n,e,t){const r=Ze(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!su(d))throw d;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),R_.apply(this,arguments)}function qp(n,e,t){const r=Ze(n);let i=Tt.min(),a=gn();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,_,E){const S=Ze(p),N=S.ii.get(E);return void 0!==N?ce.resolve(S.si.get(N)):S.ls.getTargetData(_,E)}(r,d,lt(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(d,p.targetId).next(_=>{a=_})}).next(()=>r.ni.Ks(d,e,t?i:Tt.min(),t?a:gn())).next(p=>($0(r,Cp(e),p),{documents:p,hi:a})))}function V1(n,e){const t=Ze(n),r=Ze(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(d=>d?d.target:null))}function H0(n,e){const t=Ze(n),r=t.ri.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,ME(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($0(t,e,i),i))}function $0(n,e,t){let r=Tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function q0(){return q0=(0,ye.Z)(function*(n,e,t,r){const i=Ze(n);let a=gn(),d=oo();for(const E of t){const S=e.li(E.metadata.name);E.document&&(a=a.add(S));const N=e.fi(E);N.setReadTime(e.di(E.metadata.readTime)),d=d.insert(S,N)}const p=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield Gh(i,(E=r,lt(Uo(rn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>N_(E,p,d).next(S=>(p.apply(E),S)).next(S=>i.ls.removeMatchingKeysForTargetId(E,_.targetId).next(()=>i.ls.addMatchingKeys(E,a,_.targetId)).next(()=>i.ai.Gs(E,S)).next(()=>S)))}),q0.apply(this,arguments)}function B1(n,e){return z0.apply(this,arguments)}function z0(){return z0=(0,ye.Z)(function*(n,e,t=gn()){const r=yield Gh(n,lt(__(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const d=Zr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i.ds.saveNamedQuery(a,e);const p=r.withResumeToken(Wr.EMPTY_BYTE_STRING,d);return i.si=i.si.insert(p.targetId,p),i.ls.updateTargetData(a,p).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),z0.apply(this,arguments)}class U1{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ce.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Zr(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:__(r.bundledQuery),readTime:Zr(r.readTime)}),ce.resolve();var r}}class j1{constructor(){this.overlays=new hr(He.comparator),this.mi=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Rp(),a=t.length+1,d=new He(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const _=p.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new hr((E,S)=>E-S);const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let S=a.get(E.largestBatchId);null===S&&(S=Rp(),a=a.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const p=Rp(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,S)=>p.set(E,S)),!(p.size()>=i)););return ce.resolve(p)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new A0(t,r));let a=this.mi.get(t);void 0===a&&(a=gn(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class M_{constructor(){this.gi=new Pn(Ur.yi),this.pi=new Pn(Ur.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Ur(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Ur(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new He(new rn([])),r=new Ur(t,e),i=new Ur(t,e+1),a=[];return this.pi.forEachInRange([r,i],d=>{this.Ei(d),a.push(d.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new He(new rn([])),r=new Ur(t,e),i=new Ur(t,e+1);let a=gn();return this.pi.forEachInRange([r,i],d=>{a=a.add(d.key)}),a}containsKey(e){const t=new Ur(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ur{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return He.comparator(e.key,t.key)||yt(e.Vi,t.Vi)}static Ii(e,t){return yt(e.Vi,t.Vi)||He.comparator(e.key,t.key)}}class iS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Pn(Ur.yi)}checkEmpty(e){return ce.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const d=new m_(a,t,r,i);this.$s.push(d);for(const p of i)this.Si=this.Si.add(new Ur(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ce.resolve(d)}lookupMutationBatch(e,t){return ce.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return ce.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ce.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ur(t,0),i=new Ur(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],d=>{const p=this.Di(d.Vi);a.push(p)}),ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(yt);return t.forEach(i=>{const a=new Ur(i,0),d=new Ur(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,d],p=>{r=r.add(p.Vi)})}),ce.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;He.isDocumentKey(a)||(a=a.child(""));const d=new Ur(new He(a),0);let p=new Pn(yt);return this.Si.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(p=p.add(_.Vi)),!0)},d),ce.resolve(this.xi(p))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Mt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return ce.forEach(t.mutations,i=>{const a=new Ur(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Ur(t,0),i=this.Si.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class sS{constructor(e){this.ki=e,this.docs=new hr(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,d=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=oo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Nn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=oo();const a=new He(t.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||ET(wT(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ot()}Mi(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kA(this)}getSize(e){return ce.resolve(this.size)}}class kA extends Ai{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class G1{constructor(e){this.persistence=e,this.Oi=new iu(t=>jc(t),wp),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new M_,this.targetCount=0,this.Bi=Jc.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),ce.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Jc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.In(t),ce.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Oi.delete(d),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ce.waitFor(a).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(d=>{a.push(i.markPotentiallyOrphaned(e,d))}),ce.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.$i.containsKey(t))}}class PA{constructor(e,t){this.Li={},this.overlays={},this.ts=new Cs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new G1(this),this.indexManager=new JT,this.fs=new sS(r=>this.referenceDelegate.Ui(r)),this.M=new E1(t),this.ds=new U1(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new j1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new iS(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new FA(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return ce.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class FA extends C0{constructor(e){super(),this.currentSequenceNumber=e}}class H1{constructor(e){this.persistence=e,this.Qi=new M_,this.ji=null}static Wi(e){return new H1(e)}get zi(){if(this.ji)return this.ji;throw ot()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.zi,r=>{const i=He.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,Tt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return ce.or([()=>ce.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function oS(n,e){return`firestore_clients_${n}_${e}`}function aS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $1(n,e){return`firestore_targets_${n}_${e}`}class W0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(a=new Re(i.error.code,i.error.message))),d?new W0(e,t,i.state,a):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class x_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new x_(e,r.state,i):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Mp();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=NE(r.activeTargetIds[d]),a=a.add(r.activeTargetIds[d]);return i?new Xc(e,a):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class q1{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new q1(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class O_{constructor(){this.activeTargetIds=Mp()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zp{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new hr(yt),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=oS(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new O_),this.ar=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(oS(e.persistenceKey,i));if(a){const d=Xc.Ji(i,a);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($1(this.persistenceKey,e));if(r){const i=x_.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($1(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let d=Cs.A;if(null!=a)try{const p=JSON.parse(a);Mt("number"==typeof p),d=p}catch(p){ur("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);i!==Cs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new W0(this.currentUser,e,t,r),a=aS(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=aS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=$1(this.persistenceKey,e),a=new x_(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Xc.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return W0.Ji(new Pr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return x_.Ji(i,t)}wr(e){return q1.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),d=[],p=[];return a.forEach(_=>{i.has(_)||d.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.Or(d,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Mp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Z0{constructor(){this.Fr=new O_,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new O_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class z1{Br(e){}shutdown(){}}class lS{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const K0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class W1{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Z1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const d=this.oo(e,t);Le("RestConnection","Sending: ",d,r);const p={};return this.uo(p,i,a),this.ao(e,d,p,r).then(_=>(Le("RestConnection","Received: ",_),_),_=>{throw mh("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${K0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,d)=>{const p=new mE;p.listenOnce(Uv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ph.NO_ERROR:const E=p.getResponseJson();Le("Connection","XHR received:",JSON.stringify(E)),a(E);break;case ph.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),d(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const S=p.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const N=p.getResponseJson().error;if(N&&N.status&&N.message){const O=function(L){const $=L.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf($)>=0?$:ue.UNKNOWN}(N.status);d(new Re(O,N.message))}else d(new Re(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=vT(),d=Zm(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new jv({})),this.uo(p.initMessageHeaders,t,r),(0,Rt.uI)()||(0,Rt.b$)()||(0,Rt.d)()||(0,Rt.w1)()||(0,Rt.Mn)()||(0,Rt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Le("Connection","Creating WebChannel: "+_,p);const E=a.createWebChannel(_,p);let S=!1,N=!1;const O=new W1({jr:$=>{N?Le("Connection","Not sending because WebChannel is closed:",$):(S||(Le("Connection","Opening WebChannel transport."),E.open(),S=!0),Le("Connection","WebChannel sending:",$),E.send($))},Wr:()=>E.close()}),L=($,te,ve)=>{$.listen(te,Fe=>{try{ve(Fe)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return L(E,gh.EventType.OPEN,()=>{N||Le("Connection","WebChannel transport opened.")}),L(E,gh.EventType.CLOSE,()=>{N||(N=!0,Le("Connection","WebChannel transport closed"),O.eo())}),L(E,gh.EventType.ERROR,$=>{N||(N=!0,mh("Connection","WebChannel transport errored:",$),O.eo(new Re(ue.UNAVAILABLE,"The operation could not be completed")))}),L(E,gh.EventType.MESSAGE,$=>{var te;if(!N){const ve=$.data[0];Mt(!!ve);const Fe=ve,Ae=Fe.error||(null===(te=Fe[0])||void 0===te?void 0:te.error);if(Ae){Le("Connection","WebChannel received error:",Ae);const Je=Ae.status;let Me=function(We){const Bt=Vr[We];if(void 0!==Bt)return Ap(Bt)}(Je),ze=Ae.message;void 0===Me&&(Me=ue.INTERNAL,ze="Unknown error status: "+Je+" with message "+Ae.message),N=!0,O.eo(new Re(Me,ze)),E.close()}else Le("Connection","WebChannel received:",ve),O.no(ve)}}),L(d,SA.STAT_EVENT,$=>{$.stat===gE.PROXY?Le("Connection","Detected buffering proxy"):$.stat===gE.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.Zr()},0),O}}function Y0(){return"undefined"!=typeof window?window:null}function J0(){return"undefined"!=typeof document?document:null}function $h(n){return new xT(n,!0)}class Q0{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class k_{constructor(e,t,r,i,a,d,p,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Q0(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Re(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uS extends k_{constructor(e,t,r,i,a,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function kT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ot(),i=e.targetChange.targetIds||[],a=function(_,E){return _.N?(Mt(void 0===E||"string"==typeof E),Wr.fromBase64String(E||"")):(Mt(void 0===E||E instanceof Uint8Array),Wr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(_){const E=void 0===_.code?ue.UNKNOWN:Ap(_.code);return new Re(E,_.message||"")}(d);t=new r1(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=ba(n,r.document.name),a=Zr(r.document.updateTime),d=new fi({mapValue:{fields:r.document.fields}}),p=Nn.newFoundDocument(i,a,d);t=new a_(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=ba(n,r.document),a=r.readTime?Zr(r.readTime):Tt.min(),d=Nn.newNoDocument(i,a);t=new a_([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=ba(n,r.document);t=new a_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ot();{const r=e.filter,a=new NA(r.count||0);t=new l_(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Tt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?Zr(a.readTime):Tt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Oh(this.M),t.addTarget=function(i,a){let d;const p=a.target;return d=t_(p)?{documents:v0(i,p)}:{query:c_(i,p)},d.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?d.resumeToken=a1(i,a.resumeToken):a.snapshotVersion.compareTo(Tt.min())>0&&(d.readTime=xh(i,a.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function PT(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Oh(this.M),t.removeTarget=e,this.Oo(t)}}class LA extends k_{constructor(e,t,r,i,a,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function y0(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,i){let a=Zr(r.updateTime?r.updateTime:i);return a.isEqual(Tt.min())&&(a=Zr(i)),new YE(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.Jo(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Oh(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kp(this.M,r))};this.Oo(t)}}class VA extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ue.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ue.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class BA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ur(t),this.su=!1):Le("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class cS{constructor(e,t,r,i,a){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(p=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;gu(d)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(E){const S=Ze(E);S.lu.add(4),yield Zp(S),S._u.set("Unknown"),S.lu.delete(4),yield Wp(S)}),function(E){return _.apply(this,arguments)})(d))}))}),this._u=new BA(r,i)}}function Wp(n){return X0.apply(this,arguments)}function X0(){return X0=(0,ye.Z)(function*(n){if(gu(n))for(const e of n.fu)yield e(!0)}),X0.apply(this,arguments)}function Zp(n){return eb.apply(this,arguments)}function eb(){return eb=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),eb.apply(this,arguments)}function qh(n,e){const t=Ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),tb(t)?Yp(t):ed(t).Co()&&Ts(t,e))}function Kp(n,e){const t=Ze(n),r=ed(t);t.hu.delete(e),r.Co()&&K1(t,e),0===t.hu.size&&(r.Co()?r.ko():gu(t)&&t._u.set("Unknown"))}function Ts(n,e){n.wu.Z(e.targetId),ed(n).Qo(e)}function K1(n,e){n.wu.Z(e),ed(n).jo(e)}function Yp(n){n.wu=new i1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),ed(n).start(),n._u.iu()}function tb(n){return gu(n)&&!ed(n).Do()&&n.hu.size>0}function gu(n){return 0===Ze(n).lu.size}function P_(n){n.wu=void 0}function Y1(n){return F_.apply(this,arguments)}function F_(){return F_=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{Ts(n,e)})}),F_.apply(this,arguments)}function dS(n,e){return L_.apply(this,arguments)}function L_(){return L_=(0,ye.Z)(function*(n,e){P_(n),tb(n)?(n._u.uu(e),Yp(n)):n._u.set("Unknown")}),L_.apply(this,arguments)}function J1(n,e,t){return nb.apply(this,arguments)}function nb(){return nb=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof r1&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const d=a.cause;for(const p of a.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,d),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield V_(n,r)}else if(e instanceof a_?n.wu.ut(e):e instanceof l_?n.wu._t(e):n.wu.ht(e),!t.isEqual(Tt.min()))try{const r=yield L1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const d=i.wu.yt(a);return d.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const E=i.hu.get(_);E&&i.hu.set(_,E.withResumeToken(p.resumeToken,a))}}),d.targetMismatches.forEach(p=>{const _=i.hu.get(p);if(!_)return;i.hu.set(p,_.withResumeToken(Wr.EMPTY_BYTE_STRING,_.snapshotVersion)),K1(i,p);const E=new au(_.target,p,1,_.sequenceNumber);Ts(i,E)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield V_(n,r)}var r}),nb.apply(this,arguments)}function V_(n,e,t){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,ye.Z)(function*(n,e,t){if(!su(e))throw e;n.lu.add(1),yield Zp(n),n._u.set("Offline"),t||(t=()=>L1(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Wp(n)}))}),Jp.apply(this,arguments)}function lo(n,e){return e().catch(t=>V_(n,t,e))}function zh(n){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,ye.Z)(function*(n){const e=Ze(n),t=el(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;hS(e);)try{const i=yield OA(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,X1(e,i)}catch(i){yield V_(e,i)}eD(e)&&tD(e)}),Q1.apply(this,arguments)}function hS(n){return gu(n)&&n.cu.length<10}function X1(n,e){n.cu.push(e);const t=el(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function eD(n){return gu(n)&&!el(n).Do()&&n.cu.length>0}function tD(n){el(n).start()}function nD(n){return rb.apply(this,arguments)}function rb(){return rb=(0,ye.Z)(function*(n){el(n).Xo()}),rb.apply(this,arguments)}function UA(n){return B_.apply(this,arguments)}function B_(){return B_=(0,ye.Z)(function*(n){const e=el(n);for(const t of n.cu)e.Ho(t.mutations)}),B_.apply(this,arguments)}function rD(n,e,t){return ib.apply(this,arguments)}function ib(){return ib=(0,ye.Z)(function*(n,e,t){const r=n.cu.shift(),i=I0.from(r,e,t);yield lo(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zh(n)}),ib.apply(this,arguments)}function fS(n,e){return U_.apply(this,arguments)}function U_(){return U_=(0,ye.Z)(function*(n,e){var t;e&&el(n).zo&&(yield(t=(0,ye.Z)(function*(r,i){if(c0(a=i.code)&&a!==ue.ABORTED){const d=r.cu.shift();el(r).No(),yield lo(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield zh(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),eD(n)&&tD(n)}),U_.apply(this,arguments)}function j_(n,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ye.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=gu(t);t.lu.add(3),yield Zp(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Wp(t)}),Qp.apply(this,arguments)}function G_(n,e){return sb.apply(this,arguments)}function sb(){return sb=(0,ye.Z)(function*(n,e){const t=Ze(n);e?(t.lu.delete(2),yield Wp(t)):e||(t.lu.add(2),yield Zp(t),t._u.set("Unknown"))}),sb.apply(this,arguments)}function ed(n){return n.mu||(n.mu=function(e,t,r){const i=Ze(e);return i.tu(),new uS(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:Y1.bind(null,n),Jr:dS.bind(null,n),Ko:J1.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),tb(n)?Yp(n):n._u.set("Unknown")):(yield n.mu.stop(),P_(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function el(n){return n.gu||(n.gu=function(e,t,r){const i=Ze(e);return i.tu(),new LA(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:nD.bind(null,n),Jr:fS.bind(null,n),Yo:UA.bind(null,n),Jo:rD.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield zh(n)):(yield n.gu.stop(),n.cu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class ob{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,a){const d=Date.now()+r,p=new ob(e,t,d,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wh(n,e){if(ur("AsyncQueue",`${e}: ${n}`),su(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Xp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=d0(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new Xp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pS{constructor(){this.yu=new hr(He.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ot():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class td{constructor(e,t,r,i,a,d,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(d=>{a.push({type:0,doc:d})}),new td(e,t,Xp.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class gS{constructor(){this.Iu=void 0,this.listeners=[]}}class mS{constructor(){this.queries=new iu(e=>GE(e),Dp),this.onlineState="Unknown",this.Tu=new Set}}function ab(n,e){return iD.apply(this,arguments)}function iD(){return iD=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new gS),i)try{a.Iu=yield t.onListen(r)}catch(d){const p=Wh(d,`Initialization of query '${Th(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&lb(t)}),iD.apply(this,arguments)}function sD(n,e){return oD.apply(this,arguments)}function oD(){return oD=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const d=a.listeners.indexOf(e);d>=0&&(a.listeners.splice(d,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),oD.apply(this,arguments)}function jA(n,e){const t=Ze(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const p of d.listeners)p.Au(i)&&(r=!0);d.Iu=i}}r&&lb(t)}function GA(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function lb(n){n.Tu.forEach(e=>{e.next()})}class Zh{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new td(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=td.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class _S{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class aD{constructor(e){this.M=e}li(e){return ba(this.M,e)}fi(e){return e.metadata.exists?u_(this.M,e.document,!1):Nn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Zr(e)}}class lD{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mu(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=rn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new aD(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const d of i.metadata.queries){const p=(t.get(d)||gn()).add(a);t.set(d,p)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function rS(n,e,t,r){return q0.apply(this,arguments)}(e.localStore,new aD(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield B1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function mu(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ub{constructor(e){this.key=e}}class H_{constructor(e){this.key=e}}class $_{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=gn(),this.mutatedKeys=gn(),this.Lu=Tp(e),this.Uu=new Xp(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new pS,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,d=i,p=!1;const _=n0(this.query)&&i.size===this.query.limit?i.last():null,E=Ch(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,N)=>{const O=i.get(S),L=r0(this.query,N)?N:null,$=!!O&&this.mutatedKeys.has(O.key),te=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let ve=!1;O&&L?O.data.isEqual(L.data)?$!==te&&(r.track({type:3,doc:L}),ve=!0):this.Qu(O,L)||(r.track({type:2,doc:L}),ve=!0,(_&&this.Lu(L,_)>0||E&&this.Lu(L,E)<0)&&(p=!0)):!O&&L?(r.track({type:0,doc:L}),ve=!0):O&&!L&&(r.track({type:1,doc:O}),ve=!0,(_||E)&&(p=!0)),ve&&(L?(d=d.add(L),a=te?a.add(S):a.delete(S)):(d=d.delete(S),a=a.delete(S)))}),n0(this.query)||Ch(this.query))for(;d.size>this.query.limit;){const S=n0(this.query)?d.last():d.first();d=d.delete(S.key),a=a.delete(S.key),r.track({type:1,doc:S})}return{Uu:d,Ku:r,ei:p,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((E,S)=>function(N,O){const L=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return L(N)-L(O)}(E.type,S.type)||this.Lu(E.doc,S.doc)),this.ju(r);const d=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,_=p!==this.$u;return this.$u=p,0!==a.length||_?{snapshot:new td(this.query,e.Uu,i,a,e.mutatedKeys,0===p,_,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new pS,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=gn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new H_(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new ub(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=gn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return td.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class yS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cb{constructor(e){this.key=e,this.Xu=!1}}class db{constructor(e,t,r,i,a,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.Zu={},this.ta=new iu(p=>GE(p),Dp),this.ea=new Map,this.na=new Set,this.sa=new hr(He.comparator),this.ia=new Map,this.ra=new M_,this.oa={},this.ua=new Map,this.aa=Jc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function q_(n,e){return uD.apply(this,arguments)}function uD(){return uD=(0,ye.Z)(function*(n,e){const t=R(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const d=yield Gh(t.localStore,lt(e));t.isPrimaryClient&&qh(t.remoteStore,d);const p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield cD(t,e,r,"current"===p)}return i}),uD.apply(this,arguments)}function cD(n,e,t,r){return dD.apply(this,arguments)}function dD(){return dD=(0,ye.Z)(function*(n,e,t,r){n.ha=(S,N,O)=>{return(L=(0,ye.Z)(function*($,te,ve,Fe){let Ae=te.view.Gu(ve);Ae.ei&&(Ae=yield qp($.localStore,te.query,!1).then(({documents:ze})=>te.view.Gu(ze,Ae)));const Je=Fe&&Fe.targetChanges.get(te.targetId),Me=te.view.applyChanges(Ae,$.isPrimaryClient,Je);return gD($,te.targetId,Me.zu),Me.snapshot}),function($,te,ve,Fe){return L.apply(this,arguments)})(n,S,N,O);var L};const i=yield qp(n.localStore,e,!0),a=new $_(e,i.hi),d=a.Gu(i.documents),p=Mh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(d,n.isPrimaryClient,p);gD(n,t,_.zu);const E=new yS(e,t,a);return n.ta.set(e,E),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),dD.apply(this,arguments)}function HA(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,ye.Z)(function*(n,e){const t=Ze(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!Dp(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Kp(t.remoteStore,r.targetId),Kh(t,r.targetId)}).catch(pu))):(Kh(t,r.targetId),yield Hh(t.localStore,r.targetId,!0))}),z_.apply(this,arguments)}function hb(){return hb=(0,ye.Z)(function*(n,e,t){const r=F(n);try{const i=yield function(a,d){const p=Ze(a),_=cr.now(),E=d.reduce((N,O)=>N.add(O.key),gn());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>p.ai.qs(N,E).next(O=>{S=O;const L=[];for(const $ of d){const te=IT($,S.get($.key));null!=te&&L.push(new ru($.key,te,Jv(te.value.mapValue),dr.exists(!0)))}return p.$s.addMutationBatch(N,_,L,d)})).then(N=>(N.applyToLocalDocumentSet(S),{batchId:N.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,d,p){let _=a.oa[a.currentUser.toKey()];_||(_=new hr(yt)),_=_.insert(d,p),a.oa[a.currentUser.toKey()]=_}(r,i.batchId,t),yield tl(r,i.changes),yield zh(r.remoteStore)}catch(i){const a=Wh(i,"Failed to persist write");t.reject(a)}}),hb.apply(this,arguments)}function hD(n,e){return fb.apply(this,arguments)}function fb(){return fb=(0,ye.Z)(function*(n,e){const t=Ze(n);try{const r=yield G0(t.localStore,e);e.targetChanges.forEach((i,a)=>{const d=t.ia.get(a);d&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Xu=!0:i.modifiedDocuments.size>0?Mt(d.Xu):i.removedDocuments.size>0&&(Mt(d.Xu),d.Xu=!1))}),yield tl(t,r,e)}catch(r){yield pu(r)}}),fb.apply(this,arguments)}function pb(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,d)=>{const p=d.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(a,d){const p=Ze(a);p.onlineState=d;let _=!1;p.queries.forEach((E,S)=>{for(const N of S.listeners)N.Eu(d)&&(_=!0)}),_&&lb(p)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fD(n,e,t){return W_.apply(this,arguments)}function W_(){return W_=(0,ye.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let d=new hr(He.comparator);d=d.insert(a,Nn.newNoDocument(a,Tt.min()));const p=gn().add(a),_=new xp(Tt.min(),new Map,new Pn(yt),d,p);yield hD(r,_),r.sa=r.sa.remove(a),r.ia.delete(e),_b(r)}else yield Hh(r.localStore,e,!1).then(()=>Kh(r,e,t)).catch(pu)}),W_.apply(this,arguments)}function bS(n,e){return gb.apply(this,arguments)}function gb(){return gb=(0,ye.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield F1(t.localStore,e);mb(t,r,null),tg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tl(t,i)}catch(i){yield pu(i)}}),gb.apply(this,arguments)}function pD(n,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,ye.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,d){const p=Ze(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return p.$s.lookupMutationBatch(_,d).next(S=>(Mt(null!==S),E=S.keys(),p.$s.removeMutationBatch(_,S))).next(()=>p.$s.performConsistencyCheck(_)).next(()=>p.ai.qs(_,E))})}(r.localStore,e);mb(r,e,t),tg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tl(r,i)}catch(i){yield pu(i)}}),eg.apply(this,arguments)}function Z_(){return Z_=(0,ye.Z)(function*(n,e){const t=Ze(n);gu(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const d=Ze(a);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.$s.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Wh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Z_.apply(this,arguments)}function tg(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function mb(n,e,t){const r=Ze(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Kh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||wS(n,r)})}function wS(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(Kp(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),_b(n))}function gD(n,e,t){for(const r of t)r instanceof ub?(n.ra.addReference(r.key,e),qA(n,r)):r instanceof H_?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||wS(n,r.key)):ot()}function qA(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.na.add(r),_b(n))}function _b(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new He(rn.fromString(e)),r=n.aa.next();n.ia.set(r,new cb(t)),n.sa=n.sa.insert(t,r),qh(n.remoteStore,new au(lt(Uo(t.path)),r,2,Cs.A))}}function tl(n,e,t){return mD.apply(this,arguments)}function mD(){return mD=(0,ye.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],d=[];var p;r.ta.isEmpty()||(r.ta.forEach((p,_)=>{d.push(r.ha(_,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),i.push(E);const S=$p.Js(_.targetId,E);a.push(S)}}))}),yield Promise.all(d),r.Zu.Ko(i),yield(p=(0,ye.Z)(function*(_,E){const S=Ze(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ce.forEach(E,O=>ce.forEach(O.zs,L=>S.persistence.referenceDelegate.addReference(N,O.targetId,L)).next(()=>ce.forEach(O.Hs,L=>S.persistence.referenceDelegate.removeReference(N,O.targetId,L)))))}catch(N){if(!su(N))throw N;Le("LocalStore","Failed to update sequence numbers: "+N)}for(const N of E){const O=N.targetId;if(!N.fromCache){const L=S.si.get(O),te=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);S.si=S.si.insert(O,te)}}}),function(_,E){return p.apply(this,arguments)})(r.localStore,a))}),mD.apply(this,arguments)}function zA(n,e){return _D.apply(this,arguments)}function _D(){return _D=(0,ye.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield j0(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(d=>{d.forEach(p=>{p.reject(new Re(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tl(t,r.ci)}var i}),_D.apply(this,arguments)}function WA(n,e){const t=Ze(n),r=t.ia.get(e);if(r&&r.Xu)return gn().add(r.key);{let i=gn();const a=t.ea.get(e);if(!a)return i;for(const d of a){const p=t.ta.get(d);i=i.unionWith(p.view.qu)}return i}}function ZA(n,e){return yb.apply(this,arguments)}function yb(){return yb=(0,ye.Z)(function*(n,e){const t=Ze(n),r=yield qp(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&gD(t,e.targetId,i.zu),i}),yb.apply(this,arguments)}function KA(n,e){return yD.apply(this,arguments)}function yD(){return yD=(0,ye.Z)(function*(n,e){const t=Ze(n);return H0(t.localStore,e).then(r=>tl(t,r))}),yD.apply(this,arguments)}function YA(n,e,t,r){return vD.apply(this,arguments)}function vD(){return vD=(0,ye.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(d,p){const _=Ze(d),E=Ze(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>E.ln(S,p).next(N=>N?_.ai.qs(S,N):ce.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield zh(i.remoteStore):"acknowledged"===t||"rejected"===t?(mb(i,e,r||null),tg(i,e),p=e,Ze(Ze(i.localStore).$s).dn(p)):ot(),yield tl(i,a)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),vD.apply(this,arguments)}function o(){return o=(0,ye.Z)(function*(n,e){const t=Ze(n);if(R(t),F(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield l(t,r.toArray());t.ca=!0,yield G_(t.remoteStore,!0);for(const a of i)qh(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Kh(t,d),Hh(t.localStore,d,!0))),Kp(t.remoteStore,d)}),yield i,yield l(t,r),function(a){const d=Ze(a);d.ia.forEach((p,_)=>{Kp(d.remoteStore,_)}),d.ra.bi(),d.ia=new Map,d.sa=new hr(He.comparator)}(t),t.ca=!1,yield G_(t.remoteStore,!1)}}),o.apply(this,arguments)}function l(n,e,t){return c.apply(this,arguments)}function c(){return c=(0,ye.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const d of e){let p;const _=r.ea.get(d);if(_&&0!==_.length){p=yield Gh(r.localStore,lt(_[0]));for(const E of _){const S=r.ta.get(E),N=yield ZA(r,S);N.snapshot&&a.push(N.snapshot)}}else{const E=yield V1(r.localStore,d);p=yield Gh(r.localStore,E),yield cD(r,h(E),d,!1)}i.push(p)}return r.Zu.Ko(a),i}),c.apply(this,arguments)}function h(n){return BE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Os()}function v(n,e,t,r){return w.apply(this,arguments)}function w(){return w=(0,ye.Z)(function*(n,e,t,r){const i=Ze(n);if(i.ca)return void Le("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const d=yield H0(i.localStore,Cp(a[0])),p=xp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield tl(i,d,p);break}case"rejected":yield Hh(i.localStore,e,!0),Kh(i,e,r);break;default:ot()}}),w.apply(this,arguments)}function D(n,e,t){return A.apply(this,arguments)}function A(){return A=(0,ye.Z)(function*(n,e,t){const r=R(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const a=yield V1(r.localStore,i),d=yield Gh(r.localStore,a);yield cD(r,h(a),d.targetId,!1),qh(r.remoteStore,d)}for(const i of t)r.ea.has(i)&&(yield Hh(r.localStore,i,!1).then(()=>{Kp(r.remoteStore,i),Kh(r,i)}).catch(pu))}}),A.apply(this,arguments)}function R(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fD.bind(null,e),e.Zu.Ko=jA.bind(null,e.eventManager),e.Zu.la=GA.bind(null,e.eventManager),e}function F(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pD.bind(null,e),e}class K{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=$h(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return P1(this.persistence,new nS,e.initialUser,this.M)}_a(e){return new PA(H1.Wi,this.M)}da(e){return new Z0}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _e extends K{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield F(r.ga.syncEngine),yield zh(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return P1(this.persistence,new nS,e.initialUser,this.M)}wa(e){return new R1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=I_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new U0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Y0(),J0(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Z0}}class Ve extends _e{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof zp&&(r.sharedClientState.syncEngine={kr:YA.bind(null,i),Mr:v.bind(null,i),Or:D.bind(null,i),Os:g.bind(null,i),Nr:KA.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,ye.Z)(function*(d){yield function s(n,e){return o.apply(this,arguments)}(r.ga.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return a.apply(this,arguments)}}())})()}da(e){const t=Y0();if(!zp.vt(t))throw new Re(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=I_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ge{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>pb(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zA.bind(null,r.syncEngine),yield G_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mS}createDatastore(e){const t=$h(e.databaseInfo.databaseId),r=new Z1(e.databaseInfo);return new VA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>pb(this.syncEngine,p,0),d=lS.vt()?new lS:new z1,new cS(t,r,i,a,d);var t,r,i,a,d}createSyncEngine(e,t){return function(r,i,a,d,p,_,E){const S=new db(r,i,a,d,p,_);return E&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ze(t);Le("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Zp(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function st(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class De{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vt{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new _S(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ye.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Yt{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,d){const p=Ze(a),_=Oh(p.M)+"/documents",E={documents:d.map(L=>Op(p.M,L))},S=yield p.co("BatchGetDocuments",_,E),N=new Map;S.forEach(L=>{const $=function c1(n,e){return"found"in e?function(t,r){Mt(!!r.found);const i=ba(t,r.found.name),a=Zr(r.found.updateTime),d=new fi({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,a,d)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const i=ba(t,r.missing),a=Zr(r.readTime);return Nn.newNoDocument(i,a)}(n,e):ot()}(p.M,L);N.set($.key.toString(),$)});const O=[];return d.forEach(L=>{const $=N.get(L.toString());Mt(!!$),O.push($)}),O}),function(a,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ip(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=He.fromPath(i);e.mutations.push(new e1(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const d=Ze(i),p=Oh(d.M)+"/documents",_={writes:a.map(E=>kp(d.M,E))};yield d.ro("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Re(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class vn{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Q0(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new Yt(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!Ql(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!c0(t)}return!1}}class Ss{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pr.UNAUTHENTICATED,this.clientId=TE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(p){Le("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Le("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Wh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function _u(n,e){return ng.apply(this,arguments)}function ng(){return ng=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield j0(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ng.apply(this,arguments)}function K_(n,e){return rg.apply(this,arguments)}function rg(){return rg=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ig(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>j_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>j_(e.remoteStore,a)),n.onlineComponents=e}),rg.apply(this,arguments)}function ig(n){return sg.apply(this,arguments)}function sg(){return sg=(0,ye.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield _u(n,new K)),n.offlineComponents}),sg.apply(this,arguments)}function Yh(n){return og.apply(this,arguments)}function og(){return og=(0,ye.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield K_(n,new Ge)),n.onlineComponents}),og.apply(this,arguments)}function Y_(n){return ig(n).then(e=>e.persistence)}function ag(n){return ig(n).then(e=>e.localStore)}function JA(n){return Yh(n).then(e=>e.remoteStore)}function ES(n){return Yh(n).then(e=>e.syncEngine)}function J_(n){return DS.apply(this,arguments)}function DS(){return DS=(0,ye.Z)(function*(n){const e=yield Yh(n),t=e.eventManager;return t.onListen=q_.bind(null,e.syncEngine),t.onUnlisten=HA.bind(null,e.syncEngine),t}),DS.apply(this,arguments)}function QA(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,d,p,_){const E=new De({next:N=>{a.enqueueAndForget(()=>sD(i,S));const O=N.docs.has(d);!O&&N.fromCache?_.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&N.fromCache&&p&&"server"===p.source?_.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),S=new Zh(Uo(d.path),E,{includeMetadataChanges:!0,Du:!0});return ab(i,S)}(yield J_(n),n.asyncQueue,e,t,r)})),r.promise}function XA(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,d,p,_){const E=new De({next:N=>{a.enqueueAndForget(()=>sD(i,S)),N.fromCache&&"server"===p.source?_.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),S=new Zh(d,E,{includeMetadataChanges:!0,Du:!0});return ab(i,S)}(yield J_(n),n.asyncQueue,e,t,r)})),r.promise}const eN=new Map;function CS(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tN(n,e,t,r){if(!0===e&&!0===r)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nN(n){if(!He.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rN(n){if(He.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function an(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bD(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function iN(n,e){if(e<=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class sN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,tN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sN({}),this._settingsFrozen=!1,e instanceof ya?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vE;switch(t.type){case"gapi":const r=t.client;return Mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new DE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eN.get(e);t&&(Le("ComponentProvider","Removing Datastore"),eN.delete(e),t.terminate())}(this),Promise.resolve()}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class yu extends is{constructor(e,t,r){super(e,t,Uo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new He(e))}withConverter(e){return new yu(this.firestore,e,this._path)}}function oN(n,e,...t){if(n=(0,Rt.m9)(n),CS("collection","path",e),n instanceof vb){const r=rn.fromString(e,...t);return rN(r),new yu(n,null,r)}{if(!(n instanceof Kn||n instanceof yu))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return rN(r),new yu(n.firestore,null,r)}}function wD(n,e,...t){if(n=(0,Rt.m9)(n),1===arguments.length&&(e=TE.R()),CS("doc","path",e),n instanceof vb){const r=rn.fromString(e,...t);return nN(r),new Kn(n,null,new He(r))}{if(!(n instanceof Kn||n instanceof yu))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return nN(r),new Kn(n.firestore,n instanceof yu?n.converter:null,new He(r))}}function aN(n,e){return n=(0,Rt.m9)(n),e=(0,Rt.m9)(e),(n instanceof Kn||n instanceof yu)&&(e instanceof Kn||e instanceof yu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lN(n,e){return n=(0,Rt.m9)(n),e=(0,Rt.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&Dp(n._query,e._query)&&n.converter===e.converter}class JO{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Q0(this,"async_queue_retry"),this.Ua=()=>{const t=J0();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=J0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=J0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Fr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ye.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!su(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,ur("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=ob.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&ot()}verifyOperationInProgress(){}ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function TS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class QO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends vb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new JO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||uN(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||uN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function uN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Vo(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new Ss(n._authCredentials,n._appCheckCredentials,n._queue,r)}function cN(n,e,t){const r=new Fr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield _u(n,t),yield K_(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ue.FAILED_PRECONDITION||a.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function dN(n){if(n._initialized||n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vu(Wr.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vu(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lg{constructor(e){this._methodName=e}}class ED{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}}const lk=/^__.*__$/;class uk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ah(e,this.data,t,this.fieldTransforms)}}class hN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class DD{constructor(e,t,r,i,a,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new DD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return SD(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(fN(this.Ya)&&lk.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class ck{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||$h(e)}uc(e,t,r,i=!1){return new DD({Ya:e,methodName:t,oc:r,path:Lr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ug(n){const e=n._freezeSettings(),t=$h(n._databaseId);return new ck(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CD(n,e,t,r,i,a={}){const d=n.uc(a.merge||a.mergeFields?2:0,e,t,i);NS("Data must be an object, but it was:",d,r);const p=mN(r,d);let _,E;if(a.merge)_=new _h(d.fieldMask),E=d.fieldTransforms;else if(a.mergeFields){const S=[];for(const N of a.mergeFields){const O=RS(e,N,t);if(!d.contains(O))throw new Re(ue.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);yN(S,O)||S.push(O)}_=new _h(S),E=d.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,E=d.fieldTransforms;return new uk(new fi(p),_,E)}class bb extends lg{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bb}}function pN(n,e,t){return new DD({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class SS extends lg{_toFieldTransform(e){return new tu(e.path,new Hc)}isEqual(e){return e instanceof SS}}class dk extends lg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=pN(this,e,!0),r=this.ac.map(a=>cg(a,t)),i=new $c(r);return new tu(e.path,i)}isEqual(e){return this===e}}class hk extends lg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=pN(this,e,!0),r=this.ac.map(a=>cg(a,t)),i=new qc(r);return new tu(e.path,i)}isEqual(e){return this===e}}class fk extends lg{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Ih(e.M,HE(e.M,this.cc));return new tu(e.path,t)}isEqual(e){return this===e}}function IS(n,e,t,r){const i=n.uc(1,e,t);NS("Data must be an object, but it was:",i,r);const a=[],d=fi.empty();Jl(r,(_,E)=>{const S=TD(e,_,t);E=(0,Rt.m9)(E);const N=i.nc(S);if(E instanceof bb)a.push(S);else{const O=cg(E,N);null!=O&&(a.push(S),d.set(S,O))}});const p=new _h(a);return new hN(d,p,i.fieldTransforms)}function AS(n,e,t,r,i,a){const d=n.uc(1,e,t),p=[RS(e,r,t)],_=[i];if(a.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)p.push(RS(e,a[O])),_.push(a[O+1]);const E=[],S=fi.empty();for(let O=p.length-1;O>=0;--O)if(!yN(E,p[O])){const L=p[O];let $=_[O];$=(0,Rt.m9)($);const te=d.nc(L);if($ instanceof bb)E.push(L);else{const ve=cg($,te);null!=ve&&(E.push(L),S.set(L,ve))}}const N=new _h(E);return new hN(S,N,d.fieldTransforms)}function gN(n,e,t,r=!1){return cg(t,n.uc(r?4:3,e))}function cg(n,e){if(_N(n=(0,Rt.m9)(n)))return NS("Unsupported field value:",e,n),mN(n,e);if(n instanceof lg)return function(t,r){if(!fN(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const d of t){let p=cg(d,r.sc(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Rt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HE(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=cr.fromDate(t);return{timestampValue:xh(r.M,i)}}if(t instanceof cr){const i=new cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xh(r.M,i)}}if(t instanceof ED)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vu)return{bytesValue:a1(r.M,t._byteString)};if(t instanceof Kn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:p0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${bD(t)}`)}(n,e)}function mN(n,e){const t={};return qv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jl(n,(r,i)=>{const a=cg(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function _N(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof cr||n instanceof ED||n instanceof vu||n instanceof Kn||n instanceof lg)}function NS(n,e,t){if(!_N(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=bD(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function RS(n,e,t){if((e=(0,Rt.m9)(e))instanceof nd)return e._internalPath;if("string"==typeof e)return TD(n,e);throw SD("Field path arguments must be of type string or ",n,!1,void 0,t)}const pk=new RegExp("[~\\*/\\[\\]]");function TD(n,e,t){if(e.search(pk)>=0)throw SD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nd(...e.split("."))._internalPath}catch(r){throw SD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function SD(n,e,t,r,i){const a=r&&!r.isEmpty(),d=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||d)&&(_+=" (found",a&&(_+=` in field ${r}`),d&&(_+=` in document ${i}`),_+=")"),new Re(ue.INVALID_ARGUMENT,p+n+_)}function yN(n,e){return n.some(t=>t.isEqual(e))}class wb{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gk extends wb{data(){return super.data()}}function ID(n,e){return"string"==typeof e?TD(n,e):e instanceof nd?e._internalPath:e._delegate._internalPath}class dg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rd extends wb{constructor(e,t,r,i,a,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Eb extends rd{data(e={}){return super.data(e)}}class Jh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Eb(this._firestore,this._userDataWriter,r.key,r,new dg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Eb(r._firestore,r._userDataWriter,d.doc.key,d.doc,new dg(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const p=new Eb(r._firestore,r._userDataWriter,d.doc.key,d.doc,new dg(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==d.type&&(_=a.indexOf(d.doc.key),a=a.delete(d.doc.key)),1!==d.type&&(a=a.add(d.doc),E=a.indexOf(d.doc.key)),{type:mk(d.type),doc:p,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function vN(n,e){return n instanceof rd&&e instanceof rd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Jh&&e instanceof Jh&&n._firestore===e._firestore&&lN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function bN(n){if(Ch(n)&&0===n.explicitOrderBy.length)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Db{}function Qh(n,...e){for(const t of e)n=t._apply(n);return n}class _k extends Db{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=ug(e.firestore),r=function(i,a,d,p,_,E,S){let N;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){SN(S,E);const L=[];for(const $ of S)L.push(TN(p,i,$));N={arrayValue:{values:L}}}else N=TN(p,i,S)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||SN(S,E),N=gN(d,"where",S,"in"===E||"not-in"===E);const O=pi.create(_,E,N);return function(L,$){if($.S()){const ve=r_(L);if(null!==ve&&!ve.isEqual($.field))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ve.toString()}' and '${$.field.toString()}'`);const Fe=UE(L);null!==Fe&&IN(0,$.field,Fe)}const te=function(ve,Fe){for(const Ae of ve.filters)if(Fe.indexOf(Ae.op)>=0)return Ae.op;return null}(L,function(ve){switch(ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}($.op));if(null!==te)throw new Re(ue.INVALID_ARGUMENT,te===$.op?`Invalid query. You cannot use more than one '${$.op.toString()}' filter.`:`Invalid query. You cannot use '${$.op.toString()}' filters with '${te.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new is(e.firestore,e.converter,function(i,a){const d=i.filters.concat([a]);return new Ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class vk extends Db{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Gc(i,a);return function(p,_){if(null===UE(p)){const E=r_(p);null!==E&&IN(0,E,_.field)}}(r,d),d}(e._query,this.hc,this.dc);return new is(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ya(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class wN extends Db{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new is(e.firestore,e.converter,jE(e._query,this._c,this.wc))}}class EN extends Db{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=CN(e,this.type,this.mc,this.gc);return new is(e.firestore,e.converter,(i=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class DN extends Db{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=CN(e,this.type,this.mc,this.gc);return new is(e.firestore,e.converter,(i=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function CN(n,e,t,r){if(t[0]=(0,Rt.m9)(t[0]),t[0]instanceof wb)return function(i,a,d,p,_){if(!p)throw new Re(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const E=[];for(const S of Ep(i))if(S.field.isKeyField())E.push(bh(a,p.key));else{const N=p.data.field(S.field);if(Km(N))throw new Re(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const O=S.field.canonicalString();throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}E.push(N)}return new Ka(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ug(n.firestore);return function(a,d,p,_,E,S){const N=a.explicitOrderBy;if(E.length>N.length)throw new Re(ue.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let L=0;L<E.length;L++){const $=E[L];if(N[L].field.isKeyField()){if("string"!=typeof $)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof $}`);if(!i_(a)&&-1!==$.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${$}' contains a slash.`);const te=a.path.child(rn.fromString($));if(!He.isDocumentKey(te))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const ve=new He(te);O.push(bh(d,ve))}else{const te=gN(p,_,$);O.push(te)}}return new Ka(O,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function TN(n,e,t){if("string"==typeof(t=(0,Rt.m9)(t))){if(""===t)throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i_(e)&&-1!==t.indexOf("/"))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!He.isDocumentKey(r))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bh(n,new He(r))}if(t instanceof Kn)return bh(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bD(t)}.`)}function SN(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function IN(n,e,t){if(!t.isEqual(e))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class MS{convertValue(e,t="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return Jl(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new ED(pn(e.latitude),pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lo(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($i(e));default:return null}}convertTimestamp(e){const t=_a(e);return new cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);Mt(p1(r));const i=new ya(r.get(1),r.get(3)),a=new He(r.popFirst(5));return i.isEqual(t)||ur(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function AD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ik extends MS{constructor(e){super(),this.firestore=e}convertBytes(e){return new vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}class AN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ug(e)}set(e,t,r){this._verifyNotCommitted();const i=Xh(e,this._firestore),a=AD(i.converter,t,r),d=CD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Xh(e,this._firestore);let d;return d="string"==typeof(t=(0,Rt.m9)(t))||t instanceof nd?AS(this._dataReader,"WriteBatch.update",a._key,t,r,i):IS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(d.toMutation(a._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xh(e,this._firestore);return this._mutations=this._mutations.concat(new Ip(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xh(n,e){if((n=(0,Rt.m9)(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hg extends MS{constructor(e){super(),this.firestore=e}convertBytes(e){return new vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function NN(n,e,t){n=an(n,Kn);const r=an(n.firestore,tr),i=AD(n.converter,e,t);return Q_(r,[CD(ug(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,dr.none())])}function RN(n,e,t,...r){n=an(n,Kn);const i=an(n.firestore,tr),a=ug(i);let d;return d="string"==typeof(e=(0,Rt.m9)(e))||e instanceof nd?AS(a,"updateDoc",n._key,e,t,r):IS(a,"updateDoc",n._key,e),Q_(i,[d.toMutation(n._key,dr.exists(!0))])}function MN(n,...e){var t,r,i;n=(0,Rt.m9)(n);let a={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||TS(e[d])||(a=e[d],d++);const p={includeMetadataChanges:a.includeMetadataChanges};if(TS(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(i=N.complete)||void 0===i?void 0:i.bind(N)}let _,E,S;if(n instanceof Kn)E=an(n.firestore,tr),S=Uo(n._key.path),_={next:N=>{e[d]&&e[d](xS(E,n,N))},error:e[d+1],complete:e[d+2]};else{const N=an(n,is);E=an(N.firestore,tr),S=N._query;const O=new hg(E);_={next:L=>{e[d]&&e[d](new Jh(E,O,N,L))},error:e[d+1],complete:e[d+2]},bN(n._query)}return function(N,O,L,$){const te=new De($),ve=new Zh(O,te,L);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return ab(yield J_(N),ve)})),()=>{te.pa(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return sD(yield J_(N),ve)}))}}(Kr(E),S,p,_)}function Q_(n,e){return function(t,r){const i=new Fr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function vS(n,e,t){return hb.apply(this,arguments)}(yield ES(t),r,i)})),i.promise}(Kr(n),e)}function xS(n,e,t){const r=t.docs.get(e._key),i=new hg(n);return new rd(n,i,e._key,r,new dg(t.hasPendingWrites,t.fromCache),e.converter)}class Lk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ug(e)}get(e){const t=Xh(e,this._firestore),r=new Ik(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ot();const a=i[0];if(a.isFoundDocument())return new wb(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new wb(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const i=Xh(e,this._firestore),a=AD(i.converter,t,r),d=CD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const a=Xh(e,this._firestore);let d;return d="string"==typeof(t=(0,Rt.m9)(t))||t instanceof nd?AS(this._dataReader,"Transaction.update",a._key,t,r,i):IS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,d),this}delete(e){const t=Xh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xh(e,this._firestore),r=new hg(this._firestore);return super.get(e).then(i=>new rd(this._firestore,r,t._key,i._document,new dg(!1,!1),t.converter))}}function OS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ON(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function kN(){if(!function AE(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Lc=ha.SDK_VERSION,(0,ha._registerComponent)(new Gf.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new tr(i,new wE(t.getProvider("auth-internal")),new IA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ha.registerVersion)(Gv,"3.4.7",n),(0,ha.registerVersion)(Gv,"3.4.7","esm2017")}();class Cb{constructor(e){this._delegate=e}static fromBase64String(e){return kN(),new Cb(vu.fromBase64String(e))}static fromUint8Array(e){return ON(),new Cb(vu.fromUint8Array(e))}toBase64(){return kN(),this._delegate.toBase64()}toUint8Array(){return ON(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kS(n){return function zk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Wk{enableIndexedDbPersistence(e,t){return function ek(n,e){dN(n=an(n,tr));const t=Kr(n),r=n._freezeSettings(),i=new Ge;return cN(t,i,new _e(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tk(n){dN(n=an(n,tr));const e=Kr(n),t=n._freezeSettings(),r=new Ge;return cN(e,r,new Ve(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nk(n){if(n._initialized&&!n._terminated)throw new Re(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!ao.vt())return Promise.resolve();const i=r+"main";yield ao.delete(i)}),function(r){return t.apply(this,arguments)})(I_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class PN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function KO(n,e,t,r={}){var i;const a=(n=an(n,vb))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&mh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=Pr.MOCK_USER;else{d=(0,Rt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Pr(_)}n._authCredentials=new bE(new Hv(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function ik(n){return function jO(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Y_(n),t=yield JA(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.lu.delete(0),Wp(i)}(t)}))}(Kr(n=an(n,tr)))}(this._delegate)}disableNetwork(){return function sk(n){return function GO(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Y_(n),t=yield JA(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=Ze(i);a.lu.add(0),yield Zp(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=an(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rk(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function $A(n,e){return Z_.apply(this,arguments)}(yield ES(e),t)})),t.promise}(Kr(n=an(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function Fk(n,e){return function qO(n,e){const t=new De(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield J_(n),i=t,Ze(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield J_(n),i=t,void Ze(r).Tu.delete(i);var r,i}))}}(Kr(n=an(n,tr)),TS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new X_(this,oN(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,wD(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,function YO(n,e){if(n=an(n,vb),CS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new Ya(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Vk(n,e){return function zO(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(i=n,Yh(i).then(a=>a.datastore));var i;new vn(n.asyncQueue,r,e,t).run()})),t.promise}(Kr(n=an(n,tr)),t=>e(new Lk(n,t)))}(this._delegate,t=>e(new FN(this,t)))}batch(){return Kr(this._delegate),new LN(new AN(this._delegate,e=>Q_(this._delegate,e)))}loadBundle(e){return function ok(n,e){const t=Kr(n=an(n,tr)),r=new QO;return function WO(n,e,t,r){const i=function(a,d){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,E){if(_ instanceof Uint8Array)return st(_,E);if(_ instanceof ArrayBuffer)return st(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new vt(_,d);var _}(t,$h(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function U(n,e,t){const r=Ze(n);var i;(i=(0,ye.Z)(function*(a,d,p){try{const _=yield d.getMetadata();if(yield function(O,L){const $=Ze(O),te=Zr(L.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",ve=>$.ds.getBundleMetadata(ve,L.id)).then(ve=>!!ve&&ve.createTime.compareTo(te)>=0)}(a.localStore,_))return yield d.close(),p._completeWith({taskState:"Success",documentsLoaded:(O=_).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);p._updateProgress(mu(_));const E=new lD(_,a.localStore,d.M);let S=yield d.fa();for(;S;){const O=yield E.Nu(S);O&&p._updateProgress(O),S=yield d.fa()}const N=yield E.complete();return yield tl(a,N.Ou,void 0),yield function(O,L){const $=Ze(O);return $.persistence.runTransaction("Save bundle","readwrite",te=>$.ds.saveBundleMetadata(te,L))}(a.localStore,_),p._completeWith(N.progress),Promise.resolve(N.Mu)}catch(_){return mh("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var O}),function(a,d,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ES(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ak(n,e){return function ZO(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield ag(n),e)}))}(Kr(n=an(n,tr)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new As(this,t):null)}}class ND extends MS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cb(new vu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class FN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ND(e)}get(e){const t=pg(e);return this._delegate.get(t).then(r=>new Tb(this._firestore,new rd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=pg(e);return r?(OS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pg(e);return this._delegate.delete(t),this}}class LN{constructor(e){this._delegate=e}set(e,t,r){const i=pg(e);return r?(OS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Eb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new fg(e,new ND(e),t),i.set(t,a)),a}}fg.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ND(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new Kn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new wa(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new X_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new X_(this.firestore,oN(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Rt.m9)(e))instanceof Kn&&aN(this._delegate,e)}set(e,t){t=OS("DocumentReference.set",t);try{return t?NN(this._delegate,e,t):NN(this._delegate,e)}catch(r){throw Is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?RN(this._delegate,e):RN(this._delegate,e,t,...r)}catch(i){throw Is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function kk(n){return Q_(an(n.firestore,tr),[new Ip(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=VN(e),r=BN(e,i=>new Tb(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return MN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Nk(n){n=an(n,Kn);const e=an(n.firestore,tr),t=Kr(e),r=new hg(e);return function HO(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,d){try{const p=yield function(_,E){const S=Ze(_);return S.persistence.runTransaction("read document","readonly",N=>S.ai.Bs(N,E))}(i,a);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Re(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Wh(p,`Failed to get document '${a} from cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield ag(n),e,t);var r})),t.promise}(t,n._key).then(i=>new rd(e,r,n._key,i,new dg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Rk(n){n=an(n,Kn);const e=an(n.firestore,tr);return QA(Kr(e),n._key,{source:"server"}).then(t=>xS(e,n,t))}(this._delegate):function Ak(n){n=an(n,Kn);const e=an(n.firestore,tr);return QA(Kr(e),n._key).then(t=>xS(e,n,t))}(this._delegate),t.then(r=>new Tb(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function VN(n){for(const e of n)if("object"==typeof e&&!kS(e))return e;return{}}function BN(n,e){var t,r;let i;return i=kS(n[0])?n[0]:kS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Tb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vN(this._delegate,e._delegate)}}class Sb extends Tb{data(e){const t=this._delegate.data(e);return function yE(n,e){n||ot()}(void 0!==t),t}}class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ND(e)}where(e,t,r){try{return new As(this.firestore,Qh(this._delegate,function yk(n,e,t){const r=e,i=ID("where",n);return new _k(i,r,t)}(e,t,r)))}catch(i){throw Is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new As(this.firestore,Qh(this._delegate,function bk(n,e="asc"){const t=e,r=ID("orderBy",n);return new vk(r,t)}(e,t)))}catch(r){throw Is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new As(this.firestore,Qh(this._delegate,function wk(n){return iN("limit",n),new wN("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new As(this.firestore,Qh(this._delegate,function Ek(n){return iN("limitToLast",n),new wN("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new As(this.firestore,Qh(this._delegate,function Dk(...n){return new EN("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new As(this.firestore,Qh(this._delegate,function Ck(...n){return new EN("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new As(this.firestore,Qh(this._delegate,function Tk(...n){return new DN("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new As(this.firestore,Qh(this._delegate,function Sk(...n){return new DN("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return lN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xk(n){n=an(n,is);const e=an(n.firestore,tr),t=Kr(e),r=new hg(e);return function $O(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,d){try{const p=yield qp(i,a,!0),_=new $_(a,p.hi),E=_.Gu(p.documents),S=_.applyChanges(E,!1);d.resolve(S.snapshot)}catch(p){const _=Wh(p,`Failed to execute query '${a} against cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield ag(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Jh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ok(n){n=an(n,is);const e=an(n.firestore,tr),t=Kr(e),r=new hg(e);return XA(t,n._query,{source:"server"}).then(i=>new Jh(e,r,n,i))}(this._delegate):function Mk(n){n=an(n,is);const e=an(n.firestore,tr),t=Kr(e),r=new hg(e);return bN(n._query),XA(t,n._query).then(i=>new Jh(e,r,n,i))}(this._delegate),t.then(r=>new PS(this.firestore,new Jh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=VN(e),r=BN(e,i=>new PS(this.firestore,new Jh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return MN(this._delegate,t,r)}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}class Kk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Kk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sb(this._firestore,r))})}isEqual(e){return vN(this._delegate,e._delegate)}}class X_ extends As{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?wD(this._delegate):wD(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function Pk(n,e){const t=an(n.firestore,tr),r=wD(n),i=AD(n.converter,e);return Q_(t,[CD(ug(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return aN(this._delegate,e._delegate)}withConverter(e){return new X_(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}function pg(n){return an(n,Kn)}class FS{constructor(...e){this._delegate=new nd(...e)}static documentId(){return new FS(Lr.keyField().canonicalString())}isEqual(e){return(e=(0,Rt.m9)(e))instanceof nd&&this._delegate._internalPath.isEqual(e._internalPath)}}class gg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Uk(){return new SS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gg(e)}static delete(){const e=function Bk(){return new bb("deleteField")}();return e._methodName="FieldValue.delete",new gg(e)}static arrayUnion(...e){const t=function jk(...n){return new dk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gg(t)}static arrayRemove(...e){const t=function Gk(...n){return new hk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gg(t)}static increment(e){const t=function Hk(n){return new fk("increment",n)}(e);return t._methodName="FieldValue.increment",new gg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yk={Firestore:PN,GeoPoint:ED,Timestamp:cr,Blob:Cb,Transaction:FN,WriteBatch:LN,DocumentReference:wa,DocumentSnapshot:Tb,Query:As,QueryDocumentSnapshot:Sb,QuerySnapshot:PS,CollectionReference:X_,FieldPath:FS,FieldValue:gg,setLogLevel:function Zk(n){!function _E(n){Wa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Qk(n){(function Jk(n,e){n.INTERNAL.registerComponent(new Gf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Yk)))})(n,(e,t)=>new PN(e,t,new Wk)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(qC.Z);var Xk=k(6451),RD=k(5363),eP=k(6063);class tP extends In.x{constructor(e=1/0,t=1/0,r=eP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:d}=this;t||(r.push(e),!i&&r.push(a.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let d=0;d<a.length&&!e.closed;d+=r?1:2)e.next(a[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const d=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)p=_;p&&r.splice(0,p+1)}}}var nP=k(3099);function UN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,nP.B)({connector:()=>new tP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function jN(n,e){return(0,Pi.m)(e)?V(()=>n,e):V(()=>n)}var LS=k(9468);k(5867);const HN=new Map,aP={activated:!1,tokenObservers:[]},lP={initialized:!1,enabled:!1};function Ni(n){return HN.get(n)||aP}function nl(n,e){HN.set(n,e)}function xD(){return lP}class fP{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Rt.BH,yield function pP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Rt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ns=new Rt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qN(n){if(!Ni(n).activated)throw Ns.create("use-before-activation",{appName:n.name})}function jS(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const N=yield i.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const a={method:"POST",body:JSON.stringify(e),headers:r};let d,p;try{d=yield fetch(n,a)}catch(N){throw Ns.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw Ns.create("fetch-status-error",{httpStatus:d.status});try{p=yield d.json()}catch(N){throw Ns.create("fetch-parse-error",{originalErrorMessage:N.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const E=1e3*Number(_[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+E,issuedAtTimeMillis:S}}),GS.apply(this,arguments)}function vP(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ib="firebase-app-check-store";let PD=null;function WN(){return PD||(PD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ns.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ib,{keyPath:"compositeKey"})}}catch(t){e(Ns.create("storage-open",{originalErrorMessage:t.message}))}}),PD)}function HS(){return HS=(0,ye.Z)(function*(n,e){const r=(yield WN()).transaction(Ib,"readwrite"),a=r.objectStore(Ib).put({compositeKey:n,value:e});return new Promise((d,p)=>{a.onsuccess=_=>{d()},r.onerror=_=>{var E;p(Ns.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})}),HS.apply(this,arguments)}const Ab=new Sc.Yd("@firebase/app-check");function JN(n,e){return(0,Rt.hl)()?function DP(n,e){return function ZN(n,e){return HS.apply(this,arguments)}(function YN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ab.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QN(){return xD().enabled}function XN(){return WS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(){const n=xD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),WS.apply(this,arguments)}const NP={error:"UNKNOWN_ERROR"};function RP(n){return Rt.US.encodeString(JSON.stringify(n),!1)}function FD(n){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,ye.Z)(function*(n,e=!1){const t=n.app;qN(t);const r=Ni(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&LD(_)&&(i=_)}if(!e&&i&&LD(i))return{token:i.token};let p,d=!1;if(QN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jS(vP(t,yield XN()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0);const _=yield r.exchangeTokenPromise;return yield JN(t,_),nl(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),d=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ab.warn(_.message):Ab.error(_),a=_}return i?(p={token:i.token},nl(t,Object.assign(Object.assign({},r),{token:i})),yield JN(t,i)):p=xP(a),d&&tR(t,p),p}),ZS.apply(this,arguments)}function YS(n,e){const t=Ni(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),nl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function eR(n){const{app:e}=n,t=Ni(e);let r=t.tokenRefresher;r||(r=function MP(n){const{app:e}=n;return new fP((0,ye.Z)(function*(){let r;if(r=Ni(e).token?yield FD(n,!0):yield FD(n),r.error)throw r.error}),()=>!0,()=>{const t=Ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),nl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tR(n,e){const t=Ni(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function LD(n){return n.expireTimeMillis-Date.now()>0}function xP(n){return{token:RP(NP),error:n}}class OP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ni(this.app);for(const t of e)YS(this.app,t.next);return Promise.resolve()}}const uR="app-check-internal";!function WP(){(0,ha._registerComponent)(new Gf.wA("app-check",n=>function kP(n,e){return new OP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uR).initialize()})),(0,ha._registerComponent)(new Gf.wA(uR,n=>function PP(n){return{getToken:e=>FD(n,e),addTokenListener:e=>function KS(n,e,t,r){const{app:i}=n,a=Ni(i),d={next:t,error:r,type:e};if(nl(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,d]})),a.token&&LD(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),eR(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>eR(n))}(n,"INTERNAL",e),removeTokenListener:e=>YS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ha.registerVersion)("@firebase/app-check","0.5.5")}();class BD{constructor(){return(0,Zn.vb)("app-check")}}"undefined"!=typeof window&&window;var QP=k(127);const dR=new u.OlP("angularfire2.auth.use-emulator"),hR=new u.OlP("angularfire2.auth.settings"),fR=new u.OlP("angularfire2.auth.tenant-id"),pR=new u.OlP("angularfire2.auth.langugage-code"),gR=new u.OlP("angularfire2.auth.use-device-language"),mR=new u.OlP("angularfire.auth.persistence"),_R=(n,e,t,r,i,a,d,p)=>(0,es.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),d)for(const[E,S]of Object.entries(d))_.settings[E]=S;return p&&_.setPersistence(p),_},[t,r,i,a,d,p]);let yR=(()=>{class n{constructor(t,r,i,a,d,p,_,E,S,N,O,L){const $=new In.x,te=ht(void 0).pipe((0,RD.Q)(d.outsideAngular),V(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,at.U)(()=>(0,es.on)(t,a,r)),(0,at.U)(ve=>_R(ve,a,p,E,S,N,_,O)),UN({bufferSize:1,refCount:!1}));if(br(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{te.pipe(ri()).subscribe();const Fe=te.pipe(V(Me=>Me.getRedirectResult().then(ze=>ze,()=>null)),Zn.iC,UN({bufferSize:1,refCount:!1})),Ae=te.pipe(V(Me=>new xn.y(ze=>({unsubscribe:a.runOutsideAngular(()=>Me.onAuthStateChanged(We=>ze.next(We),We=>ze.error(We),()=>ze.complete()))})))),Je=te.pipe(V(Me=>new xn.y(ze=>({unsubscribe:a.runOutsideAngular(()=>Me.onIdTokenChanged(We=>ze.next(We),We=>ze.error(We),()=>ze.complete()))}))));this.authState=Fe.pipe(jN(Ae),(0,LS.R)(d.outsideAngular),(0,RD.Q)(d.insideAngular)),this.user=Fe.pipe(jN(Je),(0,LS.R)(d.outsideAngular),(0,RD.Q)(d.insideAngular)),this.idToken=this.user.pipe(V(Me=>Me?(0,Zt.D)(Me.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(V(Me=>Me?(0,Zt.D)(Me.getIdTokenResult()):ht(null))),this.credential=(0,Xk.T)(Fe,$,this.authState.pipe(Bn(Me=>!Me))).pipe((0,at.U)(Me=>(null==Me?void 0:Me.user)?Me:null),(0,LS.R)(d.outsideAngular),(0,RD.Q)(d.insideAngular))}return(0,es.pX)(this,te,a,{spy:{apply:(ve,Fe,Ae)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&Ae.then(Je=>$.next(Je))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(es.Dh),u.LFG(es.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Zn.HU),u.LFG(dR,8),u.LFG(hR,8),u.LFG(fR,8),u.LFG(pR,8),u.LFG(gR,8),u.LFG(mR,8),u.LFG(BD,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function vR(n,e){return function eF(n,e=jf.z){return new xn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function tI(n,e){return vR(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function UD(n,e){return tI(n,e).pipe(ee(void 0),tv(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const _=i.find(S=>S.doc.ref.isEqual(d.ref)),E=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(d.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),a}))}function bR(n,e,t){return UD(n,t).pipe(Ye((r,i)=>function nF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nI(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nI(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nI(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Kd(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function nI(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function wR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ER{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=UD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ee(void 0),tv(),Bn(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),Zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ye((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wR(e);return bR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return tI(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Zn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(Zn.iC)}add(e){return this.ref.add(e)}doc(e){return new DR(this.ref.doc(e),this.afs)}}class DR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=CR(r,t);return new ER(i,a,this.afs)}snapshotChanges(){return function tF(n,e){return vR(n,e).pipe(ee(void 0),tv(),(0,at.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zt.D)(this.ref.get(e)).pipe(Zn.iC)}}class iF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?UD(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Bn(t=>t.length>0),Zn.iC):UD(this.query,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ye((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wR(e);return bR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zn.iC)}valueChanges(e={}){return tI(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Zn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(Zn.iC)}}const sF=new u.OlP("angularfire2.enableFirestorePersistence"),oF=new u.OlP("angularfire2.firestore.persistenceSettings"),aF=new u.OlP("angularfire2.firestore.settings"),lF=new u.OlP("angularfire2.firestore.use-emulator");function CR(n,e=(t=>t)){return{query:e(n),ref:n}}let rI=(()=>{class n{constructor(t,r,i,a,d,p,_,E,S,N,O,L,$,te,ve,Fe,Ae){this.schedulers=_;const Je=(0,es.on)(t,p,r),Me=S;N&&_R(Je,p,O,$,te,ve,L,Fe),[this.firestore,this.persistenceEnabled$]=(0,es.cc)(`${Je.name}.firestore`,"AngularFirestore",Je.name,()=>{const ze=p.runOutsideAngular(()=>Je.firestore());if(a&&ze.settings(a),Me&&ze.useEmulator(...Me),i&&!br(d)){const We=()=>{try{return(0,Zt.D)(ze.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Bt){return"undefined"!=typeof console&&console.warn(Bt),ht(!1)}};return[ze,p.runOutsideAngular(We)]}return[ze,ht(!1)]},[a,Me,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:d}=CR(i,r),p=this.schedulers.ngZone.run(()=>a);return new ER(p,d,this)}collectionGroup(t,r){const i=r||(d=>d),a=this.firestore.collectionGroup(t);return new iF(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new DR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(es.Dh),u.LFG(es.xv,8),u.LFG(sF,8),u.LFG(aF,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Zn.HU),u.LFG(oF,8),u.LFG(lF,8),u.LFG(yR,8),u.LFG(dR,8),u.LFG(hR,8),u.LFG(fR,8),u.LFG(pR,8),u.LFG(gR,8),u.LFG(mR,8),u.LFG(BD,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const TR="firebasestorage.googleapis.com",SR="storageBucket";class Cr extends Rt.ZR{constructor(e,t){super(iI(e),`Firebase Storage: ${t} (${iI(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cr.prototype)}_codeEquals(e){return iI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function iI(n){return"storage/"+n}function sI(){return new Cr("unknown","An unknown error occurred, please check the error payload for server response.")}function IR(){return new Cr("canceled","User canceled the upload/download.")}function AR(){return new Cr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ey(n){return new Cr("invalid-argument",n)}function NR(){return new Cr("app-deleted","The Firebase app was deleted.")}function RR(n){return new Cr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nb(n,e){return new Cr("invalid-format","String does not match format '"+n+"': "+e)}function Rb(n){throw new Cr("internal-error","Internal error: "+n)}class ss{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ss.makeFromUrl(e,t)}catch(i){return new ss(e,"")}if(""===r.path)return r;throw function vF(n){return new Cr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Me){Me.path_=decodeURIComponent(Me.path)}const N=t.replace(/[.]/g,"\\."),Je=[{regex:p,indices:{bucket:1,path:3},postModify:function a(Me){"/"===Me.path.charAt(Me.path.length-1)&&(Me.path_=Me.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===TR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Me=0;Me<Je.length;Me++){const ze=Je[Me],We=ze.regex.exec(e);if(We){let At=We[ze.indices.path];At||(At=""),r=new ss(We[ze.indices.bucket],At),ze.postModify(r);break}}if(null==r)throw function yF(n){return new Cr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class DF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jD(n){return"string"==typeof n||n instanceof String}function MR(n){return oI()&&n instanceof Blob}function oI(){return"undefined"!=typeof Blob}function aI(n,e,t,r){if(r<e)throw ey(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ey(`Invalid value for '${n}'. Expected ${t} or less.`)}function id(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function xR(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ef=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(ef||(ef={})),ef))();class NF{constructor(e,t,r,i,a,d,p,_,E,S,N){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=S,this.connectionFactory_=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,L)=>{this.resolve_=O,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,d=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function SF(n){return void 0!==n}(_)?a():a(_)}catch(_){d(_)}else if(null!==p){const _=sI();_.serverResponse=p.getErrorText(),d(this.errorCallback_?this.errorCallback_(p,_):_)}else d(i.canceled?this.appDelete_?NR():IR():function _F(){return new Cr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new GD(!1,null,!0)):this.backoffId_=function CF(n,e,t){let r=1,i=null,a=null,d=!1,p=0;function _(){return 2===p}let E=!1;function S(...ve){E||(E=!0,e.apply(null,ve))}function N(ve){i=setTimeout(()=>{i=null,n(L,_())},ve)}function O(){a&&clearTimeout(a)}function L(ve,...Fe){if(E)return void O();if(ve)return O(),void S.call(null,ve,...Fe);if(_()||d)return O(),void S.call(null,ve,...Fe);let Je;r<64&&(r*=2),1===p?(p=2,Je=0):Je=1e3*(r+Math.random()),N(Je)}let $=!1;function te(ve){$||($=!0,O(),!E&&(null!==i?(ve||(p=2),clearTimeout(i),N(0)):ve||(p=1)))}return N(0),a=setTimeout(()=>{d=!0,te(!0)},t),te}((r,i)=>{if(i)return void r(!1,new GD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const d=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(d),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(d),this.pendingConnection_=null;const p=a.getErrorCode()===ef.NO_ERROR,_=a.getStatus();if(!p||this.isRetryStatusCode_(_)){const S=a.getErrorCode()===ef.ABORT;return void r(!1,new GD(!1,null,S))}const E=-1!==this.successCodes_.indexOf(_);r(!0,new GD(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function TF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class GD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function FF(...n){const e=function PF(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(oI())return new Blob(n);throw new Cr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Go={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lI{constructor(e,t){this.data=e,this.contentType=t||null}}function uI(n,e){switch(n){case Go.RAW:return new lI(OR(e));case Go.BASE64:case Go.BASE64URL:return new lI(kR(n,e));case Go.DATA_URL:return new lI(function UF(n){const e=new PR(n);return e.base64?kR(Go.BASE64,e.rest):function BF(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Nb(Go.DATA_URL,"Malformed data URL.")}return OR(e)}(e.rest)}(e),function jF(n){return new PR(n).contentType}(e))}throw sI()}function OR(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function kR(n,e){switch(n){case Go.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Nb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Go.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Nb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function VF(n){return atob(n)}(e)}catch(i){throw Nb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class PR{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Nb(Go.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function GF(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class bu{constructor(e,t){let r=0,i="";MR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(MR(this.data_)){const i=function LF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new bu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bu(r,!0)}}static getBlob(...e){if(oI()){const t=e.map(r=>r instanceof bu?r.data_:r);return new bu(FF.apply(null,t))}{const t=e.map(d=>jD(d)?uI(Go.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)i[a++]=d[p]}),new bu(i,!0)}}uploadData(){return this.data_}}function cI(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function AF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function FR(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function qF(n,e){return e}class Rs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||qF}}let HD=null;function Mb(){if(HD)return HD;const n=[];n.push(new Rs("bucket")),n.push(new Rs("generation")),n.push(new Rs("metageneration")),n.push(new Rs("name","fullPath",!0));const t=new Rs("name");t.xform=function e(a,d){return function zF(n){return!jD(n)||n.length<2?n:FR(n)}(d)},n.push(t);const i=new Rs("size");return i.xform=function r(a,d){return void 0!==d?Number(d):d},n.push(i),n.push(new Rs("timeCreated")),n.push(new Rs("updated")),n.push(new Rs("md5Hash",null,!0)),n.push(new Rs("cacheControl",null,!0)),n.push(new Rs("contentDisposition",null,!0)),n.push(new Rs("contentEncoding",null,!0)),n.push(new Rs("contentLanguage",null,!0)),n.push(new Rs("contentType",null,!0)),n.push(new Rs("metadata","customMetadata",!0)),HD=n,HD}function LR(n,e,t){const r=cI(e);return null===r?null:function ZF(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const d=t[a];r[d.local]=d.xform(r,e[d.server])}return function WF(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ss(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function dI(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const VR="prefixes";class wu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Eu(n){if(!n)throw sI()}function $D(n,e){return function t(r,i){const a=LR(n,i,e);return Eu(null!==a),a}}function ty(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function gF(){return new Cr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function pF(){return new Cr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function fF(n){return new Cr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function mF(n){return new Cr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function xb(n){const e=ty(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function hF(n){return new Cr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function UR(n,e,t){const i=id(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new wu(i,"GET",$D(n,t),d);return p.errorHandler=xb(e),p}function eL(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=id(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,S=new wu(p,"GET",function QF(n,e){return function t(r,i){const a=function JF(n,e,t){const r=cI(t);return null===r?null:function YF(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[VR])for(const i of t[VR]){const a=i.replace(/\/$/,""),d=n._makeStorageReference(new ss(e,a));r.prefixes.push(d)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ss(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Eu(null!==a),a}}(n,e.bucket),E);return S.urlParams=a,S.errorHandler=ty(e),S}function GR(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class qD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function hI(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Eu(!1)}return Eu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const lL={STATE_CHANGED:"state_changed"},Ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fI(n){switch(n){case"running":case"pausing":case"canceling":return Ms.RUNNING;case"paused":return Ms.PAUSED;case"success":return Ms.SUCCESS;case"canceled":return Ms.CANCELED;default:return Ms.ERROR}}class uL{constructor(e,t,r){if(function IF(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function ny(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class dL extends class cL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ef.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ef.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ef.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Rb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Rb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function rl(){return new dL}class zR{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Mb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function sL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),d=GR(e,r,i),p={name:d.fullPath},_=id(a,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},N=dI(d,t),$=new wu(_,"POST",function L(te){let ve;hI(te);try{ve=te.getResponseHeader("X-Goog-Upload-URL")}catch(Fe){Eu(!1)}return Eu(jD(ve)),ve},n.maxUploadRetryTime);return $.urlParams=p,$.headers=S,$.body=N,$.errorHandler=ty(e),$}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,rl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function oL(n,e,t,r){const _=new wu(t,"POST",function a(E){const S=hI(E,["active","final"]);let N=null;try{N=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){Eu(!1)}N||Eu(!1);const O=Number(N);return Eu(!isNaN(O)),new qD(O,r.size(),"final"===S)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=ty(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,rl,t,r);this._request=a,a.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new qD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let d;try{d=function aL(n,e,t,r,i,a,d,p){const _=new qD(0,0);if(d?(_.current=d.current,_.total=d.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function wF(){return new Cr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let S=E;i>0&&(S=Math.min(S,i));const N=_.current,$={"X-Goog-Upload-Command":S===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},te=r.slice(N,N+S);if(null===te)throw AR();const Je=new wu(t,"POST",function ve(Me,ze){const We=hI(Me,["active","final"]),Bt=_.current+S,At=r.size();let Tn;return Tn="final"===We?$D(e,a)(Me,ze):null,new qD(Bt,At,"final"===We,Tn)},e.maxUploadRetryTime);return Je.headers=$,Je.body=te.uploadData(),Je.progressCallback=p||null,Je.errorHandler=ty(n),Je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(d,rl,i,a);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=UR(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,rl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function HR(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let Je="";for(let Me=0;Me<2;Me++)Je+=Math.random().toString().slice(2);return Je}();d["Content-Type"]="multipart/related; boundary="+_;const E=GR(e,r,i),S=dI(E,t),L=bu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===L)throw AR();const $={name:E.fullPath},te=id(a,n.host,n._protocol),Fe=n.maxUploadRetryTime,Ae=new wu(te,"POST",$D(n,t),Fe);return Ae.urlParams=$,Ae.headers=d,Ae.body=L.uploadData(),Ae.errorHandler=ty(e),Ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,rl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=IR(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=fI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new uL(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(fI(this._state)){case Ms.SUCCESS:ny(this._resolve.bind(null,this.snapshot))();break;case Ms.CANCELED:case Ms.ERROR:ny(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(fI(this._state)){case Ms.RUNNING:case Ms.PAUSED:e.next&&ny(e.next.bind(e,this.snapshot))();break;case Ms.SUCCESS:e.complete&&ny(e.complete.bind(e))();break;default:e.error&&ny(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class mg{constructor(e,t){this._service=e,this._location=t instanceof ss?t:ss.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mg(e,t)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FR(this._location.path)}get storage(){return this._service}get parent(){const e=function HF(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ss(this._location.bucket,e);return new mg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw RR(e)}}function ZR(n,e,t){return pI.apply(this,arguments)}function pI(){return pI=(0,ye.Z)(function*(n,e,t){const i=yield KR(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield ZR(n,e,i.nextPageToken))}),pI.apply(this,arguments)}function KR(n,e){null!=e&&"number"==typeof e.maxResults&&aI("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,rl)}function DL(n){n._throwIfRoot("getDownloadURL");const e=function tL(n,e,t){const i=id(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new wu(i,"GET",function XF(n,e){return function t(r,i){const a=LR(n,i,e);return Eu(null!==a),function KF(n,e,t,r){const i=cI(e);if(null===i||!jD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const d=encodeURIComponent;return a.split(",").map(E=>{const N=n.fullPath;return id("/b/"+d(n.bucket)+"/o/"+d(N),t,r)+xR({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),d);return p.errorHandler=xb(e),p}(n.storage,n._location,Mb());return n.storage.makeRequestWithTokens(e,rl).then(t=>{if(null===t)throw function EF(){return new Cr("no-download-url","The given file does not have any download URLs.")}();return t})}function YR(n,e){const t=function $F(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ss(n._location.bucket,t);return new mg(n.storage,r)}function JR(n,e){if(n instanceof gI){const t=n;if(null==t._bucket)throw function bF(){return new Cr("no-default-bucket","No default bucket found. Did you set the '"+SR+"' property when initializing the app?")}();const r=new mg(t,t._bucket);return null!=e?JR(r,e):r}return void 0!==e?YR(n,e):n}function IL(n,e){if(e&&function TL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof gI)return function SL(n,e){return new mg(n,e)}(n,e);throw ey("To use ref(service, url), the first argument must be a Storage instance.")}return JR(n,e)}function QR(n,e){const t=null==e?void 0:e[SR];return null==t?null:ss.makeFromBucketSpec(t,n)}class gI{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=TR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ss.makeFromBucketSpec(i,this._host):QR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ss.makeFromBucketSpec(this._url,e):QR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new DF(NR());{const a=function kF(n,e,t,r,i,a){const d=xR(n.urlParams),p=n.url+d,_=Object.assign({},n.headers);return function xF(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function RF(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function MF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function OF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new NF(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const XR="@firebase/storage";function nM(n,e){return IL(n=(0,Rt.m9)(n),e)}function VL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gI(t,r,i,e,ha.SDK_VERSION)}!function BL(){(0,ha._registerComponent)(new Gf.wA("storage",VL,"PUBLIC").setMultipleInstances(!0)),(0,ha.registerVersion)(XR,"0.9.4",""),(0,ha.registerVersion)(XR,"0.9.4","esm2017")}();class zD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class rM{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new zD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new zD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?d=>t(new zD(d,this,this._ref)):{next:t.next?d=>t.next(new zD(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class iM{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sd(e,this._service))}get items(){return this._delegate.items.map(e=>new sd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function FL(n,e){return YR(n,e)}(this._delegate,e);return new sd(t,this.storage)}get root(){return new sd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new rM(function NL(n,e,t){return function yL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new zR(n,new bu(e),t)}(n=(0,Rt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Go.RAW,r){this._throwIfRoot("putString");const i=uI(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new rM(new zR(this._delegate,new bu(i.data,!0),a),this)}listAll(){return function OL(n){return function bL(n){const e={prefixes:[],items:[]};return ZR(n,e).then(()=>e)}(n=(0,Rt.m9)(n))}(this._delegate).then(e=>new iM(e,this.storage))}list(e){return function xL(n,e){return KR(n=(0,Rt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new iM(t,this.storage))}getMetadata(){return function RL(n){return function wL(n){n._throwIfRoot("getMetadata");const e=UR(n.storage,n._location,Mb());return n.storage.makeRequestWithTokens(e,rl)}(n=(0,Rt.m9)(n))}(this._delegate)}updateMetadata(e){return function ML(n,e){return function EL(n,e){n._throwIfRoot("updateMetadata");const t=function nL(n,e,t,r){const a=id(e.fullServerUrl(),n.host,n._protocol),p=dI(t,r),E=n.maxOperationRetryTime,S=new wu(a,"PATCH",$D(n,r),E);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=p,S.errorHandler=xb(e),S}(n.storage,n._location,e,Mb());return n.storage.makeRequestWithTokens(t,rl)}(n=(0,Rt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function kL(n){return DL(n=(0,Rt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function PL(n){return function CL(n){n._throwIfRoot("deleteObject");const e=function rL(n,e){const r=id(e.fullServerUrl(),n.host,n._protocol),p=new wu(r,"DELETE",function d(_,E){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=xb(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,rl)}(n=(0,Rt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw RR(e)}}class sM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(oM(e))throw ey("ref() expected a child path but got a URL, use refFromURL instead.");return new sd(nM(this._delegate,e),this)}refFromURL(e){if(!oM(e))throw ey("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ss.makeFromUrl(e,this._delegate.host)}catch(t){throw ey("refFromUrl() expected a valid full URL but got an invalid one.")}return new sd(nM(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function LL(n,e,t,r={}){!function AL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Rt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function oM(n){return/^[A-Za-z]+:\/\//.test(n)}function HL(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new sM(t,r)}function aM(n){const e=function qL(n){return new xn.y(e=>{const t=d=>e.next(d);t(n.snapshot);const a=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){a()}}).pipe(function uF(n,e=jf.z){return(0,or.e)((t,r)=>{let i=null,a=null,d=null;const p=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function _(){const E=d+n,S=e.now();if(S<E)return i=this.schedule(void 0,E-S),void r.add(i);p()}t.subscribe((0,nn.x)(r,E=>{a=E,d=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,at.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function WD(n){return{getDownloadURL:()=>ht(void 0).pipe(Zn.fc,V(()=>n.getDownloadURL()),Zn.iC),getMetadata:()=>ht(void 0).pipe(Zn.fc,V(()=>n.getMetadata()),Zn.iC),delete:()=>(0,Zt.D)(n.delete()),child:e=>WD(n.child(e)),updateMetadata:e=>(0,Zt.D)(n.updateMetadata(e)),put:(e,t)=>aM(n.put(e,t)),putString:(e,t,r)=>aM(n.putString(e,t,r)),list:e=>(0,Zt.D)(n.list(e)),listAll:()=>(0,Zt.D)(n.listAll())}}!function $L(n){const e={TaskState:Ms,TaskEvent:lL,StringFormat:Go,Storage:sM,Reference:sd};n.INTERNAL.registerComponent(new Gf.wA("storage-compat",HL,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(qC.Z);const zL=new u.OlP("angularfire2.storageBucket"),WL=new u.OlP("angularfire2.storage.maxUploadRetryTime"),ZL=new u.OlP("angularfire2.storage.maxOperationRetryTime"),KL=new u.OlP("angularfire2.storage.use-emulator");let lM=(()=>{class n{constructor(t,r,i,a,d,p,_,E,S,N){const O=(0,es.on)(t,d,r);this.storage=(0,es.cc)(`${O.name}.storage.${i}`,"AngularFireStorage",O.name,()=>{const L=d.runOutsideAngular(()=>O.storage(i||void 0)),$=S;return $&&L.useEmulator(...$),_&&L.setMaxUploadRetryTime(_),E&&L.setMaxOperationRetryTime(E),L},[_,E])}ref(t){return WD(this.storage.ref(t))}refFromURL(t){return WD(this.storage.refFromURL(t))}upload(t,r,i){return WD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(es.Dh),u.LFG(es.xv,8),u.LFG(zL,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Zn.HU),u.LFG(WL,8),u.LFG(ZL,8),u.LFG(KL,8),u.LFG(BD,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),JL=(()=>{class n{constructor(){QP.Z.registerVersion("angularfire",Zn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[lM],imports:[YL]}),n})(),uM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),_g=(()=>{class n extends uM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Ea=new u.OlP("NgValueAccessor"),e2={provide:Ea,useExisting:(0,u.Gpc)(()=>Ob),multi:!0},n2=new u.OlP("CompositionEventMode");let Ob=(()=>{class n extends uM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function t2(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(n2,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([e2]),u.qOj]}),n})();function tf(n){return null==n||0===n.length}const os=new u.OlP("NgValidators"),nf=new u.OlP("NgAsyncValidators");function pM(n){return tf(n.value)?{required:!0}:null}function ZD(n){return null}function bM(n){return null!=n}function wM(n){const e=(0,u.QGY)(n)?(0,Zt.D)(n):n;return(0,u.CqO)(e),e}function EM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function DM(n,e){return e.map(t=>t(n))}function CM(n){return n.map(e=>function s2(n){return!n.validate}(e)?e:t=>e.validate(t))}function mI(n){return null!=n?function TM(n){if(!n)return null;const e=n.filter(bM);return 0==e.length?null:function(t){return EM(DM(t,e))}}(CM(n)):null}function _I(n){return null!=n?function SM(n){if(!n)return null;const e=n.filter(bM);return 0==e.length?null:function(t){return function QL(...n){const e=(0,Ki.jO)(n),{args:t,keys:r}=Xu(n),i=new xn.y(a=>{const{length:d}=t;if(!d)return void a.complete();const p=new Array(d);let _=d,E=d;for(let S=0;S<d;S++){let N=!1;(0,Dr.Xf)(t[S]).subscribe((0,nn.x)(a,O=>{N||(N=!0,E--),p[S]=O},()=>_--,void 0,()=>{(!_||!N)&&(E||a.next(r?ec(r,p):p),a.complete())}))}});return e?i.pipe(eo(e)):i}(DM(t,e).map(wM)).pipe((0,at.U)(EM))}}(CM(n)):null}function IM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yI(n){return n?Array.isArray(n)?n:[n]:[]}function KD(n,e){return Array.isArray(n)?n.includes(e):n===e}function RM(n,e){const t=yI(e);return yI(n).forEach(i=>{KD(t,i)||t.push(i)}),t}function MM(n,e){return yI(e).filter(t=>!KD(n,t))}class xM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_I(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rf extends xM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xs extends xM{get formDirective(){return null}get path(){return null}}class OM{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let vI=(()=>{class n extends OM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(rf,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),kM=(()=>{class n extends OM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function kb(n,e){EI(n,e),e.valueAccessor.writeValue(n.value),function f2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FM(n,e)})}(n,e),function g2(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function p2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function h2(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function XD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function EI(n,e){const t=function AM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(IM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function NM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(IM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();XD(e._rawValidators,i),XD(e._rawAsyncValidators,i)}function FM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Pb="VALID",tC="INVALID",ry="PENDING",Fb="DISABLED";function II(n){return(nC(n)?n.validators:n)||null}function UM(n){return Array.isArray(n)?mI(n):n||null}function AI(n,e){return(nC(e)?e.asyncValidators:n)||null}function jM(n){return Array.isArray(n)?_I(n):n||null}function nC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const NI=n=>n instanceof MI;function HM(n){return(n=>n instanceof zM)(n)?n.value:n.getRawValue()}function $M(n,e){const t=NI(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[e])throw new u.vHH(1001,"")}function qM(n,e){NI(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new u.vHH(1002,"")})}class RI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=UM(this._rawValidators),this._composedAsyncValidatorFn=jM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Pb}get invalid(){return this.status===tC}get pending(){return this.status==ry}get disabled(){return this.status===Fb}get enabled(){return this.status!==Fb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=UM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jM(e)}addValidators(e){this.setValidators(RM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MM(e,this._rawAsyncValidators))}hasValidator(e){return KD(this._rawValidators,e)}hasAsyncValidator(e){return KD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ry,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fb,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pb,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pb||this.status===ry)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fb:Pb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ry,this._hasOwnPendingAsyncValidator=!0;const t=wM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function v2(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=NI(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof w2)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Fb:this.errors?tC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ry)?ry:this._anyControlsHaveStatus(tC)?tC:Pb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class zM extends RI{constructor(e=null,t,r){super(II(t),AI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nC(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class MI extends RI{constructor(e,t,r){super(II(t),AI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){qM(this,e),Object.keys(e).forEach(r=>{$M(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=HM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class w2 extends RI{constructor(e,t,r){super(II(t),AI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){qM(this,e),e.forEach((r,i)=>{$M(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>HM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const E2={provide:xs,useExisting:(0,u.Gpc)(()=>rC)},Lb=(()=>Promise.resolve(null))();let rC=(()=>{class n extends xs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new MI({},mI(t),_I(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Lb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),kb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Lb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Lb.then(()=>{const r=this._findContainer(t.path),i=new MI({});(function LM(n,e){EI(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Lb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Lb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function BM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(os,10),u.Y36(nf,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([E2]),u.qOj]}),n})();const C2={provide:rf,useExisting:(0,u.Gpc)(()=>iC)},KM=(()=>Promise.resolve(null))();let iC=(()=>{class n extends rf{constructor(t,r,i,a,d){super(),this._changeDetectorRef=d,this.control=new zM,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function CI(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Ob?t=a:function y2(n){return Object.getPrototypeOf(n.constructor)===_g}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function DI(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){KM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;KM.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?function JD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xs,9),u.Y36(os,10),u.Y36(nf,10),u.Y36(Ea,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([C2]),u.qOj,u.TTD]}),n})(),YM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const T2={provide:Ea,useExisting:(0,u.Gpc)(()=>xI),multi:!0};let xI=(()=>{class n extends _g{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([T2]),u.qOj]}),n})(),JM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const k2={provide:Ea,useExisting:(0,u.Gpc)(()=>Vb),multi:!0};function ix(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Vb=(()=>{class n extends _g{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=ix(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function P2(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([k2]),u.qOj]}),n})(),FI=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(ix(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Vb,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const F2={provide:Ea,useExisting:(0,u.Gpc)(()=>LI),multi:!0};function sx(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let LI=(()=>{class n extends _g{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,d)=>{a._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const d=a;for(let p=0;p<d.length;p++){const E=this._getOptionValue(d[p].value);i.push(E)}}else{const d=r.options;for(let p=0;p<d.length;p++){const _=d[p];if(_.selected){const E=this._getOptionValue(_.value);i.push(E)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function L2(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([F2]),u.qOj]}),n})(),VI=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(sx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(LI,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),yg=(()=>{class n{constructor(){this._validator=ZD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ZD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const j2={provide:os,useExisting:(0,u.Gpc)(()=>sC),multi:!0};let sC=(()=>{class n extends yg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function V2(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>pM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([j2]),u.qOj]}),n})();const z2={provide:os,useExisting:(0,u.Gpc)(()=>BI),multi:!0};let BI=(()=>{class n extends yg{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>function vM(n){if(!n)return ZD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(tf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[u._Bn([z2]),u.qOj]}),n})(),W2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[JM]]}),n})(),px=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[W2]}),n})();function Z2(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," Please enter a valid recipe name "),u.qZA())}function K2(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," Recipe name is required "),u.qZA())}function Y2(n,e){if(1&n&&(u.TgZ(0,"div",33),u.YNc(1,Z2,2,0,"div",34),u.YNc(2,K2,2,0,"div",34),u.qZA()),2&n){u.oxw();const t=u.MAs(13);u.xp6(1),u.Q6J("ngIf",null==t.errors?null:t.errors.pattern),u.xp6(1),u.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function J2(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," Please enter an integer greater than zero "),u.qZA())}function Q2(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Time is required"),u.qZA())}function X2(n,e){if(1&n&&(u.TgZ(0,"div",33),u.YNc(1,J2,2,0,"div",34),u.YNc(2,Q2,2,0,"div",34),u.qZA()),2&n){u.oxw();const t=u.MAs(19);u.xp6(1),u.Q6J("ngIf",null==t.errors?null:t.errors.pattern),u.xp6(1),u.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function eV(n,e){if(1&n&&(u.TgZ(0,"option",35),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.hij(" ",t," ")}}function tV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",36)(1,"input",37,9),u.NdJ("ngModelChange",function(i){return u.CHM(t).$implicit.value=i}),u.qZA(),u.TgZ(3,"button",38),u.NdJ("click",function(){const a=u.CHM(t).index;return u.oxw().removeIngredient(a)}),u._UZ(4,"i",39),u.qZA()()}if(2&n){const t=e.$implicit,r=e.index;u.xp6(1),u.MGl("name","value",r,""),u.Q6J("ngModel",t.value)}}function nV(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," Please enter a description "),u.qZA())}function rV(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," Description is required "),u.qZA())}function iV(n,e){if(1&n&&(u.TgZ(0,"div",33),u.YNc(1,nV,2,0,"div",34),u.YNc(2,rV,2,0,"div",34),u.qZA()),2&n){u.oxw();const t=u.MAs(43);u.xp6(1),u.Q6J("ngIf",null==t.errors?null:t.errors.pattern),u.xp6(1),u.Q6J("ngIf",null==t.errors?null:t.errors.required)}}let sV=(()=>{class n{constructor(t,r,i,a){this.aRoute=t,this.firestore=r,this.afStorage=i,this.router=a,this.keys=["LUNCH","SOUP","VEGETARIAN","DESSERT","DRINKS","SALAD","BREAKFAST"],this.recipeCollection=this.firestore.collection("recipes"),this.ingredients=[]}ngOnInit(){this.aRoute.params.subscribe(t=>{const r=t.id;"0"!==r?this.firestore.collection("recipes").doc(r).get().subscribe(i=>this.recipe=i.data()):this.recipe=new bA})}removeIngredient(t){this.ingredients.splice(t,1)}addIngredient(){this.ingredients.push({value:""}),console.log()}upload(t){this.imageFile=t.target.files[0];const r=Math.random().toString(36).substring(2);this.ref=this.afStorage.ref(r),this.task=this.ref.put(this.imageFile),this.task.snapshotChanges().pipe(Ui(()=>{this.ref.getDownloadURL().subscribe(i=>{console.log("url: ",i),this.recipe.imgUrl=i})})).subscribe()}onCreate(){this.recipe.category=this.selectedOption,this.recipe.ingredients=this.ingredients,console.log("selected: ",this.selectedOption);const t=Object.assign({},this.recipe);console.log(t),delete t.id,this.recipeCollection.add(t),this.router.navigate(["/","recipes"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wn),u.Y36(rI),u.Y36(lM),u.Y36(Gi))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit-recipe"]],decls:48,vars:10,consts:[[1,"row"],[1,"col-md-6","offset-3","col-sm-8","mt-5","mb-5"],[1,"card"],[1,"card-header"],[1,"card-body"],["recipeForm","ngForm"],[1,"form-group","mb-3"],["for","name"],["type","text","name","name","id","name","pattern","^[-a-zA-Z\u0151\xfa\xf3\xe9\xe1\u0171\xed 0-9]{2,}$","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"mb-4"],["for","time"],["type","number","name","time","pattern","^[1-9]{1}[0-9]*$","id","time","required","",1,"form-control",3,"ngModel","ngModelChange"],["time","ngModel"],[1,"input-group","mb-4"],["id","inputGroupSelect02","required","","name","categorySelect",1,"form-select",3,"ngModel","ngModelChange"],["required","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","categorySelect",1,"input-group-text"],["for","",1,"w-100","mb-2"],[1,"w-100","input-group"],["class","w-100 mb-2 input-group",4,"ngFor","ngForOf"],[1,"w-100","d-flex","justify-content-center"],["type","button",1,"btn","btn-outline-success","ingredients_button","mb-2",3,"click"],["aria-hidden","true",1,"fa","fa-plus-circle","fa-lg","ingredients_icons"],["type","file","id","file","accept",".png,.jpg","name","fileInput",1,"form-control",3,"change"],[1,"input-group","mb-5"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","aria-label","Description","name","description","id","description","required","",1,"form-control",3,"ngModel","ngModelChange"],["description","ngModel"],["type","button",1,"btn","btn-secondary","btn-block","w-100",3,"disabled","click"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],[3,"value"],[1,"w-100","mb-2","input-group"],["type","text",1,"form-control",3,"ngModel","name","ngModelChange"],["type","button","id","button-addon2",1,"btn","btn-outline-danger","ingredients_button",3,"click"],["aria-hidden","true",1,"fa","fa-minus-circle","fa-lg","ingredients_icons"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),u._uU(5,"Add new recipe"),u.qZA()(),u.TgZ(6,"div",4)(7,"form",null,5)(9,"div",6)(10,"label",7),u._uU(11,"Name:"),u.qZA(),u.TgZ(12,"input",8,9),u.NdJ("ngModelChange",function(a){return r.recipe.name=a}),u.qZA(),u.YNc(14,Y2,3,2,"div",10),u.qZA(),u.TgZ(15,"div",11)(16,"label",12),u._uU(17,"Time (in minutes):"),u.qZA(),u.TgZ(18,"input",13,14),u.NdJ("ngModelChange",function(a){return r.recipe.time=a}),u.qZA(),u.YNc(20,X2,3,2,"div",10),u.qZA(),u.TgZ(21,"div",15)(22,"select",16),u.NdJ("ngModelChange",function(a){return r.selectedOption=a}),u.TgZ(23,"option",17),u._uU(24,"Choose..."),u.qZA(),u.YNc(25,eV,2,2,"option",18),u.qZA(),u.TgZ(26,"label",19),u._uU(27,"Category"),u.qZA()(),u.TgZ(28,"div",11)(29,"label",20),u._uU(30,"Ingredients:"),u.qZA(),u.TgZ(31,"div",21),u.YNc(32,tV,5,2,"div",22),u.qZA(),u.TgZ(33,"div",23)(34,"button",24),u.NdJ("click",function(){return r.addIngredient()}),u._UZ(35,"i",25),u.qZA()()(),u.TgZ(36,"div",15)(37,"input",26),u.NdJ("change",function(a){return r.upload(a)}),u.qZA()(),u.TgZ(38,"div",27)(39,"div",28)(40,"span",29),u._uU(41,"Description"),u.qZA()(),u.TgZ(42,"textarea",30,31),u.NdJ("ngModelChange",function(a){return r.recipe.description=a}),u.qZA(),u.YNc(44,iV,3,2,"div",10),u.qZA(),u.TgZ(45,"div")(46,"button",32),u.NdJ("click",function(){return r.onCreate()}),u._uU(47," Submit "),u.qZA()()()()()()()),2&t){const i=u.MAs(8),a=u.MAs(13),d=u.MAs(19),p=u.MAs(43);u.xp6(12),u.Q6J("ngModel",null==r.recipe?null:r.recipe.name),u.xp6(2),u.Q6J("ngIf",a.invalid&&a.touched),u.xp6(4),u.Q6J("ngModel",null==r.recipe?null:r.recipe.time),u.xp6(2),u.Q6J("ngIf",d.invalid&&d.touched),u.xp6(2),u.Q6J("ngModel",r.selectedOption),u.xp6(3),u.Q6J("ngForOf",r.keys),u.xp6(7),u.Q6J("ngForOf",r.ingredients),u.xp6(10),u.Q6J("ngModel",null==r.recipe?null:r.recipe.description),u.xp6(2),u.Q6J("ngIf",p.invalid&&p.touched),u.xp6(2),u.Q6J("disabled",i.invalid)}},directives:[YM,kM,rC,Ob,BI,sC,vI,iC,vr,xI,Vb,FI,VI,Sn],styles:[".card-header[_ngcontent-%COMP%]{text-align:center}"]}),n})();var oV=k(1144);const aV=["addListener","removeListener"],lV=["addEventListener","removeEventListener"],uV=["on","off"];function Os(n,e,t,r){if((0,Pi.m)(t)&&(r=t,t=void 0),r)return Os(n,e,t).pipe(eo(r));const[i,a]=function hV(n){return(0,Pi.m)(n.addEventListener)&&(0,Pi.m)(n.removeEventListener)}(n)?lV.map(d=>p=>n[d](e,p,t)):function cV(n){return(0,Pi.m)(n.addListener)&&(0,Pi.m)(n.removeListener)}(n)?aV.map(gx(n,e)):function dV(n){return(0,Pi.m)(n.on)&&(0,Pi.m)(n.off)}(n)?uV.map(gx(n,e)):[];if(!i&&(0,oV.z)(n))return(0,Cn.z)(d=>Os(d,e,t))((0,Dr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new xn.y(d=>{const p=(..._)=>d.next(1<_.length?_:_[0]);return i(p),()=>a(p)})}function gx(n,e){return t=>r=>n[t](e,r)}var fV=k(3532);function UI(n=0,e,t=jf.P){let r=-1;return null!=e&&((0,fV.K)(e)?t=e:r=e),new xn.y(i=>{let a=function pV(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},a)})}const{isArray:gV}=Array;function mx(n){return 1===n.length&&gV(n[0])?n[0]:n}var oC=k(5032);const yx=new xn.y(oC.Z);function aC(...n){const e=(0,Ki.jO)(n),t=mx(n);return t.length?new xn.y(r=>{let i=t.map(()=>[]),a=t.map(()=>!1);r.add(()=>{i=a=null});for(let d=0;!r.closed&&d<t.length;d++)(0,Dr.Xf)(t[d]).subscribe((0,nn.x)(r,p=>{if(i[d].push(p),i.every(_=>_.length)){const _=i.map(E=>E.shift());r.next(e?e(..._):_),i.some((E,S)=>!E.length&&a[S])&&r.complete()}},()=>{a[d]=!0,!i[d].length&&r.complete()}));return()=>{i=a=null}}):Qi.E}function gi(n){return(0,or.e)((e,t)=>{(0,Dr.Xf)(n).subscribe((0,nn.x)(t,()=>t.complete(),oC.Z)),!t.closed&&e.subscribe(t)})}function jI(...n){const e=(0,Ki.jO)(n);return(0,or.e)((t,r)=>{const i=n.length,a=new Array(i);let d=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,Dr.Xf)(n[_]).subscribe((0,nn.x)(r,E=>{a[_]=E,!p&&!d[_]&&(d[_]=!0,(p=d.every(Xs.y))&&(d=null))},oC.Z));t.subscribe((0,nn.x)(r,_=>{if(p){const E=[_,...a];r.next(e?e(...E):E)}}))})}Math,Math,Math;const RB=["*"];function MB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){const a=u.CHM(t).$implicit,d=u.oxw();return d.focus(),d.select(a.id,d.NgbSlideEventSource.INDICATOR)}),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.ekj("active",t.id===r.activeId),u.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===r.activeId)}}function xB(n,e){}function OB(n,e){if(1&n&&(u.TgZ(0,"div",7)(1,"span",8),u.SDv(2,9),u.qZA(),u.YNc(3,xB,0,0,"ng-template",10),u.qZA()),2&n){const t=e.$implicit,r=e.index,i=e.count;u.Q6J("id","slide-"+t.id),u.xp6(2),u.pQV(r+1)(i),u.QtT(2),u.xp6(1),u.Q6J("ngTemplateOutlet",t.tplRef)}}function kB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){return u.CHM(t),u.oxw().arrowLeft()}),u._UZ(1,"span",12),u.TgZ(2,"span",8),u.SDv(3,13),u.qZA()()}}function PB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",14),u.NdJ("click",function(){return u.CHM(t),u.oxw().arrowRight()}),u._UZ(1,"span",15),u.TgZ(2,"span",8),u.SDv(3,16),u.qZA()()}}const ZB=["dialog"];function bg(n){return null!=n}function uy(n){return(n||document.body).getBoundingClientRect()}const Px={animation:!0,transitionTimerDelayMs:5},HU=()=>{},{transitionTimerDelayMs:$U}=Px,qb=new Map,ks=(n,e,t,r)=>{let i=r.context||{};const a=qb.get(e);if(a)switch(r.runningTransition){case"continue":return Qi.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),qb.delete(e)}const d=t(e,r.animation,i)||HU;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>d()),ht(void 0).pipe(function jU(n){return e=>new xn.y(t=>e.subscribe({next:d=>n.run(()=>t.next(d)),error:d=>n.run(()=>t.error(d)),complete:()=>n.run(()=>t.complete())}))}(n));const p=new In.x,_=new In.x,E=p.pipe(function _V(...n){return e=>Ao(e,ht(...n))}(!0));qb.set(e,{transition$:p,complete:()=>{_.next(),_.complete()},context:i});const S=function GU(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const N=Os(e,"transitionend").pipe(gi(E),Bn(({target:L})=>L===e));(function _x(...n){return 1===(n=mx(n)).length?(0,Dr.Xf)(n[0]):new xn.y(function mV(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Dr.Xf)(n[r]).subscribe((0,nn.x)(e,i=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}e.next(i)})))}}(n))})(UI(S+$U).pipe(gi(E)),N,_).pipe(gi(E)).subscribe(()=>{qb.delete(e),n.run(()=>{d(),p.next(),p.complete()})})}),p.asObservable()};let fC=(()=>{class n{constructor(){this.animation=Px.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Gx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),$x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var af=(()=>(function(n){n.START="start",n.END="end"}(af||(af={})),af))();const qx=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),zb=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},pC=n=>{zb(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},QU=(n,e,{direction:t})=>{const{classList:r}=n;return e?(qx(n)?zb(r):(r.add("carousel-item-"+(t===af.START?"next":"prev")),uy(n),r.add("carousel-item-"+t)),()=>{pC(r),r.add("active")}):(zb(r),pC(r),void r.add("active"))},XU=(n,e,{direction:t})=>{const{classList:r}=n;return e?(qx(n)?zb(r):r.add("carousel-item-"+t),()=>{pC(r),r.remove("active")}):(zb(r),pC(r),void r.remove("active"))};let ej=(()=>{class n{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fC))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tj=0,nA=(()=>{class n{constructor(t){this.tplRef=t,this.id="ngb-slide-"+tj++,this.slid=new u.vpe}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"}}),n})(),zx=(()=>{class n{constructor(t,r,i,a,d){this._platformId=r,this._ngZone=i,this._cd=a,this._container=d,this.NgbSlideEventSource=wg,this._destroy$=new In.x,this._interval$=new bn(0),this._mouseHover$=new bn(!1),this._focused$=new bn(!1),this._pauseOnHover$=new bn(!1),this._pauseOnFocus$=new bn(!1),this._pause$=new bn(!1),this._wrap$=new bn(!1),this.slide=new u.vpe,this.slid=new u.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(wg.ARROW_LEFT)}arrowRight(){this.focus(),this.next(wg.ARROW_RIGHT)}ngAfterContentInit(){(function Hr(n){return n===Hs})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=ia([this.slide.pipe((0,at.U)(r=>r.current),ee(this.activeId)),this._wrap$,this.slides.changes.pipe(ee(null))]).pipe((0,at.U)(([r,i])=>{const a=this.slides.toArray(),d=this._getSlideIdxById(r);return i?a.length>1:d<a.length-1}),Kd());ia([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,at.U)(([r,i,a,d,p,_,E])=>r||i&&a||d&&p||!E?0:_),Kd(),V(r=>r>0?UI(r,r):yx),gi(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(wg.TIMER)))}),this.slides.changes.pipe(gi(this._destroy$)).subscribe(()=>{var t;null===(t=this._transitionIds)||void 0===t||t.forEach(r=>(n=>{var e;null===(e=qb.get(n))||void 0===e||e.complete()})(this._getSlideElement(r))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe((0,W.q)(1)).subscribe(()=>{for(const{id:r}of this.slides){const i=this._getSlideElement(r);r===this.activeId?i.classList.add("active"):i.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,r){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),r)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),af.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),af.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,r,i){const a=this._transitionIds;if(a&&(a[0]!==t||a[1]!==this.activeId))return;let d=this._getSlideById(t);if(d&&d.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:d.id,direction:r,paused:this._pause$.value,source:i});const p={animation:this.animation,runningTransition:"stop",context:{direction:r}},_=[],E=this._getSlideById(this.activeId);if(E){const L=ks(this._ngZone,this._getSlideElement(E.id),XU,p);L.subscribe(()=>{E.slid.emit({isShown:!1,direction:r,source:i})}),_.push(L)}const S=this.activeId;this.activeId=d.id;const N=this._getSlideById(this.activeId),O=ks(this._ngZone,this._getSlideElement(d.id),QU,p);O.subscribe(()=>{null==N||N.slid.emit({isShown:!0,direction:r,source:i})}),_.push(O),aC(..._).pipe((0,W.q)(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:S,current:d.id,direction:r,paused:this._pause$.value,source:i})})}this._cd.markForCheck()}_getSlideEventDirection(t,r){return this._getSlideIdxById(t)>this._getSlideIdxById(r)?af.END:af.START}_getSlideById(t){return this.slides.find(r=>r.id===t)||null}_getSlideIdxById(t){const r=this._getSlideById(t);return null!=r?this.slides.toArray().indexOf(r):-1}_getNextSlide(t){const r=this.slides.toArray(),i=this._getSlideIdxById(t);return i===r.length-1?this.wrap?r[0].id:r[r.length-1].id:r[i+1].id}_getPrevSlide(t){const r=this.slides.toArray(),i=this._getSlideIdxById(t);return 0===i?this.wrap?r[r.length-1].id:r[0].id:r[i-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ej),u.Y36(u.Lbi),u.Y36(u.R0b),u.Y36(u.sBO),u.Y36(u.SBq))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,nA,4),2&t){let a;u.iGM(a=u.CRH())&&(r.slides=a)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,r){1&t&&u.NdJ("keydown.arrowLeft",function(){return r.keyboard&&r.arrowLeft()})("keydown.arrowRight",function(){return r.keyboard&&r.arrowRight()})("mouseenter",function(){return r.mouseHover=!0})("mouseleave",function(){return r.mouseHover=!1})("focusin",function(){return r.focused=!0})("focusout",function(){return r.focused=!1}),2&t&&(u.uIk("aria-activedescendant","slide-"+r.activeId),u.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],decls:6,vars:6,consts:function(){let e,t,r;return e=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,r=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],e,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],r]},template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,MB,1,5,"button",1),u.qZA(),u.TgZ(2,"div",2),u.YNc(3,OB,4,4,"div",3),u.qZA(),u.YNc(4,kB,4,0,"button",4),u.YNc(5,PB,4,0,"button",5)),2&t&&(u.ekj("visually-hidden",!r.showNavigationIndicators),u.xp6(1),u.Q6J("ngForOf",r.slides),u.xp6(2),u.Q6J("ngForOf",r.slides),u.xp6(1),u.Q6J("ngIf",r.showNavigationArrows),u.xp6(1),u.Q6J("ngIf",r.showNavigationArrows))},directives:[Sn,qo,vr],encapsulation:2,changeDetection:0}),n})();var wg=(()=>(function(n){n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator"}(wg||(wg={})),wg))();let Wx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Zx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var mi=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(mi||(mi={})),mi))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Yx=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Jx(n){const e=Array.from(n.querySelectorAll(Yx)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let sO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn,px]]}),n})(),oA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),lO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class Cg{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let Pj=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,W.q)(1)).subscribe(()=>{ks(this._zone,this._el.nativeElement,(t,r)=>{r&&uy(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ks(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(u.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),u.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class uO{close(e){}dismiss(e){}}class Fj{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new In.x,this._dismissed=new In.x,this._hidden=new In.x,e.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,d)=>{this._resolve=a,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(gi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(gi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function BU(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ht(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),aC(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Kb=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(Kb||(Kb={})),Kb))();let Lj=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new In.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new In.x,this.hidden=new In.x}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,W.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=aC(ks(this._zone,t,()=>t.classList.remove("show"),r),ks(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const t={animation:this.animation,runningTransition:"continue"};aC(ks(this._zone,this._elRef.nativeElement,(a,d)=>{d&&uy(a),a.classList.add("show")},t),ks(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Os(t,"keydown").pipe(gi(this._closed$),Bn(i=>i.which===mi.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Kb.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Os(this._dialogEl.nativeElement,"mousedown").pipe(gi(this._closed$),(0,Xn.b)(()=>r=!1),V(()=>Os(t,"mouseup").pipe(gi(this._closed$),(0,W.q)(1))),Bn(({target:i})=>t===i)).subscribe(()=>{r=!0}),Os(t,"click").pipe(gi(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(Kb.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=Jx(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ks(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ie),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&u.Gf(ZB,7),2&t){let i;u.iGM(i=u.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),u.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),u.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:RB,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div",0,1)(2,"div",2),u.Hsn(3),u.qZA()()),2&t&&u.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),Vj=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:a,paddingRight:d}=i;if(t>0){const p=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${p+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=d),i.overflow=a}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bj=(()=>{class n{constructor(t,r,i,a,d,p){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=d,this._ngZone=p,this._activeWindowCmptHasChanged=new In.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=Os(e,"focusin").pipe(gi(t),(0,at.U)(a=>a.target));Os(e,"keydown").pipe(gi(t),Bn(a=>a.which===mi.Tab),jI(i)).subscribe(([a,d])=>{const[p,_]=Jx(e);(d===p||d===e)&&a.shiftKey&&(_.focus(),a.preventDefault()),d===_&&!a.shiftKey&&(p.focus(),a.preventDefault())}),r&&Os(e,"click").pipe(gi(t),jI(i),(0,at.U)(a=>a[1])).subscribe(a=>a.focus())})})(0,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i,a){const d=a.container instanceof HTMLElement?a.container:bg(a.container)?this._document.querySelector(a.container):this._document.body,p=this._rendererFactory.createRenderer(null,null),_=()=>{this._modalRefs.length||(p.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const E=new uO,S=this._getContentRef(t,a.injector||r,i,E,a);let N=!1!==a.backdrop?this._attachBackdrop(t,d):void 0,O=this._attachWindowComponent(t,d,S),L=new Fj(O,S,N,a.beforeDismiss);return this._registerModalRef(L),this._registerWindowCmpt(O),L.result.then(_,_),E.close=$=>{L.close($)},E.dismiss=$=>{L.dismiss($)},this._applyWindowOptions(O.instance,a),1===this._modalRefs.length&&p.addClass(this._document.body,"modal-open"),N&&N.instance&&(this._applyBackdropOptions(N.instance,a),N.changeDetectorRef.detectChanges()),O.changeDetectorRef.detectChanges(),L}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let a=t.resolveComponentFactory(Pj).create(this._injector);return this._applicationRef.attachView(a.hostView),r.appendChild(a.location.nativeElement),a}_attachWindowComponent(t,r,i){let d=t.resolveComponentFactory(Lj).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{bg(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{bg(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,a,d){return i?i instanceof u.Rgc?this._createFromTemplateRef(i,a):function kx(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(t,r,i,a,d):new Cg([])}_createFromTemplateRef(t,r){const a=t.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(a),new Cg([a.rootNodes],a)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Cg([[r]])}_createFromComponent(t,r,i,a,d){const p=t.resolveComponentFactory(i),_=u.zs3.create({providers:[{provide:uO,useValue:a}],parent:r}),E=p.create(_),S=E.location.nativeElement;return d.scrollable&&S.classList.add("component-host-scrollable"),this._applicationRef.attachView(E.hostView),new Cg([[S]],E.hostView,E)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(ie),u.LFG(Vj),u.LFG(u.FYo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uj=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fC))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jj=(()=>{class n{constructor(t,r,i,a){this._moduleCFR=t,this._injector=r,this._modalStack=i,this._config=a}open(t,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(Bj),u.LFG(Uj))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[jj]}),n})(),pO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),EO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),CO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),TO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),SO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),IO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),AO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),NO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function eG(){return 100}});let RO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})();const tG=[jx,Gx,$x,Wx,Zx,sO,lO,cO,pO,EO,CO,TO,SO,IO,AO,NO,RO];let nG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[tG,jx,Gx,$x,Wx,Zx,sO,lO,cO,pO,EO,CO,TO,SO,IO,AO,NO,RO]}),n})();function rG(n,e){1&n&&(u.TgZ(0,"div",11),u._UZ(1,"img",12),u.qZA(),u.TgZ(2,"div",13)(3,"h3"),u._uU(4,"Welcome!"),u.qZA(),u.TgZ(5,"p"),u._uU(6,"It's good to have you here! Look around, have fun in our virtual snug."),u.qZA()())}function iG(n,e){1&n&&(u.TgZ(0,"div",11),u._UZ(1,"img",14),u.qZA(),u.TgZ(2,"div",13)(3,"span",15)(4,"h3"),u._uU(5,"Recipes"),u.qZA(),u.TgZ(6,"p"),u._uU(7,"We cook, bake, and share best practices, hope you find it useful"),u.qZA()()())}function sG(n,e){1&n&&(u.TgZ(0,"div",11),u._UZ(1,"img",16),u.qZA(),u.TgZ(2,"div",13)(3,"h3"),u._uU(4,"Sisters"),u.qZA(),u.TgZ(5,"p"),u._uU(6," We're Flora and Fanni, sisters, we currently live in Budapest"),u.qZA()())}let cA=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:25,vars:0,consts:[["ngbSlide",""],[1,"container","mt-5","mb-5"],[1,"row"],[1,"col-md-8","d-flex","flex-column","justify-content-center"],[1,"mb-4"],[1,"col-md-4","d-flex","flex-column","align-items-end"],["src","../../../assets/home_images/sisters_walk.jpg","alt","",1,"home_image-circle"],[1,"home_image-introduction--container"],["src","../../../assets/home_images/apple_pie.jpg","alt","",1,"home_image-introduction"],[1,"col-md-4","d-flex","flex-column","align-items-start","home_image-big"],["src","../../../assets/home_images/working.jpg","alt","",1,"home_image-circle"],[1,"picsum-img-wrapper","carousel-img"],["src","../../../assets/home_carousel/in_the_castle__new_size.jpg","alt","Random first slide"],[1,"carousel-caption"],["src","../../../assets/home_carousel/things_in_kitchen_new_size.jpg","alt","Random second slide"],[1,"carousel_caption-inside-container"],["src","../../../assets/home_carousel/coffee_together_new_size_small.jpg","alt","Random third slide",1,"d-block","mx-auto","w-100"]],template:function(t,r){1&t&&(u.TgZ(0,"div")(1,"ngb-carousel"),u.YNc(2,rG,7,0,"ng-template",0),u.YNc(3,iG,8,0,"ng-template",0),u.YNc(4,sG,7,0,"ng-template",0),u.qZA(),u.TgZ(5,"div",1)(6,"div",2)(7,"div",3)(8,"h2",4),u._uU(9,"Who are we?"),u.qZA(),u.TgZ(10,"p"),u._uU(11," Fanni and I are sisters, there is a 4 year age difference between us. We live in Cs\xe1kv\xe1r, but in recent years we both live in Budapest. Fanni is working as a toddler and will graduate now. I graduated as a special education teacher, and recently completed a junior frontend development training, so creating this website is both a hobby and a practice for me. We have another third brother, Krist\xf3f, he prefers to take part in the tasting, not so much in the cooking and baking. "),u.qZA()(),u.TgZ(12,"div",5),u._UZ(13,"img",6),u.qZA()()(),u.TgZ(14,"div",7),u._UZ(15,"img",8),u.qZA(),u.TgZ(16,"div",1)(17,"div",2)(18,"div",9),u._UZ(19,"img",10),u.qZA(),u.TgZ(20,"div",3)(21,"h2",4),u._uU(22,"About our SisMeals Project"),u.qZA(),u.TgZ(23,"p"),u._uU(24," Fanni and I really like to bake and cook. We used to ask each other in the past about recipes our other uses, we wanted to share them with each other. We first shared these with each other through a common Instagram profile, but this wasn\u2019t as convenient to use. This is why we opted for a website that is easy for both of us to edit. So if you want to add someone to this little team later, you can easily do so without the need for an Instagram account. "),u.qZA()()()()())},directives:[zx,nA],styles:[".carousel-img[_ngcontent-%COMP%]{width:100%;max-width:100vw;height:90vh;max-height:90vh;object-fit:cover;filter:grayscale(25%)}.home_image-circle[_ngcontent-%COMP%]{max-width:17vw;border-radius:50%}.home_image-introduction[_ngcontent-%COMP%]{width:100vw;max-width:100%;overflow-x:hidden;height:90vh;object-fit:cover}.home_image-big[_ngcontent-%COMP%]{max-width:100%}.carousel_caption-inside-container[_ngcontent-%COMP%]{background-color:#7fffd4}.carousel-caption[_ngcontent-%COMP%]{background-color:#2a2a2a;opacity:.7;border-radius:5px}"]}),n})();function oG(n,e){if(1&n&&(u.TgZ(0,"li",11),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",null==t?null:t.value," ")}}let aG=(()=>{class n{constructor(t,r,i){this.firestore=t,this.aRoute=r,this.router=i}ngOnInit(){this.aRoute.params.subscribe(t=>{this.recipeId=t.id,this.getRecipe()})}getRecipe(){!this.recipeId||this.firestore.collection("recipes").doc(this.recipeId).get().pipe(ri()).subscribe(t=>this.recipe=t.data())}deleteRecipe(){!this.recipeId||(this.firestore.collection("recipes").doc(this.recipeId).delete(),this.router.navigate(["/","recipes"]))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(rI),u.Y36(wn),u.Y36(Gi))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-recipe-details"]],decls:28,vars:6,consts:[[1,"container"],[1,"row","m-auto","details-row"],[1,"recipe-img-container"],["alt","Recipe image",1,"recipe-img",3,"src"],[1,"recipe-name","mt-4"],[1,"recipe-time","mt-3"],[1,"recipe-category","mt-3","mb-4"],[1,"list-group","list-group-flush","mt-2"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"recipe-description","overflow-hidden","mt-3","mb-4"],["type","button",1,"btn","alert-danger","mb-4",3,"click"],[1,"list-group-item"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u._UZ(3,"img",3),u.qZA(),u.TgZ(4,"div",4)(5,"h3"),u._uU(6),u.qZA()(),u.TgZ(7,"div",5)(8,"strong"),u._uU(9,"Duration: "),u.qZA(),u._uU(10),u.TgZ(11,"span"),u._uU(12," mins"),u.qZA()(),u.TgZ(13,"div",6)(14,"strong"),u._uU(15,"Category: "),u.qZA(),u._uU(16),u.qZA(),u.TgZ(17,"div")(18,"strong"),u._uU(19,"Ingredients: "),u.qZA(),u.TgZ(20,"ul",7),u.YNc(21,oG,2,1,"li",8),u.qZA()(),u.TgZ(22,"div",9)(23,"strong"),u._uU(24,"Description: "),u.qZA(),u._uU(25),u.qZA(),u.TgZ(26,"button",10),u.NdJ("click",function(){return r.deleteRecipe()}),u._uU(27," Delete "),u.qZA()()()),2&t&&(u.xp6(3),u.Q6J("src",null==r.recipe?null:r.recipe.imgUrl,u.LSH),u.xp6(3),u.Oqu(null==r.recipe?null:r.recipe.name),u.xp6(4),u.hij("",null==r.recipe?null:r.recipe.time," "),u.xp6(6),u.hij("",null==r.recipe||null==r.recipe.category?null:r.recipe.category.toLowerCase()," "),u.xp6(5),u.Q6J("ngForOf",null==r.recipe?null:r.recipe.ingredients),u.xp6(4),u.hij("",null==r.recipe?null:r.recipe.description," "))},directives:[Sn],styles:[".recipe-img-container[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;padding:0}.recipe-img[_ngcontent-%COMP%]{object-fit:cover;width:100%}.recipe-img-container[_ngcontent-%COMP%], .recipe-img[_ngcontent-%COMP%]{max-height:500px}@media screen and (min-width: 992px){.details-row[_ngcontent-%COMP%]{max-width:50%}}"]}),n})(),lG=(()=>{class n{transform(t,r="",i=""){return Array.isArray(t)&&r?null===t?null:t.filter(a=>a[i]===r):t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"filter",type:n,pure:!0}),n})(),uG=(()=>{class n{transform(t,r="",i=""){return Array.isArray(t)&&r?null===t?null:(r=r.toLowerCase(),t.filter(a=>String(a[i]).toLowerCase().includes(r))):t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"search",type:n,pure:!0}),n})();function cG(n,e){if(1&n&&(u.TgZ(0,"option",15),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("value",t),u.xp6(1),u.hij(" ",t," ")}}const dG=function(n){return["/recipe-details",n]};function hG(n,e){if(1&n&&(u.TgZ(0,"div",16)(1,"div")(2,"div",17)(3,"div",18),u._UZ(4,"img",19),u.qZA(),u.TgZ(5,"div",20)(6,"div",21)(7,"div"),u._UZ(8,"i",22),u.TgZ(9,"p",23),u._uU(10),u.qZA()(),u.TgZ(11,"div"),u._UZ(12,"i",24),u.TgZ(13,"p",23),u._uU(14),u.qZA()()(),u.TgZ(15,"div",25)(16,"h5",26),u._uU(17),u.qZA()()()()()()),2&n){const t=e.$implicit;u.xp6(2),u.Q6J("routerLink",u.VKq(5,dG,t.id)),u.xp6(2),u.Q6J("src",t.imgUrl,u.LSH),u.xp6(6),u.hij("",t.time," MIN"),u.xp6(4),u.Oqu(t.category),u.xp6(3),u.Oqu(t.name)}}const fG=function(){return["/edit-recipe",0]},pG=[{path:"",component:cA},{path:"home",component:cA},{path:"recipes",component:(()=>{class n{constructor(t){this.firestore=t,this.keys=["LUNCH","SOUP","VEGETARIAN","DESSERT","DRINKS","SALAD","BREAKFAST"],this.catFilter="",this.phrase="",this.recipeCollection=this.firestore.collection("recipes"),this.recipeList$=this.recipeCollection.valueChanges({idField:"id"})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(rI))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-recipes"]],decls:22,vars:16,consts:[[1,"container","mt-5","mb-4"],[1,"row","mb-4"],[1,"col-4","form-group"],["for","tableSearch",1,"mb-1"],["id","tableSearch",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-8","input_container"],["for",""],["type","text","placeholder","What kind of food are you looking for?",1,"form-control","mt-1",3,"ngModel","ngModelChange"],[1,"row","mb-5","button_container"],["type","button",1,"btn","btn-outline-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-plus-circle"],[1,"recipe_list--container"],["class","recipe_list--item",4,"ngFor","ngForOf"],[3,"value"],[1,"recipe_list--item"],[1,"card",3,"routerLink"],[1,"card_img--container"],["alt","",1,"card_img",3,"src"],[1,"card_info--container","p-2"],[1,"card_info--top"],[1,"fa","fa-clock-o","me-1"],[1,"d-inline-block"],[1,"fa","fa-tag","me-1"],[1,"card_info--title"],[1,"w-100","mb-0"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),u._uU(4,"Search by Category"),u.qZA(),u.TgZ(5,"select",4),u.NdJ("ngModelChange",function(a){return r.catFilter=a}),u.TgZ(6,"option",5),u._uU(7,"All Categorys"),u.qZA(),u.YNc(8,cG,2,2,"option",6),u.qZA()(),u.TgZ(9,"div",7)(10,"label",8),u._uU(11,"Search by Food Name"),u.qZA(),u.TgZ(12,"input",9),u.NdJ("ngModelChange",function(a){return r.phrase=a}),u.qZA()()(),u.TgZ(13,"div",10)(14,"button",11),u._UZ(15,"i",12),u._uU(16," Add new recipe "),u.qZA()(),u.TgZ(17,"div",13),u.YNc(18,hG,18,7,"div",14),u.ALo(19,"filter"),u.ALo(20,"search"),u.ALo(21,"async"),u.qZA()()),2&t&&(u.xp6(5),u.Q6J("ngModel",r.catFilter),u.xp6(3),u.Q6J("ngForOf",r.keys),u.xp6(4),u.Q6J("ngModel",r.phrase),u.xp6(2),u.Q6J("routerLink",u.DdM(15,fG)),u.xp6(4),u.Q6J("ngForOf",u.Dn7(19,5,u.Dn7(20,9,u.lcZ(21,13,r.recipeList$),r.phrase,"name"),r.catFilter,"category")))},directives:[Vb,vI,iC,FI,VI,Sn,Ob,Nt],pipes:[lG,uG,Su],styles:[".recipe_list--container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:40px;gap:40px;grid-row-gap:50px;row-gap:50px}.recipe_list--item[_ngcontent-%COMP%]{justify-self:center;align-self:center}.recipe_list--item[_ngcontent-%COMP%]:hover{cursor:pointer}.card_img--container[_ngcontent-%COMP%]{max-width:100%;width:100%}.card_img[_ngcontent-%COMP%]{max-width:100%;width:100%;height:250px;object-fit:cover}.card_info--top[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;height:30px;align-content:center;border-bottom:1px solid #dddcdc}.card_info--title[_ngcontent-%COMP%]{margin-top:5px;height:50px;display:flex;text-align:center;align-items:center}.button_container[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}"]}),n})()},{path:"recipe-details/:id",component:aG},{path:"edit-recipe/:id",component:sV},{path:"**",component:cA}];let gG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[jC.forRoot(pG)],jC]}),n})(),mG=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-navbar"]],decls:11,vars:0,consts:[[1,"navbar","navbar-expand-sm","navbar-light","bg-light","navbar_inside-container"],["href","/home",1,"navbar-brand"],["src","../../../assets/logo/sismeals_classic.png","alt","logo",1,"navbar_logo"],["type","button","data-toggle","collapse","data-target","#collapsibleNavId","aria-controls","collapsibleNavId","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","d-lg-none"],[1,"navbar-toggler-icon"],["id","collapsibleNavId",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"nav-item"],["href","/recipes",1,"nav-link"]],template:function(t,r){1&t&&(u.TgZ(0,"div")(1,"nav",0)(2,"a",1),u._UZ(3,"img",2),u.qZA(),u.TgZ(4,"button",3),u._UZ(5,"span",4),u.qZA(),u.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),u._uU(10,"Recipes"),u.qZA()()()()()())},directives:[oA],styles:[".navbar_inside-container[_ngcontent-%COMP%]{padding-left:8%;padding-top:0;padding-bottom:0}.navbar_logo[_ngcontent-%COMP%]{width:70px;height:60px;margin-right:30px}.nav-link[_ngcontent-%COMP%]{font-size:1.3rem}"]}),n})(),_G=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-footer"]],decls:13,vars:0,consts:[[1,"d-flex","flex-column","align-items-center","bg-light","pt-5","pb-3"],[1,"pb-3"],[1,"d-inline-block"],[1,"fa","fa-facebook","fa-2x"],[1,"d-inline-block","mx-4"],[1,"fa","fa-twitter","fa-2x"],[1,"fa","fa-instagram","fa-2x"],[1,"mb-1"],[1,"text-muted"]],template:function(t,r){1&t&&(u.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2),u._UZ(4,"i",3),u.qZA(),u.TgZ(5,"div",4),u._UZ(6,"i",5),u.qZA(),u.TgZ(7,"div",2),u._UZ(8,"i",6),u.qZA()(),u.TgZ(9,"p",7),u._uU(10,"sismealsrecipes@gmail.com"),u.qZA(),u.TgZ(11,"p",8),u._uU(12,"\xa9 SisMeals Recipes"),u.qZA()()())},styles:[""]}),n})(),yG=(()=>{class n{constructor(){this.title="SISMEALS-RECIPES"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,template:function(t,r){1&t&&(u.TgZ(0,"div"),u._UZ(1,"app-navbar")(2,"router-outlet")(3,"app-footer"),u.qZA())},directives:[mG,Vf,_G],styles:[""]}),n})(),vG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[yG]}),n.\u0275inj=u.cJS({providers:[],imports:[[ka,gG,px,nG,Ju,es.hO.initializeApp(Er_firebaseConfig),JL]]}),n})();(0,u.G48)(),Lu().bootstrapModule(vG).catch(n=>console.error(n))},5867:(ct,Te,k)=>{k.d(Te,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=k(9681);(0,u.registerVersion)("firebase","9.6.10","app")},127:(ct,Te,k)=>{k.d(Te,{Z:()=>u.Z});var u=k(3942);u.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ct,Te,k)=>{k.r(Te);var u=k(5861),Y=k(3942),P=k(2090),ae=k(9681),X=k(655),ge=k(1877),ie=k(4859);const ke=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new ge.Yd("@firebase/auth");function Qe(y,...f){rt.logLevel<=ge.in.ERROR&&rt.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function Se(y,...f){throw $e(y,...f)}function be(y,...f){return $e(y,...f)}function we(y,f,m){const b=Object.assign(Object.assign({},Be()),{[f]:m});return new P.LL("auth","Firebase",b).create(f,{appName:y.name})}function qe(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Se(y,"argument-error"),we(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...f){if("string"!=typeof y){const m=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(m,...b)}return pe.create(y,...f)}function ne(y,f,...m){if(!y)throw $e(f,...m)}function Z(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Qe(f),new Error(f)}function se(y,f){y||Z(f)}const me=new Map;function oe(y){se(y instanceof Function,"Expected a class definition");let f=me.get(y);return f?(se(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,me.set(y,f),f)}function St(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function en(){return"http:"===Fn()||"https:"===Fn()}function Fn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class hn{constructor(f,m){this.shortDelay=f,this.longDelay=m,se(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function dt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(en()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(y,f){se(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Mi{static initialize(f,m,b){this.fetchImpl=f,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ln={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},as=new hn(3e4,6e4);function tn(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function qt(y,f,m,b){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(y,f,m,b,I={}){return _i(y,I,(0,u.Z)(function*(){let x={},z={};b&&("GET"===f?z=b:x={body:JSON.stringify(b)});const re=(0,P.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Mi.fetch()(Gr(y,y.config.apiHost,m,re),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function _i(y,f,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,u.Z)(function*(y,f,m){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},ln),f);try{const I=new ls(y),x=yield Promise.race([m(),I.promise]);I.clearNetworkTimeout();const z=yield x.json();if("needConfirmation"in z)throw us(y,"account-exists-with-different-credential",z);if(x.ok&&!("errorMessage"in z))return z;{const re=x.ok?z.errorMessage:z.error.message,[Ue,it]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw us(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw us(y,"email-already-in-use",z);const Et=b[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw we(y,Et,it);Se(y,Et)}}catch(I){if(I instanceof P.ZR)throw I;Se(y,"network-request-failed")}})).apply(this,arguments)}function jr(y,f,m,b){return zi.apply(this,arguments)}function zi(){return(zi=(0,u.Z)(function*(y,f,m,b,I={}){const x=yield qt(y,f,m,b,I);return"mfaPendingCredential"in x&&Se(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Gr(y,f,m,b){const I=`${f}${m}?${b}`;return y.config.emulator?fn(y.config,I):`${y.config.apiScheme}://${I}`}class ls{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(be(this.auth,"network-request-failed")),as.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function us(y,f,m){const b={appName:y.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const I=be(y,f,b);return I.customData._tokenResponse=m,I}function Yr(){return(Yr=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function rr(y,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function yi(y,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function En(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Ta(){return(Ta=(0,u.Z)(function*(y,f=!1){const m=(0,P.m9)(y),b=yield m.getIdToken(f),I=ut(b);ne(I&&I.exp&&I.auth_time&&I.iat,m.auth,"internal-error");const x="object"==typeof I.firebase?I.firebase:void 0,z=null==x?void 0:x.sign_in_provider;return{claims:I,token:b,authTime:En(zt(I.auth_time)),issuedAtTime:En(zt(I.iat)),expirationTime:En(zt(I.exp)),signInProvider:z||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(y){return 1e3*Number(y)}function ut(y){const[f,m,b]=y.split(".");if(void 0===f||void 0===m||void 0===b)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,P.tV)(m);return I?JSON.parse(I):(Qe("Failed to decode base64 JWT payload"),null)}catch(I){return Qe("Caught error parsing JWT payload as JSON",I),null}}function mr(y,f){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(b){throw b instanceof P.ZR&&Ht(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function Ht({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class co{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const I=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,u.Z)(function*(){yield m.iteration()}),b)}iteration(){var f=this;return(0,u.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class Tr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _r(y){return gt.apply(this,arguments)}function gt(){return(gt=(0,u.Z)(function*(y){var f;const m=y.auth,b=yield y.getIdToken(),I=yield mr(y,yi(m,{idToken:b}));ne(null==I?void 0:I.users.length,m,"internal-error");const x=I.users[0];y._notifyReloadListener(x);const z=(null===(f=x.providerUserInfo)||void 0===f?void 0:f.length)?Ie(x.providerUserInfo):[],re=et(y.providerData,z),Et=!!y.isAnonymous&&!(y.email&&x.passwordHash||(null==re?void 0:re.length)),ft={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:re,metadata:new Tr(x.createdAt,x.lastLoginAt),isAnonymous:Et};Object.assign(y,ft)})).apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(function*(y){const f=(0,P.m9)(y);yield _r(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function et(y,f){return[...y.filter(b=>!f.some(I=>I.providerId===b.providerId)),...f]}function Ie(y){return y.map(f=>{var{providerId:m}=f,b=(0,X._T)(f,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function mt(){return(mt=(0,u.Z)(function*(y,f){const m=yield _i(y,{},(0,u.Z)(function*(){const b=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:I,apiKey:x}=y.config,z=Gr(y,I,"/v1/token",`key=${x}`),re=yield y._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",Mi.fetch()(z,{method:"POST",headers:re,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(void 0!==f.idToken,"internal-error"),ne(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Ct(y){const f=ut(y);return ne(f,"internal-error"),ne(void 0!==f.exp,"internal-error"),ne(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var b=this;return(0,u.Z)(function*(){return ne(!b.accessToken||b.refreshToken,f,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var b=this;return(0,u.Z)(function*(){const{accessToken:I,refreshToken:x,expiresIn:z}=yield function tt(y,f){return mt.apply(this,arguments)}(f,m);b.updateTokensAndExpiration(I,x,Number(z))})()}updateTokensAndExpiration(f,m,b){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,m){const{refreshToken:b,accessToken:I,expirationTime:x}=m,z=new jt;return b&&(ne("string"==typeof b,"internal-error",{appName:f}),z.refreshToken=b),I&&(ne("string"==typeof I,"internal-error",{appName:f}),z.accessToken=I),x&&(ne("number"==typeof x,"internal-error",{appName:f}),z.expirationTime=x),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return Z("not implemented")}}function Lt(y,f){ne("string"==typeof y||void 0===y,"internal-error",{appName:f})}class j{constructor(f){var{uid:m,auth:b,stsTokenManager:I}=f,x=(0,X._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new co(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Tr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,u.Z)(function*(){const b=yield mr(m,m.stsTokenManager.getToken(m.auth,f));return ne(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(f){return function Fs(y){return Ta.apply(this,arguments)}(this,f)}reload(){return function Sr(y){return Ut.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new j(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var b=this;return(0,u.Z)(function*(){let I=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),I=!0),m&&(yield _r(b)),yield b.auth._persistUserIfCurrent(b),I&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,u.Z)(function*(){const m=yield f.getIdToken();return yield mr(f,function pt(y,f){return Yr.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var b,I,x,z,re,Ue,it,Et;const ft=null!==(b=m.displayName)&&void 0!==b?b:void 0,kn=null!==(I=m.email)&&void 0!==I?I:void 0,oi=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,Gl=null!==(z=m.photoURL)&&void 0!==z?z:void 0,bc=null!==(re=m.tenantId)&&void 0!==re?re:void 0,da=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,Hd=null!==(it=m.createdAt)&&void 0!==it?it:void 0,wc=null!==(Et=m.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:ko,emailVerified:$d,isAnonymous:Bf,providerData:Uf,stsTokenManager:qd}=m;ne(ko&&qd,f,"internal-error");const Hy=jt.fromJSON(this.name,qd);ne("string"==typeof ko,f,"internal-error"),Lt(ft,f.name),Lt(kn,f.name),ne("boolean"==typeof $d,f,"internal-error"),ne("boolean"==typeof Bf,f,"internal-error"),Lt(oi,f.name),Lt(Gl,f.name),Lt(bc,f.name),Lt(da,f.name),Lt(Hd,f.name),Lt(wc,f.name);const Ec=new j({uid:ko,auth:f,email:kn,emailVerified:$d,displayName:ft,isAnonymous:Bf,photoURL:Gl,phoneNumber:oi,tenantId:bc,stsTokenManager:Hy,createdAt:Hd,lastLoginAt:wc});return Uf&&Array.isArray(Uf)&&(Ec.providerData=Uf.map($y=>Object.assign({},$y))),da&&(Ec._redirectEventId=da),Ec}static _fromIdTokenResponse(f,m,b=!1){return(0,u.Z)(function*(){const I=new jt;I.updateFromServerResponse(m);const x=new j({uid:m.localId,auth:f,stsTokenManager:I,isAnonymous:b});return yield _r(x),x})()}}const q=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(m,b){var I=this;return(0,u.Z)(function*(){I.storage[m]=b})()}_get(m){var b=this;return(0,u.Z)(function*(){const I=b.storage[m];return void 0===I?null:I})()}_remove(m){var b=this;return(0,u.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return y.type="NONE",y})();function he(y,f,m){return`firebase:${y}:${f}:${m}`}class J{constructor(f,m,b){this.persistence=f,this.auth=m,this.userKey=b;const{config:I,name:x}=this.auth;this.fullUserKey=he(this.userKey,I.apiKey,x),this.fullPersistenceKey=he("persistence",I.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,u.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?j._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,u.Z)(function*(){if(m.persistence===f)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,b="authUser"){return(0,u.Z)(function*(){if(!m.length)return new J(oe(q),f,b);const I=(yield Promise.all(m.map(function(){var it=(0,u.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return it.apply(this,arguments)}}()))).filter(it=>it);let x=I[0]||oe(q);const z=he(b,f.config.apiKey,f.name);let re=null;for(const it of m)try{const Et=yield it._get(z);if(Et){const ft=j._fromJSON(f,Et);it!==x&&(re=ft),x=it;break}}catch(Et){}const Ue=I.filter(it=>it._shouldAllowMigration);return x._shouldAllowMigration&&Ue.length?(x=Ue[0],re&&(yield x._set(z,re.toJSON())),yield Promise.all(m.map(function(){var it=(0,u.Z)(function*(Et){if(Et!==x)try{yield Et._remove(z)}catch(ft){}});return function(Et){return it.apply(this,arguments)}}())),new J(x,f,b)):new J(x,f,b)})()}}function je(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Wt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(wt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(kt(f))return"Blackberry";if(mn(f))return"Webos";if(Jt(f))return"Safari";if((f.includes("chrome/")||Ir(f))&&!f.includes("edge/"))return"Chrome";if(Rn(f))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function wt(y=(0,P.z$)()){return/firefox\//i.test(y)}function Jt(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ir(y=(0,P.z$)()){return/crios\//i.test(y)}function Wt(y=(0,P.z$)()){return/iemobile/i.test(y)}function Rn(y=(0,P.z$)()){return/android/i.test(y)}function kt(y=(0,P.z$)()){return/blackberry/i.test(y)}function mn(y=(0,P.z$)()){return/webos/i.test(y)}function sr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function cs(y=(0,P.z$)()){return sr(y)||Rn(y)||mn(y)||kt(y)||/windows phone/i.test(y)||Wt(y)}function Ia(y,f=[]){let m;switch(y){case"Browser":m=je((0,P.z$)());break;case"Worker":m=`${je((0,P.z$)())}-${y}`;break;default:m=y}const b=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${b}`}class vi{constructor(f,m,b){this.app=f,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ft(this),this.idTokenSubscription=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,m){var b=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,u.Z)(function*(){var I,x;if(!b._deleted&&(b.persistenceManager=yield J.create(b,f),!b._deleted)){if(null===(I=b._popupRedirectResolver)||void 0===I?void 0:I._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(z){}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(x=b.currentUser)||void 0===x?void 0:x.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,u.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,u.Z)(function*(){var b;let I=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const x=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,z=null==I?void 0:I._redirectEventId,re=yield m.tryRedirectSignIn(f);(!x||x===z)&&(null==re?void 0:re.user)&&(I=re.user)}return I?I._redirectEventId?(ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===I._redirectEventId?m.directlySetCurrentUser(I):m.reloadAndSetCurrentUserOrClear(I)):m.reloadAndSetCurrentUserOrClear(I):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,u.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(I){yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,u.Z)(function*(){try{yield _r(f)}catch(b){if("auth/network-request-failed"!==b.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function bt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,u.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,u.Z)(function*(){const b=f?(0,P.m9)(f):null;return b&&ne(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,u.Z)(function*(){if(!m._deleted)return f&&ne(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,u.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,u.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,u.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,m,b){return this.registerStateListener(this.authStateSubscription,f,m,b)}onIdTokenChanged(f,m,b){return this.registerStateListener(this.idTokenSubscription,f,m,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var b=this;return(0,u.Z)(function*(){const I=yield b.getOrInitRedirectPersistenceManager(m);return null===f?I.removeCurrentUser():I.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,u.Z)(function*(){if(!m.redirectPersistenceManager){const b=f&&oe(f)||m._popupRedirectResolver;ne(b,m,"argument-error"),m.redirectPersistenceManager=yield J.create(m,[oe(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,u.Z)(function*(){var b,I;return m._isInitialized&&(yield m.queue((0,u.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===f?m._currentUser:(null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,u.Z)(function*(){if(f===m.currentUser)return m.queue((0,u.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,b,I){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(z,this,"internal-error"),z.then(()=>x(this.currentUser)),"function"==typeof m?f.addObserver(m,b,I):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,u.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ia(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,u.Z)(function*(){var m;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const I=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return I&&(b["X-Firebase-Client"]=I),b})()}}function Pe(y){return(0,P.m9)(y)}class Ft{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Gn(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class un{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Z("not implemented")}_getIdTokenResponse(f){return Z("not implemented")}_linkToIdToken(f,m){return Z("not implemented")}_getReauthenticationResolver(f){return Z("not implemented")}}function Ln(y,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:resetPassword",tn(y,f))})).apply(this,arguments)}function Ot(y,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function po(y,f){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:update",tn(y,f))})).apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signInWithPassword",tn(y,f))})).apply(this,arguments)}function ds(y,f){return hs.apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:sendOobCode",tn(y,f))})).apply(this,arguments)}function vr(y,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,u.Z)(function*(y,f){return ds(y,f)})).apply(this,arguments)}function cl(y,f){return dl.apply(this,arguments)}function dl(){return(dl=(0,u.Z)(function*(y,f){return ds(y,f)})).apply(this,arguments)}function xi(y,f){return bi.apply(this,arguments)}function bi(){return(bi=(0,u.Z)(function*(y,f){return ds(y,f)})).apply(this,arguments)}function ud(y,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,u.Z)(function*(y,f){return ds(y,f)})).apply(this,arguments)}function Jr(){return(Jr=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signInWithEmailLink",tn(y,f))})).apply(this,arguments)}function qo(){return(qo=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signInWithEmailLink",tn(y,f))})).apply(this,arguments)}class fl extends un{constructor(f,m,b,I=null){super("password",b),this._email=f,this._password=m,this._tenantId=I}static _fromEmailAndPassword(f,m){return new fl(f,m,"password")}static _fromEmailAndCode(f,m,b=null){return new fl(f,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,u.Z)(function*(){switch(m.signInMethod){case"password":return function Bs(y,f){return Sn.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function hl(y,f){return Jr.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Se(f,"internal-error")}})()}_linkToIdToken(f,m){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return Ot(f,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function uf(y,f){return qo.apply(this,arguments)}(f,{idToken:m,email:b._email,oobCode:b._password});default:Se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Hn(y,f){return cd.apply(this,arguments)}function cd(){return(cd=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signInWithIdp",tn(y,f))})).apply(this,arguments)}class fs extends un{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new fs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:I}=m,x=(0,X._T)(m,["providerId","signInMethod"]);if(!b||!I)return null;const z=new fs(b,I);return z.idToken=x.idToken||void 0,z.accessToken=x.accessToken||void 0,z.secret=x.secret,z.nonce=x.nonce,z.pendingToken=x.pendingToken||null,z}_getIdTokenResponse(f){return Hn(f,this.buildRequest())}_linkToIdToken(f,m){const b=this.buildRequest();return b.idToken=m,Hn(f,b)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Hn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,P.xO)(m)}return f}}function Ng(y,f){return Su.apply(this,arguments)}function Su(){return(Su=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:sendVerificationCode",tn(y,f))})).apply(this,arguments)}function js(){return(js=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,f))})).apply(this,arguments)}function dd(){return(dd=(0,u.Z)(function*(y,f){const m=yield jr(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,f));if(m.temporaryProof)throw us(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Mg={USER_NOT_FOUND:"user-not-found"};function hd(){return(hd=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signInWithPhoneNumber",tn(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Mg)})).apply(this,arguments)}class zo extends un{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new zo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new zo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Iu(y,f){return js.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Rg(y,f){return dd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function xg(y,f){return hd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:b,verificationCode:I}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:b,code:I}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:b,phoneNumber:I,temporaryProof:x}=f;return b||m||I||x?new zo({verificationId:m,verificationCode:b,phoneNumber:I,temporaryProof:x}):null}}class go{constructor(f){var m,b,I,x,z,re;const Ue=(0,P.zd)((0,P.pd)(f)),it=null!==(m=Ue.apiKey)&&void 0!==m?m:null,Et=null!==(b=Ue.oobCode)&&void 0!==b?b:null,ft=function hy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=Ue.mode)&&void 0!==I?I:null);ne(it&&Et&&ft,"argument-error"),this.apiKey=it,this.operation=ft,this.code=Et,this.continueUrl=null!==(x=Ue.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(re=Ue.tenantId)&&void 0!==re?re:null}static parseLink(f){const m=function pl(y){const f=(0,P.zd)((0,P.pd)(y)).link,m=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,b=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(b?(0,P.zd)((0,P.pd)(b)).link:null)||b||m||f||y}(f);try{return new go(m)}catch(b){return null}}}let Au=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,b){return fl._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const I=go.parseLink(b);return ne(I,"argument-error"),fl._fromEmailAndCode(m,I.code,I.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Gs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Qr extends Gs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Wo extends Qr{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),fs._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Wo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Wo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:I,pendingToken:x,nonce:z,providerId:re}=f;if(!b&&!I&&!m&&!x||!re)return null;try{return new Wo(re)._credential({idToken:m,accessToken:b,nonce:z,pendingToken:x})}catch(Ue){return null}}}let mo=(()=>{class y extends Qr{constructor(){super("facebook.com")}static credential(m){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Na=(()=>{class y extends Qr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:I}=m;if(!b&&!I)return null;try{return y.credential(b,I)}catch(x){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),fd=(()=>{class y extends Qr{constructor(){super("github.com")}static credential(m){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qn extends un{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Hn(f,this.buildRequest())}_linkToIdToken(f,m){const b=this.buildRequest();return b.idToken=m,Hn(f,b)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Hn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:I,pendingToken:x}=m;return b&&I&&x&&b===I?new Qn(b,x):null}static _create(f,m){return new Qn(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wi extends Gs{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return wi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return wi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Qn.fromJSON(f);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:b}=f;if(!m||!b)return null;try{return Qn._create(b,m)}catch(I){return null}}}let gl=(()=>{class y extends Qr{constructor(){super("twitter.com")}static credential(m,b){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:I}=m;if(!b||!I)return null;try{return y.credential(b,I)}catch(x){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ml(y,f){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signUp",tn(y,f))})).apply(this,arguments)}class br{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,b,I=!1){return(0,u.Z)(function*(){const x=yield j._fromIdTokenResponse(f,b,I),z=df(b);return new br({user:x,providerId:z,_tokenResponse:b,operationType:m})})()}static _forOperation(f,m,b){return(0,u.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const I=df(b);return new br({user:f,providerId:I,_tokenResponse:b,operationType:m})})()}}function df(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function pd(){return(pd=(0,u.Z)(function*(y){var f;const m=Pe(y);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new br({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield ml(m,{returnSecureToken:!0}),I=yield br._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(I.user),I})).apply(this,arguments)}class yl extends P.ZR{constructor(f,m,b,I){var x;super(m.code,m.message),this.operationType=b,this.user=I,Object.setPrototypeOf(this,yl.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,m,b,I){return new yl(f,m,b,I)}}function vl(y,f,m,b){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?yl._fromErrorAndOperation(y,x,f,b):x})}function ps(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Nu(){return(Nu=(0,u.Z)(function*(y,f){const m=(0,P.m9)(y);yield $s(!0,m,f);const{providerUserInfo:b}=yield rr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),I=ps(b||[]);return m.providerData=m.providerData.filter(x=>I.has(x.providerId)),I.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(y,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,u.Z)(function*(y,f,m=!1){const b=yield mr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return br._forOperation(y,"link",b)})).apply(this,arguments)}function $s(y,f,m){return dn.apply(this,arguments)}function dn(){return(dn=(0,u.Z)(function*(y,f,m){yield _r(f);const I=!1===y?"provider-already-linked":"no-such-provider";ne(ps(f.providerData).has(m)===y,f.auth,I)})).apply(this,arguments)}function gd(y,f){return _o.apply(this,arguments)}function _o(){return(_o=(0,u.Z)(function*(y,f,m=!1){const{auth:b}=y,I="reauthenticate";try{const x=yield mr(y,vl(b,I,f,y),m);ne(x.idToken,b,"internal-error");const z=ut(x.idToken);ne(z,b,"internal-error");const{sub:re}=z;return ne(y.uid===re,b,"user-mismatch"),br._forOperation(y,I,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&Se(b,"user-mismatch"),x}})).apply(this,arguments)}function yo(y,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(y,f,m=!1){const b="signIn",I=yield vl(y,b,f),x=yield br._fromIdTokenResponse(y,b,I);return m||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Vn(y,f){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,u.Z)(function*(y,f){return yo(Pe(y),f)})).apply(this,arguments)}function Oi(y,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,u.Z)(function*(y,f){const m=(0,P.m9)(y);return yield $s(!1,m,f.providerId),yn(m,f)})).apply(this,arguments)}function qs(y,f){return gs.apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(y,f){return gd((0,P.m9)(y),f)})).apply(this,arguments)}function bl(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(y,f){return jr(y,"POST","/v1/accounts:signInWithCustomToken",tn(y,f))})).apply(this,arguments)}function Ws(){return(Ws=(0,u.Z)(function*(y,f){const m=Pe(y),b=yield bl(m,{token:f,returnSecureToken:!0}),I=yield br._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(I.user),I})).apply(this,arguments)}class _t{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?wl._fromServerResponse(f,m):Se(f,"internal-error")}}class wl extends _t{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new wl(m)}}function xa(y,f,m){var b;ne((null===(b=m.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Dl(){return(Dl=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y),I={requestType:"PASSWORD_RESET",email:f};m&&xa(b,I,m),yield cl(b,I)})).apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(y,f,m){yield Ln((0,P.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ce(){return(Ce=(0,u.Z)(function*(y,f){yield po((0,P.m9)(y),{oobCode:f})})).apply(this,arguments)}function Vt(y,f){return xu.apply(this,arguments)}function xu(){return(xu=(0,u.Z)(function*(y,f){const m=(0,P.m9)(y),b=yield Ln(m,{oobCode:f}),I=b.requestType;switch(ne(I,m,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(b.mfaInfo,m,"internal-error");default:ne(b.email,m,"internal-error")}let x=null;return b.mfaInfo&&(x=_t._fromServerResponse(Pe(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:x},operation:I}})).apply(this,arguments)}function Ko(){return(Ko=(0,u.Z)(function*(y,f){const{data:m}=yield Vt((0,P.m9)(y),f);return m.email})).apply(this,arguments)}function ei(){return(ei=(0,u.Z)(function*(y,f,m){const b=Pe(y),I=yield ml(b,{returnSecureToken:!0,email:f,password:m}),x=yield br._fromIdTokenResponse(b,"signIn",I);return yield b._updateCurrentUser(x.user),x})).apply(this,arguments)}function md(){return(md=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y),I={requestType:"EMAIL_SIGNIN",email:f};ne(m.handleCodeInApp,b,"argument-error"),m&&xa(b,I,m),yield xi(b,I)})).apply(this,arguments)}function Zs(){return(Zs=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y),I=Au.credentialWithLink(f,m||St());return ne(I._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Vn(b,I)})).apply(this,arguments)}function wr(y,f){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:createAuthUri",tn(y,f))})).apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(y,f){const b={identifier:f,continueUri:en()?St():"http://localhost"},{signinMethods:I}=yield wr((0,P.m9)(y),b);return I||[]})).apply(this,arguments)}function Fu(){return(Fu=(0,u.Z)(function*(y,f){const m=(0,P.m9)(y),I={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&xa(m.auth,I,f);const{email:x}=yield vr(m.auth,I);x!==y.email&&(yield y.reload())})).apply(this,arguments)}function Al(){return(Al=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&xa(b.auth,x,m);const{email:z}=yield ud(b.auth,x);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Lu(y,f){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(y,f){return qt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Vu(){return(Vu=(0,u.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const b=(0,P.m9)(y),x={idToken:yield b.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},z=yield mr(b,Lu(b.auth,x));b.displayName=z.displayName||null,b.photoURL=z.photoUrl||null;const re=b.providerData.find(({providerId:Ue})=>"password"===Ue);re&&(re.displayName=b.displayName,re.photoURL=b.photoURL),yield b._updateTokensIfNecessary(z)})).apply(this,arguments)}function Uu(y,f,m){return vo.apply(this,arguments)}function vo(){return(vo=(0,u.Z)(function*(y,f,m){const{auth:b}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(x.email=f),m&&(x.password=m);const z=yield mr(y,Ot(b,x));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class bo{constructor(f,m,b={}){this.isNewUser=f,this.providerId=m,this.profile=b}}class vd extends bo{constructor(f,m,b,I){super(f,m,b),this.username=I}}class bd extends bo{constructor(f,m){super(f,"facebook.com",m)}}class wo extends vd{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Ys extends bo{constructor(f,m){super(f,"google.com",m)}}class ju extends vd{constructor(f,m,b){super(f,"twitter.com",m,b)}}function Rr(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function yd(y){var f,m;if(!y)return null;const{providerId:b}=y,I=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const z=null===(m=null===(f=ut(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new bo(x,"anonymous"!==z&&"custom"!==z?z:null)}if(!b)return null;switch(b){case"facebook.com":return new bd(x,I);case"github.com":return new wo(x,I);case"google.com":return new Ys(x,I);case"twitter.com":return new ju(x,I,y.screenName||null);case"custom":case"anonymous":return new bo(x,null);default:return new bo(x,b,I)}}(m)}class ms{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ms("enroll",f)}static _fromMfaPendingCredential(f){return new ms("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,b;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ms._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return ms._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Pa{constructor(f,m,b){this.session=f,this.hints=m,this.signInResolver=b}static _fromError(f,m){const b=Pe(f),I=m.customData._serverResponse,x=(I.mfaInfo||[]).map(re=>_t._fromServerResponse(b,re));ne(I.mfaPendingCredential,b,"internal-error");const z=ms._fromMfaPendingCredential(I.mfaPendingCredential);return new Pa(z,x,function(){var re=(0,u.Z)(function*(Ue){const it=yield Ue._process(b,z);delete I.mfaInfo,delete I.mfaPendingCredential;const Et=Object.assign(Object.assign({},I),{idToken:it.idToken,refreshToken:it.refreshToken});switch(m.operationType){case"signIn":const ft=yield br._fromIdTokenResponse(b,m.operationType,Et);return yield b._updateCurrentUser(ft.user),ft;case"reauthenticate":return ne(m.user,b,"internal-error"),br._forOperation(m.user,m.operationType,Et);default:Se(b,"internal-error")}});return function(Ue){return re.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,u.Z)(function*(){return m.signInResolver(f)})()}}function $n(y,f){return qt(y,"POST","/v2/accounts/mfaEnrollment:start",tn(y,f))}class _s{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>_t._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new _s(f)}getSession(){var f=this;return(0,u.Z)(function*(){return ms._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var b=this;return(0,u.Z)(function*(){const I=f,x=yield b.getSession(),z=yield mr(b.user,I._process(b.user.auth,x,m));return yield b.user._updateTokensIfNecessary(z),b.user.reload()})()}unenroll(f){var m=this;return(0,u.Z)(function*(){const b="string"==typeof f?f:f.uid,I=yield m.user.getIdToken(),x=yield mr(m.user,function kg(y,f){return qt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(y,f))}(m.user.auth,{idToken:I,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==b),yield m.user._updateTokensIfNecessary(x);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Jo=new WeakMap,$u="__sak";class Eo{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem($u,"1"),this.storage.removeItem($u),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Er=(()=>{class y extends Eo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Dd(){const y=(0,P.z$)();return Jt(y)||sr(y)}()&&function Jn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=cs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const I=this.storage.getItem(b),x=this.localCache[b];I!==x&&m(b,x,I)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((re,Ue,it)=>{this.notifyListeners(re,it)});const I=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(I);if(m.newValue!==re)null!==m.newValue?this.storage.setItem(I,m.newValue):this.storage.removeItem(I);else if(this.localCache[I]===m.newValue&&!b)return}const x=()=>{const re=this.storage.getItem(I);!b&&this.localCache[I]===re||this.notifyListeners(I,re)},z=this.storage.getItem(I);!function Sa(){return(0,P.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,b){this.localCache[m]=b;const I=this.listeners[m];if(I)for(const x of Array.from(I))x(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var I=()=>super._set,x=this;return(0,u.Z)(function*(){yield I().call(x,m,b),x.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,I=this;return(0,u.Z)(function*(){const x=yield b().call(I,m);return I.localCache[m]=JSON.stringify(x),x})()}_remove(m){var b=()=>super._remove,I=this;return(0,u.Z)(function*(){yield b().call(I,m),delete I.localCache[m]})()}}return y.type="LOCAL",y})(),Zt=(()=>{class y extends Eo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return y.type="SESSION",y})();let xn=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(x=>x.isListeningto(m));if(b)return b;const I=new y(m);return this.receivers.push(I),I}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,u.Z)(function*(){const I=m,{eventId:x,eventType:z,data:re}=I.data,Ue=b.handlersMap[z];if(!(null==Ue?void 0:Ue.size))return;I.ports[0].postMessage({status:"ack",eventId:x,eventType:z});const it=Array.from(Ue).map(function(){var ft=(0,u.Z)(function*(kn){return kn(I.origin,re)});return function(kn){return ft.apply(this,arguments)}}()),Et=yield function ht(y){return Promise.all(y.map(function(){var f=(0,u.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return f.apply(this,arguments)}}()))}(it);I.ports[0].postMessage({status:"done",eventId:x,eventType:z,response:Et})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Cn(y="",f=10){let m="";for(let b=0;b<f;b++)m+=Math.floor(10*Math.random());return y+m}class Pi{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,b=50){var I=this;return(0,u.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let z,re;return new Promise((Ue,it)=>{const Et=Cn("",20);x.port1.start();const ft=setTimeout(()=>{it(new Error("unsupported_event"))},b);re={messageChannel:x,onMessage(kn){const oi=kn;if(oi.data.eventId===Et)switch(oi.data.status){case"ack":clearTimeout(ft),z=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(oi.data.response);break;default:clearTimeout(ft),clearTimeout(z),it(new Error("invalid_response"))}}},I.handlers.add(re),x.port1.addEventListener("message",re.onMessage),I.target.postMessage({eventType:f,eventId:Et,data:m},[x.port2])}).finally(()=>{re&&I.removeMessageHandler(re)})})()}}function Qt(){return window}function nn(){return void 0!==Qt().WorkerGlobalScope&&"function"==typeof Qt().importScripts}function at(){return(at=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Fi="firebaseLocalStorageDb",Qo="firebaseLocalStorage",Xo="fbase_key";class ys{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Do(y,f){return y.transaction([Qo],f?"readwrite":"readonly").objectStore(Qo)}function $r(){const y=indexedDB.open(Fi,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Qo,{keyPath:Xo})}catch(I){m(I)}}),y.addEventListener("success",(0,u.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Qo)?f(b):(b.close(),yield function ti(){const y=indexedDB.deleteDatabase(Fi);return new ys(y).toPromise()}(),f(yield $r()))}))})}function Cd(y,f,m){return Co.apply(this,arguments)}function Co(){return(Co=(0,u.Z)(function*(y,f,m){const b=Do(y,!0).put({[Xo]:f,value:m});return new ys(b).toPromise()})).apply(this,arguments)}function ea(){return(ea=(0,u.Z)(function*(y,f){const m=Do(y,!1).get(f),b=yield new ys(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Qs(y,f){const m=Do(y,!0).delete(f);return new ys(m).toPromise()}const sn=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,u.Z)(function*(){return m.db||(m.db=yield $r()),m.db})()}_withRetries(m){var b=this;return(0,u.Z)(function*(){let I=0;for(;;)try{const x=yield b._openDb();return yield m(x)}catch(x){if(I++>3)throw x;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,u.Z)(function*(){return nn()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,u.Z)(function*(){m.receiver=xn._getInstance(function qu(){return nn()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(I,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(I,x){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(I,x){return["keyChanged"]});return function(I,x){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,u.Z)(function*(){var b,I;if(m.activeServiceWorker=yield function Bn(){return at.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Pi(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);!x||(null===(b=x[0])||void 0===b?void 0:b.fulfilled)&&(null===(I=x[0])||void 0===I?void 0:I.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function pf(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch(I){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const m=yield $r();return yield Cd(m,$u,"1"),yield Qs(m,$u),!0}catch(m){}return!1})()}_withPendingWrite(m){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var I=this;return(0,u.Z)(function*(){return I._withPendingWrite((0,u.Z)(function*(){return yield I._withRetries(x=>Cd(x,m,b)),I.localCache[m]=b,I.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,u.Z)(function*(){const I=yield b._withRetries(x=>function zu(y,f){return ea.apply(this,arguments)}(x,m));return b.localCache[m]=I,I})()}_remove(m){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(I=>Qs(I,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,u.Z)(function*(){const b=yield m._withRetries(z=>{const re=Do(z,!1).getAll();return new ys(re).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const I=[],x=new Set;for(const{fbase_key:z,value:re}of b)x.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(re)&&(m.notifyListeners(z,re),I.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!x.has(z)&&(m.notifyListeners(z,null),I.push(z));return I})()}notifyListeners(m,b){this.localCache[m]=b;const I=this.listeners[m];if(I)for(const x of Array.from(I))x(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Wu(y,f){return qt(y,"POST","/v2/accounts/mfaSignIn:start",tn(y,f))}function Li(){return(Li=(0,u.Z)(function*(y){return(yield qt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function na(y){return new Promise((f,m)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=f,b.onerror=I=>{const x=be("internal-error");x.customData=I,m(x)},b.type="text/javascript",b.charset="UTF-8",function Ml(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(b)})}function La(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Yi=1e12;class Lg{constructor(f){this.auth=f,this.counter=Yi,this._widgets=new Map}render(f,m){const b=this.counter;return this._widgets.set(b,new Td(f,this.auth.name,m||{})),this.counter++,b}reset(f){var m;const b=f||Yi;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Yi))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,u.Z)(function*(){var b;return null===(b=m._widgets.get(f||Yi))||void 0===b||b.execute(),""})()}}class Td{constructor(f,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof f?document.getElementById(f):f;ne(I,"argument-error",{appName:m}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Va(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zu=La("rcb"),py=new hn(3e4,6e4);class gy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qt().grecaptcha}load(f,m=""){return ne(function my(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Qt().grecaptcha):new Promise((b,I)=>{const x=Qt().setTimeout(()=>{I(be(f,"network-request-failed"))},py.get());Qt()[Zu]=()=>{Qt().clearTimeout(x),delete Qt()[Zu];const re=Qt().grecaptcha;if(!re)return void I(be(f,"internal-error"));const Ue=re.render;re.render=(it,Et)=>{const ft=Ue(it,Et);return this.counter++,ft},this.hostLanguage=m,b(re)},na(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Zu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),I(be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Qt().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vg{load(f){return(0,u.Z)(function*(){return new Lg(f)})()}clearedOneInstance(){}}const Ku="recaptcha",Yu={theme:"light",type:"image"};class Sd{constructor(f,m=Object.assign({},Yu),b){this.parameters=m,this.type=Ku,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pe(b),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof f?document.getElementById(f):f;ne(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vg:new gy,this.validateStartingState()}verify(){var f=this;return(0,u.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(m)||new Promise(x=>{const z=re=>{!re||(f.tokenChangeListeners.delete(z),x(re))};f.tokenChangeListeners.add(z),f.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof f)f(m);else if("string"==typeof f){const b=Qt()[f];"function"==typeof b&&b(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,u.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,u.Z)(function*(){ne(en()&&!nn(),f.auth,"internal-error"),yield function mf(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Fa(y){return Li.apply(this,arguments)}(f.auth);ne(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class So{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=zo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function On(){return(On=(0,u.Z)(function*(y,f,m){const b=Pe(y),I=yield Mr(b,f,(0,P.m9)(m));return new So(I,x=>Vn(b,x))})).apply(this,arguments)}function Ba(){return(Ba=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y);yield $s(!1,b,"phone");const I=yield Mr(b.auth,f,(0,P.m9)(m));return new So(I,x=>Oi(b,x))})).apply(this,arguments)}function Ju(){return(Ju=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y),I=yield Mr(b.auth,f,(0,P.m9)(m));return new So(I,x=>qs(b,x))})).apply(this,arguments)}function Mr(y,f,m){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,u.Z)(function*(y,f,m){var b;const I=yield m.verify();try{let x;if(ne("string"==typeof I,y,"argument-error"),ne(m.type===Ku,y,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const z=x.session;if("phoneNumber"in x)return ne("enroll"===z.type,y,"internal-error"),(yield $n(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{ne("signin"===z.type,y,"internal-error");const re=(null===(b=x.multiFactorHint)||void 0===b?void 0:b.uid)||x.multiFactorUid;return ne(re,y,"missing-multi-factor-info"),(yield Wu(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Ng(y,{phoneNumber:x.phoneNumber,recaptchaToken:I});return z}}finally{m._reset()}})).apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*(y,f){yield yn((0,P.m9)(y),f)})).apply(this,arguments)}let Bi=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Pe(m)}verifyPhoneNumber(m,b){return Mr(this.auth,m,(0,P.m9)(b))}static credential(m,b){return zo._fromVerification(m,b)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:I}=m;return b&&I?zo._fromTokenResponse(b,I):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ji(y,f){return f?oe(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ua extends un{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Hn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Hn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Hn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Qu(y){return yo(y.auth,new Ua(y),y.bypassAuthState)}function Xu(y){const{auth:f,user:m}=y;return ne(m,f,"internal-error"),gd(m,new Ua(y),y.bypassAuthState)}function Nd(y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,u.Z)(function*(y){const{auth:f,user:m}=y;return ne(m,f,"internal-error"),yn(m,new Ua(y),y.bypassAuthState)})).apply(this,arguments)}class ni{constructor(f,m,b,I,x=!1){this.auth=f,this.resolver=b,this.user=I,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,u.Z)(function*(b,I){f.pendingPromise={resolve:b,reject:I};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(b,I){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:I,postBody:x,tenantId:z,error:re,type:Ue}=f;if(re)return void m.reject(re);const it={auth:m.auth,requestUri:b,sessionId:I,tenantId:z||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(it))}catch(Et){m.reject(Et)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Qu;case"linkViaPopup":case"linkViaRedirect":return Nd;case"reauthViaPopup":case"reauthViaRedirect":return Xu;default:Se(this.auth,"internal-error")}}resolve(f){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rd=new hn(2e3,1e4);function ec(){return(ec=(0,u.Z)(function*(y,f,m){const b=Pe(y);qe(y,f,Gs);const I=Ji(b,m);return new Di(b,"signInViaPopup",f,I).executeNotNull()})).apply(this,arguments)}function ia(){return(ia=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y);qe(b.auth,f,Gs);const I=Ji(b.auth,m);return new Di(b.auth,"reauthViaPopup",f,I,b).executeNotNull()})).apply(this,arguments)}function xl(){return(xl=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y);qe(b.auth,f,Gs);const I=Ji(b.auth,m);return new Di(b.auth,"linkViaPopup",f,I,b).executeNotNull()})).apply(this,arguments)}let Di=(()=>{class y extends ni{constructor(m,b,I,x,z){super(m,b,x,z),this.provider=I,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,u.Z)(function*(){const b=yield m.execute();return ne(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,u.Z)(function*(){se(1===m.filter.length,"Popup operations only handle one event");const b=Cn();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(I=>{m.reject(I)}),m.resolver._isIframeWebStorageSupported(m.auth,I=>{I||m.reject(be(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,I;this.pollId=(null===(I=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===I?void 0:I.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Rd.get())};m()}}return y.currentPopupAction=null,y})();const qr=new Map;class sa extends ni{constructor(f,m,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,u.Z)(function*(){let b=qr.get(m.auth._key());if(!b){try{const x=(yield function tc(y,f){return Ao.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;b=()=>Promise.resolve(x)}catch(I){b=()=>Promise.reject(I)}qr.set(m.auth._key(),b)}return m.bypassAuthState||qr.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(b,f);if("unknown"!==f.type){if(f.eventId){const I=yield b.auth._redirectUserForId(f.eventId);if(I)return b.user=I,m().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Ao(){return(Ao=(0,u.Z)(function*(y,f){const m=T(f),b=C(y);if(!(yield b._isAvailable()))return!1;const I="true"===(yield b._get(m));return yield b._remove(m),I})).apply(this,arguments)}function Dr(y,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,u.Z)(function*(y,f){return C(y)._set(T(f),"true")})).apply(this,arguments)}function C(y){return oe(y._redirectPersistence)}function T(y){return he("pendingRedirect",y.config.apiKey,y.name)}function W(){return(W=(0,u.Z)(function*(y,f,m){const b=Pe(y);qe(y,f,Gs);const I=Ji(b,m);return yield Dr(I,b),I._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Ye(){return(Ye=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y);qe(b.auth,f,Gs);const I=Ji(b.auth,m);yield Dr(I,b.auth);const x=yield Xn(b);return I._openRedirect(b.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function $t(){return($t=(0,u.Z)(function*(y,f,m){const b=(0,P.m9)(y);qe(b.auth,f,Gs);const I=Ji(b.auth,m);yield $s(!1,b,f.providerId),yield Dr(I,b.auth);const x=yield Xn(b);return I._openRedirect(b.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function zn(){return(zn=(0,u.Z)(function*(y,f){return yield Pe(y)._initializationPromise,Un(y,f,!1)})).apply(this,arguments)}function Un(y,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,u.Z)(function*(y,f,m=!1){const b=Pe(y),I=Ji(b,f),z=yield new sa(b,I,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield b._persistUserIfCurrent(z.user),yield b._setRedirectUser(null,f)),z})).apply(this,arguments)}function Xn(y){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(y){const f=Cn(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Xi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(m=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ug(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vf(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var b;if(f.error&&!vf(f)){const I=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(be(this.auth,I))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const b=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ji(f))}saveEventToCache(f){this.cachedEventUids.add(ji(f)),this.lastProcessedEventTime=Date.now()}}function ji(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function vf({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Md(y){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,u.Z)(function*(y,f={}){return qt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const jg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_y=/^https?/;function No(){return(No=(0,u.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Md(y);for(const m of f)try{if(kl(m))return}catch(b){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function kl(y){const f=St(),{protocol:m,hostname:b}=new URL(f);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===b?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===b}if(!_y.test(m))return!1;if(jg.test(y))return b===y;const I=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(b)}const vy=new hn(3e4,6e4);function by(){const y=Qt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let xd=null;function wy(y){return xd=xd||function Gg(y){return new Promise((f,m)=>{var b,I,x;function z(){by(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{by(),m(be(y,"network-request-failed"))},timeout:vy.get()})}if(null===(I=null===(b=Qt().gapi)||void 0===b?void 0:b.iframes)||void 0===I?void 0:I.Iframe)f(gapi.iframes.getContext());else{if(!(null===(x=Qt().gapi)||void 0===x?void 0:x.load)){const re=La("iframefcb");return Qt()[re]=()=>{gapi.load?z():m(be(y,"network-request-failed"))},na(`https://apis.google.com/js/api.js?onload=${re}`).catch(Ue=>m(Ue))}z()}}).catch(f=>{throw xd=null,f})}(y),xd}const Gt=new hn(5e3,15e3),nc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fl(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?fn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},I=rc.get(y.config.apiHost);I&&(b.eid=I);const x=y._getFrameworks();return x.length&&(b.fw=x.join(",")),`${m}?${(0,P.xO)(b).slice(1)}`}function bf(){return bf=(0,u.Z)(function*(y){const f=yield wy(y),m=Qt().gapi;return ne(m,y,"internal-error"),f.open({where:document.body,url:Fl(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nc,dontclear:!0},b=>new Promise(function(){var I=(0,u.Z)(function*(x,z){yield b.restyle({setHideOnLeave:!1});const re=be(y,"network-request-failed"),Ue=Qt().setTimeout(()=>{z(re)},Gt.get());function it(){Qt().clearTimeout(Ue),x(b)}b.ping(it).then(it,()=>{z(re)})});return function(x,z){return I.apply(this,arguments)}}()))}),bf.apply(this,arguments)}const Ro={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ar{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function kd(y,f,m,b,I,x){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:b,v:ae.SDK_VERSION,eventId:I};if(f instanceof Gs){f.setDefaultLanguage(y.languageCode),z.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,it]of Object.entries(x||{}))z[Ue]=it}if(f instanceof Qr){const Ue=f.getScopes().filter(it=>""!==it);Ue.length>0&&(z.scopes=Ue.join(","))}y.tenantId&&(z.tid=y.tenantId);const re=z;for(const Ue of Object.keys(re))void 0===re[Ue]&&delete re[Ue];return`${function Iy({config:y}){return y.emulator?fn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(re).slice(1)}`}const ws="webStorageSupport";class oc extends class Ay{constructor(f){this.factorId=f}_process(f,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,b);case"signin":return this._finalizeSignIn(f,m.credential);default:return Z("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new oc(f)}_finalizeEnroll(f,m,b){return function wd(y,f){return qt(y,"POST","/v2/accounts/mfaEnrollment:finalize",tn(y,f))}(f,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ta(y,f){return qt(y,"POST","/v2/accounts/mfaSignIn:finalize",tn(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ll=(()=>{class y{constructor(){}static assertion(m){return oc._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Kt="@firebase/auth",ac="0.19.11";class $g{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,u.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(b=>{var I;f((null===(I=b)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function aa(){return window}function to(){return(to=(0,u.Z)(function*(y,f,m){var b;const{BuildInfo:I}=aa();se(f.sessionId,"AuthEvent did not contain a session ID");const x=yield My(f.sessionId),z={};return sr()?z.ibi=I.packageName:Rn()?z.apn=I.packageName:Se(y,"operation-not-supported-in-this-environment"),I.displayName&&(z.appDisplayName=I.displayName),z.sessionId=x,kd(y,m,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,z)})).apply(this,arguments)}function ii(){return(ii=(0,u.Z)(function*(y){const{BuildInfo:f}=aa(),m={};sr()?m.iosBundleId=f.packageName:Rn()?m.androidPackageName=f.packageName:Se(y,"operation-not-supported-in-this-environment"),yield Md(y,m)})).apply(this,arguments)}function Ga(){return(Ga=(0,u.Z)(function*(y,f,m){const{cordova:b}=aa();let I=()=>{};try{yield new Promise((x,z)=>{let re=null;function Ue(){var ft;x();const kn=null===(ft=b.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof kn&&kn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function it(){re||(re=window.setTimeout(()=>{z(be(y,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===(null==document?void 0:document.visibilityState)&&it()}f.addPassiveListener(Ue),document.addEventListener("resume",it,!1),Rn()&&document.addEventListener("visibilitychange",Et,!1),I=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",Et,!1),re&&window.clearTimeout(re)}})}finally{I()}})).apply(this,arguments)}function My(y){return qg.apply(this,arguments)}function qg(){return(qg=(0,u.Z)(function*(y){const f=iw(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(I=>I.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function iw(y){if(se(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let b=0;b<y.length;b++)m[b]=y.charCodeAt(b);return m}!function Ny(y){(0,ae._registerComponent)(new ie.wA("auth",(f,{options:m})=>{const b=f.getProvider("app").getImmediate(),I=f.getProvider("heartbeat"),{apiKey:x,authDomain:z}=b.options;return((re,Ue)=>{ne(x&&!x.includes(":"),"invalid-api-key",{appName:re.name}),ne(!(null==z?void 0:z.includes(":")),"argument-error",{appName:re.name});const it={apiKey:x,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ia(y)},Et=new vi(re,Ue,it);return function le(y,f){const m=(null==f?void 0:f.persistence)||[],b=(Array.isArray(m)?m:[m]).map(oe);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(Et,m),Et})(b,I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,b)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ie.wA("auth-internal",f=>{const m=Pe(f.getProvider("auth").getImmediate());return new $g(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Kt,ac,function ja(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(Kt,ac,"esm2017")}("Browser");class Vl extends Xi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,u.Z)(function*(){yield f.initPromise})()}}function xy(y){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,u.Z)(function*(y){const f=yield uc()._get(cc(y));return f&&(yield uc()._remove(cc(y))),f})).apply(this,arguments)}function zg(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*f.length);y.push(f.charAt(b))}return y.join("")}function uc(){return oe(Er)}function cc(y){return he("authEvent",y.config.apiKey,y.name)}function dc(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...m]=y.split("?");return(0,P.zd)(m.join("?"))}function If(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function hc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Bd(y=(0,P.z$)()){return!("file:"!==hc()&&"ionic:"!==hc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function zr(){try{const y=self.localStorage,f=Cn();if(y)return y.setItem(f,"1"),y.removeItem(f),!function fc(y=(0,P.z$)()){return function Ud(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ow(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return la()&&(0,P.hl)()}return!1}function la(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ua(){return(function Rf(){return"http:"===hc()||"https:"===hc()}()||(0,P.ru)()||Bd())&&!function Fy(){return(0,P.b$)()||(0,P.UG)()}()&&zr()&&!la()}function pc(){return Bd()&&"undefined"!=typeof document}function ca(){return(ca=(0,u.Z)(function*(){return!!pc()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const si={LOCAL:"local",NONE:"none",SESSION:"session"},gc=ne,xf="persistence";function mc(y){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,u.Z)(function*(y){yield y._initializationPromise;const f=jd(),m=he(xf,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function jd(){var y;try{return(null===(y=function Mf(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Vy=ne;class Es{constructor(){this.browserResolver=oe(class sc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zt,this._completeRedirectFn=Un}_openPopup(f,m,b,I){var x=this;return(0,u.Z)(function*(){var z;se(null===(z=x.eventManagers[f._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const re=kd(f,m,b,St(),I);return function bs(y,f,m,b=500,I=600){const x=Math.max((window.screen.availHeight-I)/2,0).toString(),z=Math.max((window.screen.availWidth-b)/2,0).toString();let re="";const Ue=Object.assign(Object.assign({},Ro),{width:b.toString(),height:I.toString(),top:x,left:z}),it=(0,P.z$)().toLowerCase();m&&(re=Ir(it)?"_blank":m),wt(it)&&(f=f||"http://localhost",Ue.scrollbars="yes");const Et=Object.entries(Ue).reduce((kn,[oi,Gl])=>`${kn}${oi}=${Gl},`,"");if(function ul(y=(0,P.z$)()){var f;return sr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(it)&&"_self"!==re)return function Ty(y,f){const m=document.createElement("a");m.href=y,m.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(f||"",re),new ar(null);const ft=window.open(f||"",re,Et);ne(ft,y,"popup-blocked");try{ft.focus()}catch(kn){}return new ar(ft)}(f,re,Cn())})()}_openRedirect(f,m,b,I){var x=this;return(0,u.Z)(function*(){return yield x._originValidation(f),function or(y){Qt().location.href=y}(kd(f,m,b,St(),I)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:I,promise:x}=this.eventManagers[m];return I?Promise.resolve(I):(se(x,"If manager is not set, promise should be"),x)}const b=this.initAndGetManager(f);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(f){var m=this;return(0,u.Z)(function*(){const b=yield function Dy(y){return bf.apply(this,arguments)}(f),I=new Xi(f);return b.register("authEvent",x=>(ne(null==x?void 0:x.authEvent,f,"invalid-auth-event"),{status:I.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:I},m.iframes[f._key()]=b,I})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(ws,{type:ws},I=>{var x;const z=null===(x=null==I?void 0:I[0])||void 0===x?void 0:x[ws];void 0!==z&&m(!!z),Se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function yy(y){return No.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return cs()||Jt()||sr()}}),this.cordovaResolver=oe(class ky{constructor(){this._redirectPersistence=Zt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Un}_initialize(f){var m=this;return(0,u.Z)(function*(){const b=f._key();let I=m.eventManagers.get(b);return I||(I=new Vl(f),m.eventManagers.set(b,I),m.attachCallbackListeners(f,I)),I})()}_openPopup(f){Se(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,b,I){var x=this;return(0,u.Z)(function*(){!function Cf(y){var f,m,b,I,x,z,re,Ue,it,Et;const ft=aa();ne("function"==typeof(null===(f=null==ft?void 0:ft.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(m=null==ft?void 0:ft.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(x=null===(I=null===(b=null==ft?void 0:ft.cordova)||void 0===b?void 0:b.plugins)||void 0===I?void 0:I.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ue=null===(re=null===(z=null==ft?void 0:ft.cordova)||void 0===z?void 0:z.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Et=null===(it=null==ft?void 0:ft.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===Et?void 0:Et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const z=yield x._initialize(f);yield z.initialized(),z.resetRedirect(),function Qi(){qr.clear()}(),yield x._originValidation(f);const re=function Sf(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:zg(),postBody:null,tenantId:y.tenantId,error:be(y,"no-auth-event")}}(f,b,I);yield function sw(y,f){return uc()._set(cc(y),f)}(f,re);const Ue=yield function Pd(y,f,m){return to.apply(this,arguments)}(f,re,m),it=yield function lc(y){const{cordova:f}=aa();return new Promise(m=>{f.plugins.browsertab.isAvailable(b=>{let I=null;b?f.plugins.browsertab.openUrl(y):I=f.InAppBrowser.open(y,function ho(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(I)})})}(Ue);return function Fd(y,f,m){return Ga.apply(this,arguments)}(f,z,it)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Df(y){return ii.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:b,handleOpenURL:I,BuildInfo:x}=aa(),z=setTimeout((0,u.Z)(function*(){yield xy(f),m.onEvent(If())}),500),re=function(){var Et=(0,u.Z)(function*(ft){clearTimeout(z);const kn=yield xy(f);let oi=null;kn&&(null==ft?void 0:ft.url)&&(oi=function Oy(y,f){var m,b;const I=function Mo(y){const f=dc(y),m=f.link?decodeURIComponent(f.link):void 0,b=dc(m).link,I=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return dc(I).link||I||b||m||y}(f);if(I.includes("/__/auth/callback")){const x=dc(I),z=x.firebaseError?function no(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(x.firebaseError)):null,re=null===(b=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Ue=re?be(re):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:I,postBody:null}}return null}(kn,ft.url)),m.onEvent(oi||If())});return function(kn){return Et.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,re);const Ue=I,it=`${x.packageName.toLowerCase()}://`;aa().handleOpenURL=function(){var Et=(0,u.Z)(function*(ft){if(ft.toLowerCase().startsWith(it)&&re({url:ft}),"function"==typeof Ue)try{Ue(ft)}catch(kn){console.error(kn)}});return function(ft){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Zt,this._completeRedirectFn=Un}_initialize(f){var m=this;return(0,u.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,b,I){var x=this;return(0,u.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,m,b,I)})()}_openRedirect(f,m,b,I){var x=this;return(0,u.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,m,b,I)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return pc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,u.Z)(function*(){if(f.underlyingResolver)return;const m=yield function xr(){return ca.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Of(y){return y.unwrap()}function kf(y){return Gd(y)}function Gd(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Bi.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=Na;break;case"facebook.com":b=mo;break;case"github.com":b=fd;break;case"twitter.com":b=gl;break;default:const{oauthIdToken:I,oauthAccessToken:x,oauthTokenSecret:z,pendingToken:re,nonce:Ue}=f;return x||z||I||re?re?m.startsWith("saml.")?Qn._create(m,re):fs._fromParams({providerId:m,signInMethod:m,pendingToken:re,idToken:I,accessToken:x}):new Wo(m).credential({idToken:I,accessToken:x,rawNonce:Ue}):null}return y instanceof P.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function An(y,f){return f.catch(m=>{throw m instanceof P.ZR&&function Uy(y,f){var m;const b=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new jy(y,function Nl(y,f){var m;const b=(0,P.m9)(y),I=f;return ne(f.customData.operationType,b,"argument-error"),ne(null===(m=I.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),Pa._fromError(b,I)}(y,f));else if(b){const I=Gd(f),x=f;I&&(x.credential=I,x.tenantId=b.tenantId||void 0,x.email=b.email||void 0,x.phoneNumber=b.phoneNumber||void 0)}}(y,m),m}).then(m=>{const I=m.user;return{operationType:m.operationType,credential:kf(m),additionalUserInfo:Rr(m),user:Oo.getOrCreate(I)}})}function Pf(y,f){return xo.apply(this,arguments)}function xo(){return(xo=(0,u.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:b=>An(y,m.confirm(b))}})).apply(this,arguments)}class jy{constructor(f,m){this.resolver=m,this.auth=function By(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return An(Of(this.auth),this.resolver.resolveSignIn(f))}}class Oo{constructor(f){this._delegate=f,this.multiFactor=function Ed(y){const f=(0,P.m9)(y);return Jo.has(f)||Jo.set(f,_s._fromUser(f)),Jo.get(f)}(f)}static getOrCreate(f){return Oo.USER_MAP.has(f)||Oo.USER_MAP.set(f,new Oo(f)),Oo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,u.Z)(function*(){return An(m.auth,Oi(m._delegate,f))})()}linkWithPhoneNumber(f,m){var b=this;return(0,u.Z)(function*(){return Pf(b.auth,function Ad(y,f,m){return Ba.apply(this,arguments)}(b._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,u.Z)(function*(){return An(m.auth,function _f(y,f,m){return xl.apply(this,arguments)}(m._delegate,f,Es))})()}linkWithRedirect(f){var m=this;return(0,u.Z)(function*(){return yield mc(Pe(m.auth)),function Xe(y,f,m){return function Dt(y,f,m){return $t.apply(this,arguments)}(y,f,m)}(m._delegate,f,Es)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,u.Z)(function*(){return An(m.auth,qs(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Pf(this.auth,function Bg(y,f,m){return Ju.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return An(this.auth,function Io(y,f,m){return ia.apply(this,arguments)}(this._delegate,f,Es))}reauthenticateWithRedirect(f){var m=this;return(0,u.Z)(function*(){return yield mc(Pe(m.auth)),function ee(y,f,m){return function xe(y,f,m){return Ye.apply(this,arguments)}(y,f,m)}(m._delegate,f,Es)})()}sendEmailVerification(f){return function ki(y,f){return Fu.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,u.Z)(function*(){return yield function Ra(y,f){return Nu.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Bu(y,f){return Uu((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function _d(y,f){return Uu((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function In(y,f){return bn.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ka(y,f){return Vu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Il(y,f,m){return Al.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oo.USER_MAP=new WeakMap;const _c=ne;let Ff=(()=>{class y{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:I}=m.options;_c(I,"invalid-api-key",{appName:m.name}),_c(I,"invalid-api-key",{appName:m.name});const x="undefined"!=typeof window?Es:void 0;this._delegate=b.initialize({options:{persistence:yc(I,m.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function _n(y,f,m){const b=Pe(y);ne(b._canInitEmulator,b,"emulator-config-failed"),ne(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const I=!!(null==m?void 0:m.disableWarnings),x=yr(f),{host:z,port:re}=function Ls(y){const f=yr(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(b);if(I){const x=I[1];return{host:x,port:Gn(b.substr(x.length+1))}}{const[x,z]=b.split(":");return{host:x,port:Gn(z)}}}(f);b.config.emulator={url:`${x}//${z}${null===re?"":`:${re}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:z,port:re,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function Zi(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,b)}applyActionCode(m){return function Mu(y,f){return Ce.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Vt(this._delegate,m)}confirmPasswordReset(m,b){return function Cl(y,f,m){return Ru.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var I=this;return(0,u.Z)(function*(){return An(I._delegate,function Yo(y,f,m){return ei.apply(this,arguments)}(I._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Sl(y,f){return Ks.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Pu(y,f){const m=go.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,u.Z)(function*(){_c(ua(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function It(y,f){return zn.apply(this,arguments)}(m._delegate,Es);return b?An(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Py(y,f){Pe(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,b,I){const{next:x,error:z,complete:re}=jl(m,b,I);return this._delegate.onAuthStateChanged(x,z,re)}onIdTokenChanged(m,b,I){const{next:x,error:z,complete:re}=jl(m,b,I);return this._delegate.onIdTokenChanged(x,z,re)}sendSignInLinkToEmail(m,b){return function ku(y,f,m){return md.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function El(y,f,m){return Dl.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,u.Z)(function*(){let I;switch(function Ly(y,f){gc(Object.values(si).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?gc(f!==si.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?gc(f===si.NONE,y,"unsupported-persistence-type"):la()?gc(f===si.NONE||f===si.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):gc(f===si.NONE||zr(),y,"unsupported-persistence-type")}(b._delegate,m),m){case si.SESSION:I=Zt;break;case si.LOCAL:I=(yield oe(sn)._isAvailable())?sn:Er;break;case si.NONE:I=q;break;default:return Se("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(I)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return An(this._delegate,function _l(y){return pd.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return An(this._delegate,Vn(this._delegate,m))}signInWithCustomToken(m){return An(this._delegate,function zs(y,f){return Ws.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return An(this._delegate,function Ou(y,f,m){return Vn((0,P.m9)(y),Au.credential(f,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return An(this._delegate,function Tl(y,f,m){return Zs.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Pf(this._delegate,function Id(y,f,m){return On.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,u.Z)(function*(){return _c(ua(),b._delegate,"operation-not-supported-in-this-environment"),An(b._delegate,function eo(y,f,m){return ec.apply(this,arguments)}(b._delegate,m,Es))})()}signInWithRedirect(m){var b=this;return(0,u.Z)(function*(){return _c(ua(),b._delegate,"operation-not-supported-in-this-environment"),yield mc(b._delegate),function M(y,f,m){return function V(y,f,m){return W.apply(this,arguments)}(y,f,m)}(b._delegate,m,Es)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Dn(y,f){return Ko.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=si,y})();function jl(y,f,m){let b=y;"function"!=typeof y&&({next:b,error:f,complete:m}=y);const I=b;return{next:z=>I(z&&Oo.getOrCreate(z)),error:f,complete:m}}function yc(y,f){const m=function Wg(y,f){const m=jd();if(!m)return[];const b=he(xf,y,f);switch(m.getItem(b)){case si.NONE:return[q];case si.LOCAL:return[sn,Zt];case si.SESSION:return[Zt];default:return[]}}(y,f);if("undefined"!=typeof self&&!m.includes(sn)&&m.push(sn),"undefined"!=typeof window)for(const b of[Er,Zt])m.includes(b)||m.push(b);return m.includes(q)||m.push(q),m}class Lf{constructor(){this.providerId="phone",this._delegate=new Bi(Of(Y.Z.auth()))}static credential(f,m){return Bi.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Lf.PHONE_SIGN_IN_METHOD=Bi.PHONE_SIGN_IN_METHOD,Lf.PROVIDER_ID=Bi.PROVIDER_ID;const vc=ne;class Vf{constructor(f,m,b=Y.Z.app()){var I;vc(null===(I=b.options)||void 0===I?void 0:I.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Sd(f,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Zg(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new Ff(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Au,FacebookAuthProvider:mo,GithubAuthProvider:fd,GoogleAuthProvider:Na,OAuthProvider:Wo,SAMLAuthProvider:wi,PhoneAuthProvider:Lf,PhoneMultiFactorGenerator:Ll,RecaptchaVerifier:Vf,TwitterAuthProvider:gl,Auth:Ff,AuthCredential:un,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},8306:(ct,Te,k)=>{k.d(Te,{y:()=>G});var u=k(930),Y=k(727),P=k(8822),ae=k(4671);var ie=k(2416),fe=k(576),de=k(2806);let G=(()=>{class Ne{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const pe=new Ne;return pe.source=this,pe.operator=Be,pe}subscribe(Be,pe,Ee){const rt=function Ke(Ne){return Ne&&Ne instanceof u.Lv||function Q(Ne){return Ne&&(0,fe.m)(Ne.next)&&(0,fe.m)(Ne.error)&&(0,fe.m)(Ne.complete)}(Ne)&&(0,Y.Nn)(Ne)}(Be)?Be:new u.Hp(Be,pe,Ee);return(0,de.x)(()=>{const{operator:Qe,source:Se}=this;rt.add(Qe?Qe.call(rt,Se):Se?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(Be){try{return this._subscribe(Be)}catch(pe){Be.error(pe)}}forEach(Be,pe){return new(pe=H(pe))((Ee,rt)=>{const Qe=new u.Hp({next:Se=>{try{Be(Se)}catch(be){rt(be),Qe.unsubscribe()}},error:rt,complete:Ee});this.subscribe(Qe)})}_subscribe(Be){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Be)}[P.L](){return this}pipe(...Be){return function ge(Ne){return 0===Ne.length?ae.y:1===Ne.length?Ne[0]:function(Be){return Ne.reduce((pe,Ee)=>Ee(pe),Be)}}(Be)(this)}toPromise(Be){return new(Be=H(Be))((pe,Ee)=>{let rt;this.subscribe(Qe=>rt=Qe,Qe=>Ee(Qe),()=>pe(rt))})}}return Ne.create=ke=>new Ne(ke),Ne})();function H(Ne){var ke;return null!==(ke=null!=Ne?Ne:ie.v.Promise)&&void 0!==ke?ke:Promise}},7579:(ct,Te,k)=>{k.d(Te,{x:()=>ie});var u=k(8306),Y=k(727);const ae=(0,k(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),ge=k(2806);let ie=(()=>{class de extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Q=new fe(this,this);return Q.operator=H,Q}_throwIfClosed(){if(this.closed)throw new ae}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Q}=this;for(;Q.length;)Q.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Q,isStopped:Ke,observers:Ne}=this;return Q||Ke?Y.Lc:(this.currentObservers=null,Ne.push(H),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Ne,H)}))}_checkFinalizedStatuses(H){const{hasError:Q,thrownError:Ke,isStopped:Ne}=this;Q?H.error(Ke):Ne&&H.complete()}asObservable(){const H=new u.y;return H.source=this,H}}return de.create=(G,H)=>new fe(G,H),de})();class fe extends ie{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Q||Q.call(H,G)}error(G){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Q||Q.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,Q;return null!==(Q=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==Q?Q:Y.Lc}}},930:(ct,Te,k)=>{k.d(Te,{Hp:()=>Be,Lv:()=>Q});var u=k(576),Y=k(727),P=k(2416),ae=k(7849),X=k(5032);const ge=de("C",void 0,void 0);function de(Se,be,we){return{kind:Se,value:be,error:we}}var G=k(3410),H=k(2806);class Q extends Y.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,Y.Nn)(be)&&be.add(this)):this.destination=Qe}static create(be,we,qe){return new Be(be,we,qe)}next(be){this.isStopped?rt(function fe(Se){return de("N",Se,void 0)}(be),this):this._next(be)}error(be){this.isStopped?rt(function ie(Se){return de("E",void 0,Se)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?rt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Ne(Se,be){return Ke.call(Se,be)}class ke{constructor(be){this.partialObserver=be}next(be){const{partialObserver:we}=this;if(we.next)try{we.next(be)}catch(qe){pe(qe)}}error(be){const{partialObserver:we}=this;if(we.error)try{we.error(be)}catch(qe){pe(qe)}else pe(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(we){pe(we)}}}class Be extends Q{constructor(be,we,qe){let $e;if(super(),(0,u.m)(be)||!be)$e={next:null!=be?be:void 0,error:null!=we?we:void 0,complete:null!=qe?qe:void 0};else{let ne;this&&P.v.useDeprecatedNextContext?(ne=Object.create(be),ne.unsubscribe=()=>this.unsubscribe(),$e={next:be.next&&Ne(be.next,ne),error:be.error&&Ne(be.error,ne),complete:be.complete&&Ne(be.complete,ne)}):$e=be}this.destination=new ke($e)}}function pe(Se){P.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Se):(0,ae.h)(Se)}function rt(Se,be){const{onStoppedNotification:we}=P.v;we&&G.z.setTimeout(()=>we(Se,be))}const Qe={closed:!0,next:X.Z,error:function Ee(Se){throw Se},complete:X.Z}},727:(ct,Te,k)=>{k.d(Te,{Lc:()=>ge,w0:()=>X,Nn:()=>ie});var u=k(576);const P=(0,k(3888).d)(de=>function(H){de(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Q,Ke)=>`${Ke+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ae=k(8737);class X{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ne of H)Ne.remove(this);else H.remove(this);const{initialTeardown:Q}=this;if((0,u.m)(Q))try{Q()}catch(Ne){G=Ne instanceof P?Ne.errors:[Ne]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Ne of Ke)try{fe(Ne)}catch(ke){G=null!=G?G:[],ke instanceof P?G=[...G,...ke.errors]:G.push(ke)}}if(G)throw new P(G)}}add(G){var H;if(G&&G!==this)if(this.closed)fe(G);else{if(G instanceof X){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ae.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,ae.P)(H,G),G instanceof X&&G._removeParent(this)}}X.EMPTY=(()=>{const de=new X;return de.closed=!0,de})();const ge=X.EMPTY;function ie(de){return de instanceof X||de&&"closed"in de&&(0,u.m)(de.remove)&&(0,u.m)(de.add)&&(0,u.m)(de.unsubscribe)}function fe(de){(0,u.m)(de)?de():de.unsubscribe()}},2416:(ct,Te,k)=>{k.d(Te,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,Te,k)=>{k.d(Te,{E:()=>Y});const Y=new(k(8306).y)(X=>X.complete())},8996:(ct,Te,k)=>{k.d(Te,{D:()=>be});var u=k(8421),Y=k(5363),P=k(9468),ge=k(8306),fe=k(2202),de=k(576),G=k(9672);function Q(we,qe){if(!we)throw new Error("Iterable cannot be null");return new ge.y($e=>{(0,G.f)($e,qe,()=>{const ne=we[Symbol.asyncIterator]();(0,G.f)($e,qe,()=>{ne.next().then(Z=>{Z.done?$e.complete():$e.next(Z.value)})},0,!0)})})}var Ke=k(3670),Ne=k(8239),ke=k(1144),Be=k(6495),pe=k(2206),Ee=k(4532),rt=k(3260);function be(we,qe){return qe?function Se(we,qe){if(null!=we){if((0,Ke.c)(we))return function ae(we,qe){return(0,u.Xf)(we).pipe((0,P.R)(qe),(0,Y.Q)(qe))}(we,qe);if((0,ke.z)(we))return function ie(we,qe){return new ge.y($e=>{let ne=0;return qe.schedule(function(){ne===we.length?$e.complete():($e.next(we[ne++]),$e.closed||this.schedule())})})}(we,qe);if((0,Ne.t)(we))return function X(we,qe){return(0,u.Xf)(we).pipe((0,P.R)(qe),(0,Y.Q)(qe))}(we,qe);if((0,pe.D)(we))return Q(we,qe);if((0,Be.T)(we))return function H(we,qe){return new ge.y($e=>{let ne;return(0,G.f)($e,qe,()=>{ne=we[fe.h](),(0,G.f)($e,qe,()=>{let Z,se;try{({value:Z,done:se}=ne.next())}catch(me){return void $e.error(me)}se?$e.complete():$e.next(Z)},0,!0)}),()=>(0,de.m)(null==ne?void 0:ne.return)&&ne.return()})}(we,qe);if((0,rt.L)(we))return function Qe(we,qe){return Q((0,rt.Q)(we),qe)}(we,qe)}throw(0,Ee.z)(we)}(we,qe):(0,u.Xf)(we)}},8421:(ct,Te,k)=>{k.d(Te,{Xf:()=>Ke});var u=k(655),Y=k(1144),P=k(8239),ae=k(8306),X=k(3670),ge=k(2206),ie=k(4532),fe=k(6495),de=k(3260),G=k(576),H=k(7849),Q=k(8822);function Ke(Se){if(Se instanceof ae.y)return Se;if(null!=Se){if((0,X.c)(Se))return function Ne(Se){return new ae.y(be=>{const we=Se[Q.L]();if((0,G.m)(we.subscribe))return we.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,Y.z)(Se))return function ke(Se){return new ae.y(be=>{for(let we=0;we<Se.length&&!be.closed;we++)be.next(Se[we]);be.complete()})}(Se);if((0,P.t)(Se))return function Be(Se){return new ae.y(be=>{Se.then(we=>{be.closed||(be.next(we),be.complete())},we=>be.error(we)).then(null,H.h)})}(Se);if((0,ge.D)(Se))return Ee(Se);if((0,fe.T)(Se))return function pe(Se){return new ae.y(be=>{for(const we of Se)if(be.next(we),be.closed)return;be.complete()})}(Se);if((0,de.L)(Se))return function rt(Se){return Ee((0,de.Q)(Se))}(Se)}throw(0,ie.z)(Se)}function Ee(Se){return new ae.y(be=>{(function Qe(Se,be){var we,qe,$e,ne;return(0,u.mG)(this,void 0,void 0,function*(){try{for(we=(0,u.KL)(Se);!(qe=yield we.next()).done;)if(be.next(qe.value),be.closed)return}catch(Z){$e={error:Z}}finally{try{qe&&!qe.done&&(ne=we.return)&&(yield ne.call(we))}finally{if($e)throw $e.error}}be.complete()})})(Se,be).catch(we=>be.error(we))})}},6451:(ct,Te,k)=>{k.d(Te,{T:()=>ge});var u=k(8189),Y=k(8421),P=k(515),ae=k(3269),X=k(8996);function ge(...ie){const fe=(0,ae.yG)(ie),de=(0,ae._6)(ie,1/0),G=ie;return G.length?1===G.length?(0,Y.Xf)(G[0]):(0,u.J)(de)((0,X.D)(G,fe)):P.E}},5403:(ct,Te,k)=>{k.d(Te,{x:()=>Y});var u=k(930);function Y(ae,X,ge,ie,fe){return new P(ae,X,ge,ie,fe)}class P extends u.Lv{constructor(X,ge,ie,fe,de,G){super(X),this.onFinalize=de,this.shouldUnsubscribe=G,this._next=ge?function(H){try{ge(H)}catch(Q){X.error(Q)}}:super._next,this._error=fe?function(H){try{fe(H)}catch(Q){X.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(H){X.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ct,Te,k)=>{k.d(Te,{U:()=>P});var u=k(4482),Y=k(5403);function P(ae,X){return(0,u.e)((ge,ie)=>{let fe=0;ge.subscribe((0,Y.x)(ie,de=>{ie.next(ae.call(X,de,fe++))}))})}},8189:(ct,Te,k)=>{k.d(Te,{J:()=>P});var u=k(5577),Y=k(4671);function P(ae=1/0){return(0,u.z)(Y.y,ae)}},5577:(ct,Te,k)=>{k.d(Te,{z:()=>fe});var u=k(4004),Y=k(8421),P=k(4482),ae=k(9672),X=k(5403),ie=k(576);function fe(de,G,H=1/0){return(0,ie.m)(G)?fe((Q,Ke)=>(0,u.U)((Ne,ke)=>G(Q,Ne,Ke,ke))((0,Y.Xf)(de(Q,Ke))),H):("number"==typeof G&&(H=G),(0,P.e)((Q,Ke)=>function ge(de,G,H,Q,Ke,Ne,ke,Be){const pe=[];let Ee=0,rt=0,Qe=!1;const Se=()=>{Qe&&!pe.length&&!Ee&&G.complete()},be=qe=>Ee<Q?we(qe):pe.push(qe),we=qe=>{Ne&&G.next(qe),Ee++;let $e=!1;(0,Y.Xf)(H(qe,rt++)).subscribe((0,X.x)(G,ne=>{null==Ke||Ke(ne),Ne?be(ne):G.next(ne)},()=>{$e=!0},void 0,()=>{if($e)try{for(Ee--;pe.length&&Ee<Q;){const ne=pe.shift();ke?(0,ae.f)(G,ke,()=>we(ne)):we(ne)}Se()}catch(ne){G.error(ne)}}))};return de.subscribe((0,X.x)(G,be,()=>{Qe=!0,Se()})),()=>{null==Be||Be()}}(Q,Ke,de,H)))}},5363:(ct,Te,k)=>{k.d(Te,{Q:()=>ae});var u=k(9672),Y=k(4482),P=k(5403);function ae(X,ge=0){return(0,Y.e)((ie,fe)=>{ie.subscribe((0,P.x)(fe,de=>(0,u.f)(fe,X,()=>fe.next(de),ge),()=>(0,u.f)(fe,X,()=>fe.complete(),ge),de=>(0,u.f)(fe,X,()=>fe.error(de),ge)))})}},3099:(ct,Te,k)=>{k.d(Te,{B:()=>ge});var u=k(8996),Y=k(5698),P=k(7579),ae=k(930),X=k(4482);function ge(fe={}){const{connector:de=(()=>new P.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:Q=!0}=fe;return Ke=>{let Ne=null,ke=null,Be=null,pe=0,Ee=!1,rt=!1;const Qe=()=>{null==ke||ke.unsubscribe(),ke=null},Se=()=>{Qe(),Ne=Be=null,Ee=rt=!1},be=()=>{const we=Ne;Se(),null==we||we.unsubscribe()};return(0,X.e)((we,qe)=>{pe++,!rt&&!Ee&&Qe();const $e=Be=null!=Be?Be:de();qe.add(()=>{pe--,0===pe&&!rt&&!Ee&&(ke=ie(be,Q))}),$e.subscribe(qe),Ne||(Ne=new ae.Hp({next:ne=>$e.next(ne),error:ne=>{rt=!0,Qe(),ke=ie(Se,G,ne),$e.error(ne)},complete:()=>{Ee=!0,Qe(),ke=ie(Se,H),$e.complete()}}),(0,u.D)(we).subscribe(Ne))})(Ke)}}function ie(fe,de,...G){return!0===de?(fe(),null):!1===de?null:de(...G).pipe((0,Y.q)(1)).subscribe(()=>fe())}},9468:(ct,Te,k)=>{k.d(Te,{R:()=>Y});var u=k(4482);function Y(P,ae=0){return(0,u.e)((X,ge)=>{ge.add(P.schedule(()=>X.subscribe(ge),ae))})}},5698:(ct,Te,k)=>{k.d(Te,{q:()=>ae});var u=k(515),Y=k(4482),P=k(5403);function ae(X){return X<=0?()=>u.E:(0,Y.e)((ge,ie)=>{let fe=0;ge.subscribe((0,P.x)(ie,de=>{++fe<=X&&(ie.next(de),X<=fe&&ie.complete())}))})}},8505:(ct,Te,k)=>{k.d(Te,{b:()=>X});var u=k(576),Y=k(4482),P=k(5403),ae=k(4671);function X(ge,ie,fe){const de=(0,u.m)(ge)||ie||fe?{next:ge,error:ie,complete:fe}:ge;return de?(0,Y.e)((G,H)=>{var Q;null===(Q=de.subscribe)||void 0===Q||Q.call(de);let Ke=!0;G.subscribe((0,P.x)(H,Ne=>{var ke;null===(ke=de.next)||void 0===ke||ke.call(de,Ne),H.next(Ne)},()=>{var Ne;Ke=!1,null===(Ne=de.complete)||void 0===Ne||Ne.call(de),H.complete()},Ne=>{var ke;Ke=!1,null===(ke=de.error)||void 0===ke||ke.call(de,Ne),H.error(Ne)},()=>{var Ne,ke;Ke&&(null===(Ne=de.unsubscribe)||void 0===Ne||Ne.call(de)),null===(ke=de.finalize)||void 0===ke||ke.call(de)}))}):ae.y}},4408:(ct,Te,k)=>{k.d(Te,{o:()=>X});var u=k(727);class Y extends u.w0{constructor(ie,fe){super()}schedule(ie,fe=0){return this}}const P={setInterval(ge,ie,...fe){const{delegate:de}=P;return(null==de?void 0:de.setInterval)?de.setInterval(ge,ie,...fe):setInterval(ge,ie,...fe)},clearInterval(ge){const{delegate:ie}=P;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ge)},delegate:void 0};var ae=k(8737);class X extends Y{constructor(ie,fe){super(ie,fe),this.scheduler=ie,this.work=fe,this.pending=!1}schedule(ie,fe=0){if(this.closed)return this;this.state=ie;const de=this.id,G=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(G,de,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(G,this.id,fe),this}requestAsyncId(ie,fe,de=0){return P.setInterval(ie.flush.bind(ie,this),de)}recycleAsyncId(ie,fe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return fe;P.clearInterval(fe)}execute(ie,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ie,fe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,fe){let G,de=!1;try{this.work(ie)}catch(H){de=!0,G=H||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ie,scheduler:fe}=this,{actions:de}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(de,this),null!=ie&&(this.id=this.recycleAsyncId(fe,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,Te,k)=>{k.d(Te,{v:()=>P});var u=k(6063);class Y{constructor(X,ge=Y.now){this.schedulerActionCtor=X,this.now=ge}schedule(X,ge=0,ie){return new this.schedulerActionCtor(this,X).schedule(ie,ge)}}Y.now=u.l.now;class P extends Y{constructor(X,ge=Y.now){super(X,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ge}=this;if(this._active)return void ge.push(X);let ie;this._active=!0;do{if(ie=X.execute(X.state,X.delay))break}while(X=ge.shift());if(this._active=!1,ie){for(;X=ge.shift();)X.unsubscribe();throw ie}}}},4986:(ct,Te,k)=>{k.d(Te,{z:()=>P,P:()=>ae});var u=k(4408);const P=new(k(7565).v)(u.o),ae=P},6063:(ct,Te,k)=>{k.d(Te,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ct,Te,k)=>{k.d(Te,{z:()=>u});const u={setTimeout(Y,P,...ae){const{delegate:X}=u;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,P,...ae):setTimeout(Y,P,...ae)},clearTimeout(Y){const{delegate:P}=u;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ct,Te,k)=>{k.d(Te,{h:()=>Y});const Y=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,Te,k)=>{k.d(Te,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ct,Te,k)=>{k.d(Te,{jO:()=>ae,yG:()=>X,_6:()=>ge});var u=k(576),Y=k(3532);function P(ie){return ie[ie.length-1]}function ae(ie){return(0,u.m)(P(ie))?ie.pop():void 0}function X(ie){return(0,Y.K)(P(ie))?ie.pop():void 0}function ge(ie,fe){return"number"==typeof P(ie)?ie.pop():fe}},8737:(ct,Te,k)=>{function u(Y,P){if(Y){const ae=Y.indexOf(P);0<=ae&&Y.splice(ae,1)}}k.d(Te,{P:()=>u})},3888:(ct,Te,k)=>{function u(Y){const ae=Y(X=>{Error.call(X),X.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(Te,{d:()=>u})},2806:(ct,Te,k)=>{k.d(Te,{x:()=>P,O:()=>ae});var u=k(2416);let Y=null;function P(X){if(u.v.useDeprecatedSynchronousErrorHandling){const ge=!Y;if(ge&&(Y={errorThrown:!1,error:null}),X(),ge){const{errorThrown:ie,error:fe}=Y;if(Y=null,ie)throw fe}}else X()}function ae(X){u.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(ct,Te,k)=>{function u(Y,P,ae,X=0,ge=!1){const ie=P.schedule(function(){ae(),ge?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(ie),!ge)return ie}k.d(Te,{f:()=>u})},4671:(ct,Te,k)=>{function u(Y){return Y}k.d(Te,{y:()=>u})},1144:(ct,Te,k)=>{k.d(Te,{z:()=>u});const u=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ct,Te,k)=>{k.d(Te,{D:()=>Y});var u=k(576);function Y(P){return Symbol.asyncIterator&&(0,u.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(ct,Te,k)=>{function u(Y){return"function"==typeof Y}k.d(Te,{m:()=>u})},3670:(ct,Te,k)=>{k.d(Te,{c:()=>P});var u=k(8822),Y=k(576);function P(ae){return(0,Y.m)(ae[u.L])}},6495:(ct,Te,k)=>{k.d(Te,{T:()=>P});var u=k(2202),Y=k(576);function P(ae){return(0,Y.m)(null==ae?void 0:ae[u.h])}},8239:(ct,Te,k)=>{k.d(Te,{t:()=>Y});var u=k(576);function Y(P){return(0,u.m)(null==P?void 0:P.then)}},3260:(ct,Te,k)=>{k.d(Te,{Q:()=>P,L:()=>ae});var u=k(655),Y=k(576);function P(X){return(0,u.FC)(this,arguments,function*(){const ie=X.getReader();try{for(;;){const{value:fe,done:de}=yield(0,u.qq)(ie.read());if(de)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(fe)}}finally{ie.releaseLock()}})}function ae(X){return(0,Y.m)(null==X?void 0:X.getReader)}},3532:(ct,Te,k)=>{k.d(Te,{K:()=>Y});var u=k(576);function Y(P){return P&&(0,u.m)(P.schedule)}},4482:(ct,Te,k)=>{k.d(Te,{A:()=>Y,e:()=>P});var u=k(576);function Y(ae){return(0,u.m)(null==ae?void 0:ae.lift)}function P(ae){return X=>{if(Y(X))return X.lift(function(ge){try{return ae(ge,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,Te,k)=>{function u(){}k.d(Te,{Z:()=>u})},7849:(ct,Te,k)=>{k.d(Te,{h:()=>P});var u=k(2416),Y=k(3410);function P(ae){Y.z.setTimeout(()=>{const{onUnhandledError:X}=u.v;if(!X)throw ae;X(ae)})}},4532:(ct,Te,k)=>{function u(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>u})},655:(ct,Te,k)=>{function ae(Z,se){var me={};for(var oe in Z)Object.prototype.hasOwnProperty.call(Z,oe)&&se.indexOf(oe)<0&&(me[oe]=Z[oe]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(oe=Object.getOwnPropertySymbols(Z);Oe<oe.length;Oe++)se.indexOf(oe[Oe])<0&&Object.prototype.propertyIsEnumerable.call(Z,oe[Oe])&&(me[oe[Oe]]=Z[oe[Oe]])}return me}function fe(Z,se,me,oe){return new(me||(me=Promise))(function(le,St){function en(bt){try{dt(oe.next(bt))}catch(hn){St(hn)}}function Fn(bt){try{dt(oe.throw(bt))}catch(hn){St(hn)}}function dt(bt){bt.done?le(bt.value):function Oe(le){return le instanceof me?le:new me(function(St){St(le)})}(bt.value).then(en,Fn)}dt((oe=oe.apply(Z,se||[])).next())})}function pe(Z){return this instanceof pe?(this.v=Z,this):new pe(Z)}function Ee(Z,se,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,oe=me.apply(Z,se||[]),le=[];return Oe={},St("next"),St("throw"),St("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function St(fn){oe[fn]&&(Oe[fn]=function(Mi){return new Promise(function(ln,as){le.push([fn,Mi,ln,as])>1||en(fn,Mi)})})}function en(fn,Mi){try{!function Fn(fn){fn.value instanceof pe?Promise.resolve(fn.value.v).then(dt,bt):hn(le[0][2],fn)}(oe[fn](Mi))}catch(ln){hn(le[0][3],ln)}}function dt(fn){en("next",fn)}function bt(fn){en("throw",fn)}function hn(fn,Mi){fn(Mi),le.shift(),le.length&&en(le[0][0],le[0][1])}}function Qe(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,se=Z[Symbol.asyncIterator];return se?se.call(Z):(Z=function Q(Z){var se="function"==typeof Symbol&&Symbol.iterator,me=se&&Z[se],oe=0;if(me)return me.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&oe>=Z.length&&(Z=void 0),{value:Z&&Z[oe++],done:!Z}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),me={},oe("next"),oe("throw"),oe("return"),me[Symbol.asyncIterator]=function(){return this},me);function oe(le){me[le]=Z[le]&&function(St){return new Promise(function(en,Fn){!function Oe(le,St,en,Fn){Promise.resolve(Fn).then(function(dt){le({value:dt,done:en})},St)}(en,Fn,(St=Z[le](St)).done,St.value)})}}}k.d(Te,{_T:()=>ae,mG:()=>fe,qq:()=>pe,FC:()=>Ee,KL:()=>Qe})},5e3:(ct,Te,k)=>{k.d(Te,{deG:()=>gy,tb:()=>Y0,AFp:()=>Z0,ip1:()=>O_,CZH:()=>zp,hGG:()=>tl,z2F:()=>j_,sBO:()=>gS,Sil:()=>Wp,_Vd:()=>pr,EJc:()=>uS,SBq:()=>qi,qLn:()=>An,vpe:()=>jo,tBr:()=>Ui,XFs:()=>pt,OlP:()=>qn,zs3:()=>ns,ZZ4:()=>eg,aQg:()=>tg,soG:()=>k_,YKP:()=>C0,h0i:()=>Zc,PXZ:()=>eD,R0b:()=>Ts,FiY:()=>Wn,Lbi:()=>Z1,g9A:()=>W1,Qsj:()=>BT,FYo:()=>w0,JOm:()=>re,tp0:()=>ji,Rgc:()=>Lp,dDg:()=>L_,q4F:()=>_1,GfV:()=>m1,s_b:()=>v_,ifc:()=>zt,eFA:()=>nD,G48:()=>Wh,Gpc:()=>H,X6Q:()=>ob,_c5:()=>_b,VLi:()=>V_,c2e:()=>$h,zSh:()=>ym,wAp:()=>lt,vHH:()=>ke,cg1:()=>Ch,kL8:()=>r_,dqk:()=>Ht,sIi:()=>za,CqO:()=>Wa,QGY:()=>Pr,F4k:()=>Lc,RDi:()=>ps,AaK:()=>fe,qOj:()=>Nm,TTD:()=>mo,_Bn:()=>h1,xp6:()=>nm,uIk:()=>km,Tol:()=>Km,ekj:()=>_a,Suo:()=>pu,Xpm:()=>Lt,lG2:()=>Jt,Yz7:()=>ln,cJS:()=>tn,oAB:()=>J,Yjl:()=>Ir,Y36:()=>hi,_UZ:()=>Uv,qZA:()=>ph,TgZ:()=>Zm,EpF:()=>Gv,n5z:()=>Ml,Ikx:()=>e0,SDv:()=>_0,QtT:()=>c1,pQV:()=>u_,LFG:()=>Xe,$8M:()=>La,$Z:()=>Bv,NdJ:()=>gp,CRH:()=>T_,oxw:()=>ot,ALo:()=>__,lcZ:()=>M0,Dn7:()=>x0,Hsn:()=>Ze,F$t:()=>yE,Q6J:()=>Wm,s9C:()=>ue,MGl:()=>Re,DdM:()=>g_,VKq:()=>S0,WLB:()=>Br,kEZ:()=>m_,iGM:()=>L0,MAs:()=>xv,CHM:()=>xu,LSH:()=>Bl,Udp:()=>zv,YNc:()=>dp,W1O:()=>Gp,_uU:()=>wh,Oqu:()=>Qm,hij:()=>yp,Gf:()=>Qa});var u=k(7579),Y=k(727),P=k(8306),ae=k(6451),X=k(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function de(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return fe(this())},s}function Q(s){return Ke(s)?s():s}function Ke(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class ke extends Error{constructor(o,l){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ee(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function be(s,o){const l=o?` in ${o}`:"";throw new ke(-201,`No provider for ${Ee(s)} found${l}`)}function bt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}function ln(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function tn(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return gr(s,zi)||gr(s,ls)}function gr(s,o){return s.hasOwnProperty(o)?s[o]:null}function jr(s){return s&&(s.hasOwnProperty(Gr)||s.hasOwnProperty(us))?s[Gr]:null}const zi=ge({\u0275prov:ge}),Gr=ge({\u0275inj:ge}),ls=ge({ngInjectableDef:ge}),us=ge({ngInjectorDef:ge});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Yr;function Yn(s){const o=Yr;return Yr=s,o}function yi(s,o,l){const c=qt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&pt.Optional?null:void 0!==o?o:void be(fe(s),"Injector")}function En(s){return{toString:s}.toString()}var ir=(()=>((ir=ir||{})[ir.OnPush=0]="OnPush",ir[ir.Default=1]="Default",ir))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const ut="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,mr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=ut||"undefined"!=typeof global&&global||Ct||mr,_r={},gt=[],Sr=ge({\u0275cmp:ge}),Ut=ge({\u0275dir:ge}),et=ge({\u0275pipe:ge}),Ie=ge({\u0275mod:ge}),tt=ge({\u0275fac:ge}),mt=ge({__NG_ELEMENT_ID__:ge});let jt=0;function Lt(s){return En(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===ir.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||gt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||gt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,g=s.features,v=s.pipes;return c.id+=jt++,c.inputs=wt(s.inputs,l),c.outputs=wt(s.outputs),g&&g.forEach(w=>w(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(B):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,c})}function B(s){return Wt(s)||function Rn(s){return s[Ut]||null}(s)}function q(s){return function kt(s){return s[et]||null}(s)}const he={};function J(s){return En(()=>{const o={type:s.type,bootstrap:s.bootstrap||gt,declarations:s.declarations||gt,imports:s.imports||gt,exports:s.exports||gt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(he[s.id]=s.type),o})}function wt(s,o){if(null==s)return _r;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=c,o&&(o[h]=g)}return l}const Jt=Lt;function Ir(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Wt(s){return s[Sr]||null}function mn(s,o){const l=s[Ie]||null;if(!l&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return l}function xi(s){return Array.isArray(s)&&"object"==typeof s[1]}function bi(s){return Array.isArray(s)&&!0===s[1]}function ud(s){return 0!=(8&s.flags)}function Us(s){return 2==(2&s.flags)}function hl(s){return 1==(1&s.flags)}function Jr(s){return null!==s.template}function uf(s){return 0!=(512&s[2])}function Qr(s,o){return s.hasOwnProperty(tt)?s[tt]:null}class Wo{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function mo(){return Na}function Na(s){return s.type.prototype.ngOnChanges&&(s.setInput=Og),fd}function fd(){const s=Hs(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===_r)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Og(s,o,l,c){const h=Hs(s)||function wi(s,o){return s[Qn]=o}(s,{previous:_r,current:null}),g=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[l],D=v[w];g[w]=new Wo(D&&D.currentValue,o,v===_r),s[c]=o}mo.ngInherit=!0;const Qn="__ngSimpleChanges__";function Hs(s){return s[Qn]||null}let vl;function ps(s){vl=s}function Ra(){return void 0!==vl?vl:"undefined"!=typeof document?document:void 0}function yn(s){return!!s.listen}const Zo={createRenderer:(s,o)=>Ra()};function dn(s){for(;Array.isArray(s);)s=s[0];return s}function yo(s,o){return dn(o[s])}function Ar(s,o){return dn(o[s.index])}function Ma(s,o){return s.data[o]}function Oi(s,o){return s[o]}function Nr(s,o){const l=o[s];return xi(l)?l:l[0]}function qs(s){return 4==(4&s[2])}function gs(s){return 128==(128&s[2])}function Xr(s,o){return null==o?null:s[o]}function zs(s){s[18]=0}function Ws(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const _t={lFrame:bo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Cl(){return _t.bindingsEnabled}function Ce(){return _t.lFrame.lView}function Vt(){return _t.lFrame.tView}function xu(s){return _t.lFrame.contextLView=s,s[8]}function Dn(){let s=Ko();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ko(){return _t.lFrame.currentTNode}function Yo(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ei(s,o){const l=_t.lFrame;l.currentTNode=s,l.isParent=o}function Ou(){return _t.lFrame.isParent}function ku(){_t.lFrame.isParent=!1}function Tl(){return _t.isInCheckNoChangesMode}function Zs(s){_t.isInCheckNoChangesMode=s}function wr(){const s=_t.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ks(){return _t.lFrame.bindingIndex++}function ki(s){const o=_t.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Il(s){_t.lFrame.inI18n=s}function Al(s,o){const l=_t.lFrame;l.bindingIndex=l.bindingRootIndex=s,Oa(o)}function Oa(s){_t.lFrame.currentDirectiveIndex=s}function Vu(){return _t.lFrame.currentQueryIndex}function Bu(s){_t.lFrame.currentQueryIndex=s}function _d(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Uu(s,o,l){if(l&pt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||l&pt.Host||(h=_d(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=_t.lFrame=yd();return c.currentTNode=o,c.lView=s,!0}function vo(s){const o=yd(),l=s[1];_t.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function yd(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?bo(s):o}function bo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function vd(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bd=vd;function wo(){const s=vd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Rr(){return _t.lFrame.selectedIndex}function Js(s){_t.lFrame.selectedIndex=s}function Mn(){const s=_t.lFrame;return Ma(s.tView,s.selectedIndex)}function ms(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function Pa(s,o,l){wd(s,o,3,l)}function Nl(s,o,l,c){(3&s[2])===l&&wd(s,o,l,c)}function $n(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function wd(s,o,l,c){const g=null!=c?c:-1,v=o.length-1;let w=0;for(let D=void 0!==c?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=c&&w>=c)break}else o[D]<0&&(s[18]+=65536),(w<g||-1==g)&&(kg(s,l,o,D),s[18]=(4294901760&s[18])+D+2),D++}function kg(s,o,l,c){const h=l[c]<0,g=l[c+1],w=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Jo{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Ki(s,o,l){const c=yn(s);let h=0;for(;h<l.length;){const g=l[h];if("number"==typeof g){if(0!==g)break;h++;const v=l[h++],w=l[h++],D=l[h++];c?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=g,w=l[++h];ht(v)?c&&s.setProperty(o,v,w):c?s.setAttribute(o,v,w):o.setAttribute(v,w),h++}}return h}function Zt(s){return 3===s||4===s||6===s}function ht(s){return 64===s.charCodeAt(0)}function xn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||Cn(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function Cn(s,o,l,c,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===l){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,l),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function Pi(s){return-1!==s}function Qt(s){return 32767&s}function nn(s,o){let l=function or(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let Bn=!0;function at(s){const o=Bn;return Bn=s,o}let gf=0;function Xo(s,o){const l=Do(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,ys(c.data,s),ys(o,null),ys(c.blueprint,null));const h=ti(s,o),g=s.injectorIndex;if(Pi(h)){const v=Qt(h),w=nn(h,o),D=w[1].data;for(let A=0;A<8;A++)o[g+A]=w[v+A]|D[v+A]}return o[g+8]=h,g}function ys(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Do(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ti(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const g=h[1],v=g.type;if(c=2===v?g.declTNode:1===v?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function $r(s,o,l){!function Qo(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(mt)&&(c=l[mt]),null==c&&(c=l[mt]=gf++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Co(s,o,l){if(l&pt.Optional)return s;be(o,"NodeInjector")}function zu(s,o,l,c){if(l&pt.Optional&&void 0===c&&(c=null),0==(l&(pt.Self|pt.Host))){const h=s[9],g=Yn(void 0);try{return h?h.get(o,c,l&pt.Optional):yi(o,c,l&pt.Optional)}finally{Yn(g)}}return Co(c,o,l)}function ea(s,o,l,c=pt.Default,h){if(null!==s){const g=function Wu(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(mt)?s[mt]:void 0;return"number"==typeof o?o>=0?255&o:Rl:o}(l);if("function"==typeof g){if(!Uu(o,s,c))return c&pt.Host?Co(h,l,c):zu(o,l,c,h);try{const v=g(c);if(null!=v||c&pt.Optional)return v;be(l)}finally{bd()}}else if("number"==typeof g){let v=null,w=Do(s,o),D=-1,A=c&pt.Host?o[16][6]:null;for((-1===w||c&pt.SkipSelf)&&(D=-1===w?ti(s,o):o[w+8],-1!==D&&Fa(c,!1)?(v=o[1],w=Qt(D),o=nn(D,o)):w=-1);-1!==w;){const R=o[1];if(ta(g,w,R.data)){const F=Fg(w,o,l,v,c,A);if(F!==Qs)return F}D=o[w+8],-1!==D&&Fa(c,o[1].data[w+8]===A)&&ta(g,w,o)?(v=R,w=Qt(D),o=nn(D,o)):w=-1}}}return zu(o,l,c,h)}const Qs={};function Rl(){return new Li(Dn(),Ce())}function Fg(s,o,l,c,h,g){const v=o[1],w=v.data[s+8],R=To(w,v,l,null==c?Us(w)&&Bn:c!=v&&0!=(3&w.type),h&pt.Host&&g===w);return null!==R?sn(o,v,R,w):Qs}function To(s,o,l,c,h){const g=s.providerIndexes,v=o.data,w=1048575&g,D=s.directiveStart,R=g>>20,U=h?w+R:s.directiveEnd;for(let K=c?w:w+R;K<U;K++){const _e=v[K];if(K<D&&l===_e||K>=D&&_e.type===l)return K}if(h){const K=v[D];if(K&&Jr(K)&&K.type===l)return D}return null}function sn(s,o,l,c){let h=s[l];const g=o.data;if(function Ed(s){return s instanceof Jo}(h)){const v=h;v.resolving&&function rt(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ke(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ee(g[l]));const w=at(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Yn(v.injectImpl):null;Uu(s,c,pt.Default);try{h=s[l]=v.factory(void 0,g,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Hu(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const v=Na(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==D&&Yn(D),at(w),v.resolving=!1,bd()}}return h}function ta(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Fa(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Li{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return ea(this._tNode,this._lView,o,c,l)}}function Ml(s){return En(()=>{const o=s.prototype.constructor,l=o[tt]||na(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[tt]||na(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function na(s){return Ke(s)?()=>{const o=na(Q(s));return o&&o()}:Qr(s)}function La(s){return function Cd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const g=l[h];if(Zt(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(g===o)return l[h+1];h+=2}}}return null}(Dn(),s)}const ra="__parameters__";function Va(s,o,l){return En(()=>{const c=function Td(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const v=new h(...g);return w.annotation=v,w;function w(D,A,R){const F=D.hasOwnProperty(ra)?D[ra]:Object.defineProperty(D,ra,{value:[]})[ra];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(v),D}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class qn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=ln({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gy=new qn("AnalyzeForEntryComponents");function Mr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Mr(c,o)):o!==s&&o.push(c)}return o}function Vi(s,o){s.forEach(l=>Array.isArray(l)?Vi(l,o):o(l))}function In(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function bn(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Bi(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function ni(s,o,l){let c=eo(s,o);return c>=0?s[1|c]=l:(c=~c,function Qu(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Rd(s,o){const l=eo(s,o);if(l>=0)return s[1|l]}function eo(s,o){return function Io(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const g=c+(h-c>>1),v=s[g<<l];if(o===v)return g<<l;v>o?h=g:c=g+1}return~(h<<l)}(s,o,1)}const Dr={},oa="__NG_DI_FLAG__",Qi="ngTempTokenPath",T=/\n/gm,V="__source",W=ge({provide:String,useValue:ge});let ee;function xe(s){const o=ee;return ee=s,o}function Ye(s,o=pt.Default){if(void 0===ee)throw new ke(203,"");return null===ee?yi(s,void 0,o):ee.get(s,o&pt.Optional?null:void 0,o)}function Xe(s,o=pt.Default){return(function rr(){return Yr}()||Ye)(Q(s),o)}const $t=Xe;function It(s){const o=[];for(let l=0;l<s.length;l++){const c=Q(s[l]);if(Array.isArray(c)){if(0===c.length)throw new ke(900,"");let h,g=pt.Default;for(let v=0;v<c.length;v++){const w=c[v],D=Un(w);"number"==typeof D?-1===D?h=w.token:g|=D:h=w}o.push(Xe(h,g))}else o.push(Xe(c))}return o}function zn(s,o){return s[oa]=o,s.prototype[oa]=o,s}function Un(s){return s[oa]}const Ui=zn(Va("Inject",s=>({token:s})),-1),Wn=zn(Va("Optional"),8),ji=zn(Va("SkipSelf"),4);let nc;function Fl(s){var o;return(null===(o=function rc(){if(void 0===nc&&(nc=null,Ht.trustedTypes))try{nc=Ht.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return nc}())||void 0===o?void 0:o.createHTML(s))||s}class bs{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ws(s){return s instanceof bs?s.changingThisBreaksApplicationSecurity:s}class ja{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(Fl(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class Ny{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Fl(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=Fl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const v=l.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const aa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function to(s){return(s=String(s)).match(aa)||s.match(Pd)?s:"unsafe:"+s}function Df(s){return(s=String(s)).split(",").map(o=>to(o.trim())).join(", ")}function ii(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function lc(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const Fd=ii("area,br,col,hr,img,wbr"),Ga=ii("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cf=ii("rp,rt"),Tf=lc(Fd,lc(Ga,ii("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lc(Cf,ii("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lc(Cf,Ga)),Vl=ii("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Sf=ii("srcset"),Ld=lc(Vl,Sf,ii("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ii("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var wn=(()=>((wn=wn||{})[wn.NONE=0]="NONE",wn[wn.HTML=1]="HTML",wn[wn.STYLE=2]="STYLE",wn[wn.SCRIPT=3]="SCRIPT",wn[wn.URL=4]="URL",wn[wn.RESOURCE_URL=5]="RESOURCE_URL",wn))();function Bl(s){const o=function fc(){const s=Ce();return s&&s[12]}();return o?o.sanitize(wn.URL,s)||"":function sc(s,o){const l=function Ef(s){return s instanceof bs&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?ws(s):to(pe(s))}const pc="__ngContext__";function xr(s,o){s[pc]=o}function Mf(s){const o=function ca(s){return s[pc]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function kf(s){return s.ngOriginalError}function Gd(s,...o){s.error(...o)}class An{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function Uy(s){return s&&s.ngErrorLogger||Gd}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&kf(o);for(;l&&kf(l);)l=kf(l);return l||null}}const jy=/^>|^->|<!--|-->|--!>|<!-$/g,Oo=/(<|>)/;const Vf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function m(s){return s instanceof Function?s():s}var re=(()=>((re=re||{})[re.Important=1]="Important",re[re.DashCase=2]="DashCase",re))();let Ue;function it(s,o){return Ue(s,o)}function kn(s){const o=s[3];return bi(o)?o[3]:o}function bc(s){return Hd(s[13])}function da(s){return Hd(s[4])}function Hd(s){for(;null!==s&&!bi(s);)s=s[4];return s}function ko(s,o,l,c,h){if(null!=c){let g,v=!1;bi(c)?g=c:xi(c)&&(v=!0,c=c[0]);const w=dn(c);0===s&&null!==l?null==h?dw(o,l,w):Cc(o,l,w,h||null,!0):1===s&&null!==l?Cc(o,l,w,h||null,!0):2===s?MC(o,w,v):3===s&&o.destroyNode(w),null!=g&&function xC(s,o,l,c,h){const g=l[7];g!==dn(l)&&ko(o,s,c,g,h);for(let w=10;w<l.length;w++){const D=l[w];Zd(D[1],D,s,o,c,g)}}(o,s,g,l,h)}}function $d(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}function Bf(s,o,l){yn(s)?s.setValue(o,l):o.textContent=l}function Uf(s,o){return s.createComment(function Ff(s){return s.replace(jy,o=>o.replace(Oo,"\u200b$1\u200b"))}(o))}function qd(s,o,l){if(yn(s))return s.createElement(o,l);{const c=null!==l?function yl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function lw(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Ws(h,-1)),l.splice(c,1)}function zd(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&lw(h,c),o>0&&(s[l-1][4]=c[4]);const g=bn(s,10+o);!function Hy(s,o){Zd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function uw(s,o){if(!(256&o[2])){const l=o[11];yn(l)&&l.destroyNode&&Zd(s,o,l,3,null,null),function aw(s){let o=s[13];if(!o)return Dc(s[1],s);for(;o;){let l=null;if(xi(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)xi(o)&&Dc(o[1],o),o=o[3];null===o&&(o=s),xi(o)&&Dc(o[1],o),l=o&&o[4]}o=l}}(o)}}function Dc(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function AC(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof Jo)){const g=l[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=h[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function IC(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(o):dn(o[v]),D=c[h=l[g+2]],A=l[g+3];"boolean"==typeof A?w.removeEventListener(l[g],D,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),g+=2}else{const v=c[h=l[g+1]];l[g].call(v)}if(null!==c){for(let g=h+1;g<c.length;g++)c[g]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&bi(o[3])){l!==o[3]&&lw(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function Wd(s,o,l){return cw(s,o.parent,l)}function cw(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===zt.None||h===zt.Emulated)return null}return Ar(c,l)}function Cc(s,o,l,c,h){yn(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function dw(s,o,l){yn(s)?s.appendChild(o,l):o.appendChild(l)}function hw(s,o,l,c,h){null!==c?Cc(s,o,l,c,h):dw(s,o,l)}function Yg(s,o){return yn(s)?s.parentNode(o):o.parentNode}function fw(s,o,l){return qy(s,o,l)}function pw(s,o,l){return 40&s.type?Ar(s,l):null}let zy,qy=pw;function gw(s,o){qy=s,zy=o}function Jg(s,o,l,c){const h=Wd(s,c,o),g=o[11],w=fw(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let D=0;D<l.length;D++)hw(g,h,l[D],w,!1);else hw(g,h,l,w,!1);void 0!==zy&&zy(g,c,o,l,h)}function Qg(s,o){if(null!==o){const l=o.type;if(3&l)return Ar(o,s);if(4&l)return Xg(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Qg(s,c);{const h=s[o.index];return bi(h)?Xg(-1,h):dn(h)}}if(32&l)return it(o,s)()||dn(s[o.index]);{const c=mw(s,o);return null!==c?Array.isArray(c)?c[0]:Qg(kn(s[16]),c):Qg(s,o.next)}}return null}function mw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Xg(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return Qg(c,h)}return o[7]}function MC(s,o,l){const c=Yg(s,o);c&&function NC(s,o,l,c){yn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}function em(s,o,l,c,h,g,v){for(;null!=l;){const w=c[l.index],D=l.type;if(v&&0===o&&(w&&xr(dn(w),c),l.flags|=4),64!=(64&l.flags))if(8&D)em(s,o,l.child,c,h,g,!1),ko(o,s,h,w,g);else if(32&D){const A=it(l,c);let R;for(;R=A();)ko(o,s,h,R,g);ko(o,s,h,w,g)}else 16&D?Wy(s,o,c,l,h,g):ko(o,s,h,w,g);l=v?l.projectionNext:l.next}}function Zd(s,o,l,c,h,g){em(l,c,s.firstChild,o,h,g,!1)}function Wy(s,o,l,c,h,g){const v=l[16],D=v[6].projection[c.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)ko(o,s,h,D[A],g);else em(s,o,D,v[3],h,g,!0)}function yw(s,o,l){yn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Zy(s,o,l){yn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Ky(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}l=h+1}}const tm="ng-template";function kC(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==Ky(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function vw(s){return 4===s.type&&s.value!==tm}function PC(s,o,l){return o===(4!==s.type||l?s.value:tm)}function Yy(s,o,l){let c=4;const h=s.attrs||[],g=function VC(s){for(let o=0;o<s.length;o++)if(Zt(s[o]))return o;return s.length}(h);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&c){if(c=2|1&c,""!==D&&!PC(s,D,l)||""===D&&1===o.length){if(ro(c))return!1;v=!0}}else{const A=8&c?D:o[++w];if(8&c&&null!==s.attrs){if(!kC(s.attrs,A,l)){if(ro(c))return!1;v=!0}continue}const F=FC(8&c?"class":D,h,vw(s),l);if(-1===F){if(ro(c))return!1;v=!0;continue}if(""!==A){let U;U=F>g?"":h[F+1].toLowerCase();const K=8&c?U:null;if(K&&-1!==Ky(K,A,0)||2&c&&A!==U){if(ro(c))return!1;v=!0}}}}else{if(!v&&!ro(c)&&!ro(D))return!1;if(v&&ro(D))continue;v=!1,c=D|1&c}}return ro(c)||v}function ro(s){return 0==(1&s)}function FC(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function ww(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function bw(s,o,l=!1){for(let c=0;c<o.length;c++)if(Yy(s,o[c],l))return!0;return!1}function BC(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function Ew(s,o){return s?":not("+o.trim()+")":o}function Gi(s){let o=s[0],l=1,c=2,h="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const w=s[++l];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!ro(v)&&(o+=Ew(g,h),h=""),c=v,g=g||!ro(c);l++}return""!==h&&(o+=Ew(g,h)),o}const Nt={};function nm(s){Tc(Vt(),Ce(),Rr()+s,Tl())}function Tc(s,o,l,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Pa(o,g,l)}else{const g=s.preOrderHooks;null!==g&&Nl(o,g,0,l)}Js(l)}function rm(s,o){return s<<17|o<<2}function io(s){return s>>17&32767}function im(s){return 2|s}function Po(s){return(131068&s)>>2}function Iw(s,o){return-131069&s|o<<2}function sm(s){return 1|s}function Hf(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],g=l[c+1];if(-1!==g){const v=s.data[g];Bu(h),v.contentQueries(2,o[g],g)}}}function $f(s,o,l,c,h,g,v,w,D,A){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,zs(R),R[3]=R[15]=s,R[8]=l,R[10]=v||s&&s[10],R[11]=w||s&&s[11],R[12]=D||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=g,R[16]=2==o.type?s[16]:R,R}function Jd(s,o,l,c,h){let g=s.data[o];if(null===g)g=cm(s,o,l,c,h),function Fu(){return _t.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=h;const v=Yo();g.injectorIndex=null===v?-1:v.injectorIndex}return ei(g,!0),g}function cm(s,o,l,c,h){const g=Ko(),v=Ou(),D=s.data[o]=function lv(s,o,l,c,h,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}function Ac(s,o,l,c){if(0===l)return-1;const h=o.length;for(let g=0;g<l;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function qf(s,o,l){vo(o);try{const c=s.viewQuery;null!==c&&tp(1,c,l);const h=s.template;null!==h&&zf(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Hf(s,o),s.staticViewQueries&&tp(2,s.viewQuery,l);const g=s.components;null!==g&&function $l(s,o){for(let l=0;l<o.length;l++)jw(s,o[l])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,wo()}}function Nc(s,o,l,c){const h=o[2];if(256==(256&h))return;vo(o);const g=Tl();try{zs(o),function Sl(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&zf(s,o,l,2,c);const v=3==(3&h);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&Pa(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Nl(o,A,0,null),$n(o,0)}if(function Uw(s){for(let o=bc(s);null!==o;o=da(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],g=h[3];0==(1024&h[2])&&Ws(g,1),h[2]|=1024}}}(o),function Bw(s){for(let o=bc(s);null!==o;o=da(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];gs(c)&&Nc(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Hf(s,o),!g)if(v){const A=s.contentCheckHooks;null!==A&&Pa(o,A)}else{const A=s.contentHooks;null!==A&&Nl(o,A,1),$n(o,1)}!function ai(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)Js(~h);else{const g=h,v=l[++c],w=l[++c];Al(v,g),w(2,o[g])}}}finally{Js(-1)}}(s,o);const w=s.components;null!==w&&function li(s,o){for(let l=0;l<o.length;l++)tT(s,o[l])}(o,w);const D=s.viewQuery;if(null!==D&&tp(2,D,c),!g)if(v){const A=s.viewCheckHooks;null!==A&&Pa(o,A)}else{const A=s.viewHooks;null!==A&&Nl(o,A,2),$n(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ws(o[3],-1))}finally{wo()}}function iv(s,o,l,c){const h=o[10],g=!Tl(),v=qs(o);try{g&&!v&&h.begin&&h.begin(),v&&qf(s,o,c),Nc(s,o,l,c)}finally{g&&!v&&h.end&&h.end()}}function zf(s,o,l,c,h){const g=Rr(),v=2&c;try{Js(-1),v&&o.length>20&&Tc(s,o,20,Tl()),l(c,h)}finally{Js(g)}}function ui(s,o,l){!Cl()||(function dv(s,o,l,c){const h=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||Xo(l,o),xr(c,o);const v=l.initialInputs;for(let w=h;w<g;w++){const D=s.data[w],A=Jr(D);A&&eT(o,l,D);const R=sn(o,s,w,l);xr(R,o),null!==v&&hv(0,w-h,R,D,0,v),A&&(Nr(l.index,o)[8]=R)}}(s,o,l,Ar(l,o)),128==(128&l.flags)&&function Pw(s,o,l){const c=l.directiveStart,h=l.directiveEnd,v=l.index,w=function Lu(){return _t.lFrame.currentDirectiveIndex}();try{Js(v);for(let D=c;D<h;D++){const A=s.data[D],R=o[D];Oa(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Fw(A,R)}}finally{Js(-1),Oa(w)}}(s,o,l))}function Wf(s,o,l=Ar){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],w=-1===v?l(o,s):s[v];s[h++]=w}}}function Ti(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Zf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Zf(s,o,l,c,h,g,v,w,D,A){const R=20+c,F=R+h,U=function Rw(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Nt);return l}(R,F),K="function"==typeof A?A():A;return U[1]={type:s,blueprint:U,template:l,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:K,incompleteFirstPass:!1}}function av(s,o,l,c){const h=_v(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&Gw(s).push(c,h.length-1))}function Mw(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function ts(s,o,l,c,h,g,v,w){const D=Ar(o,l);let R,A=o.inputs;!w&&null!=A&&(R=A[c])?(mm(s,l,R,c,h),Us(o)&&function uv(s,o){const l=Nr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function Qd(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,yn(g)?g.setProperty(D,c,h):ht(c)||(D.setProperty?D.setProperty(c,h):D[c]=h))}function Yf(s,o,l,c){let h=!1;if(Cl()){const g=function QC(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];bw(l,v.selectors,!1)&&(h||(h=[]),$r(Xo(l,o),s,v.type),Jr(v)?(ci(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===c?null:{"":-1};if(null!==g){h=!0,Xd(l,s.data.length,g.length);for(let R=0;R<g.length;R++){const F=g[R];F.providersResolver&&F.providersResolver(F)}let w=!1,D=!1,A=Ac(s,o,g.length,null);for(let R=0;R<g.length;R++){const F=g[R];l.mergedAttrs=xn(l.mergedAttrs,F.hostAttrs),Lw(s,l,o,A,F),XC(A,F,v),null!==F.contentQueries&&(l.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(l.flags|=128);const U=F.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!D&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),D=!0),A++}!function KC(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,v=[];let w=null,D=null;for(let A=o.directiveStart;A<c;A++){const R=h[A],F=R.inputs,U=null===g||vw(o)?null:fv(F,g);v.push(U),w=Mw(F,A,w),D=Mw(R.outputs,A,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,l)}v&&function Jf(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=l[o[h+1]];if(null==g)throw new ke(-301,!1);c.push(o[h],g)}}}(l,c,v)}return l.mergedAttrs=xn(l.mergedAttrs,l.attrs),h}function kw(s,o,l,c,h,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function JC(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(w)!=D&&w.push(D),w.push(c,h,v)}}function Fw(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ci(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function XC(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Jr(o)&&(l[""]=s)}}function Xd(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Lw(s,o,l,c,h){s.data[c]=h;const g=h.factory||(h.factory=Qr(h.type)),v=new Jo(g,Jr(h),null);s.blueprint[c]=v,l[c]=v,kw(s,o,0,c,Ac(s,l,h.hostVars,Nt),h)}function eT(s,o,l){const c=Ar(o,s),h=Ti(l),g=s[10],v=Qf(s,$f(s,h,null,l.onPush?64:16,c,o,g,g.createRenderer(c,l),null,null));s[o.index]=v}function eh(s,o,l,c,h,g,v){if(null==g)yn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const w=null==v?pe(g):v(g,c||"",h);yn(s)?s.setAttribute(o,h,w,l):l?o.setAttributeNS(l,h,w):o.setAttribute(h,w)}}function hv(s,o,l,c,h,g){const v=g[o];if(null!==v){const w=c.setInput;for(let D=0;D<v.length;){const A=v[D++],R=v[D++],F=v[D++];null!==w?c.setInput(l,F,A,R):l[R]=F}}}function fv(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function hm(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function tT(s,o){const l=Nr(o,s);if(gs(l)){const c=l[1];80&l[2]?Nc(c,l,c.template,l[8]):l[5]>0&&fm(l)}}function fm(s){for(let c=bc(s);null!==c;c=da(c))for(let h=10;h<c.length;h++){const g=c[h];if(1024&g[2]){const v=g[1];Nc(v,g,v.template,g[8])}else g[5]>0&&fm(g)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=Nr(l[c],s);gs(h)&&h[5]>0&&fm(h)}}function jw(s,o){const l=Nr(o,s),c=l[1];(function pv(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),qf(c,l,l[8])}function Qf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function gv(s){for(;s;){s[2]|=64;const o=kn(s);if(uf(s)&&!o)return s;s=o}return null}function ep(s,o,l){const c=o[10];c.begin&&c.begin();try{Nc(s,o,s.template,l)}catch(h){throw gm(o,h),h}finally{c.end&&c.end()}}function Or(s){!function Xf(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=Mf(l),h=c[1];iv(h,c,h.template,l)}}(s[8])}function tp(s,o,l){Bu(0),o(s,l)}const nT=(()=>Promise.resolve(null))();function _v(s){return s[7]||(s[7]=[])}function Gw(s){return s.cleanup||(s.cleanup=[])}function gm(s,o){const l=s[9],c=l?l.get(An,null):null;c&&c.handleError(o)}function mm(s,o,l,c,h){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],D=o[v],A=s.data[v];null!==A.setInput?A.setInput(D,h,c,w):D[w]=h}}function th(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?h=de(h,w):2==g&&(c=de(c,w+": "+o[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const np=new qn("INJECTOR",-1);class _m{get(o,l=Dr){if(l===Dr){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return l}}const ym=new qn("Set Injector scope."),rp={},ip={};let vm;function vv(){return void 0===vm&&(vm=new _m),vm}function bv(s,o=null,l=null,c){const h=sp(s,o,l,c);return h._resolveInjectorDefTypes(),h}function sp(s,o=null,l=null,c){return new iT(s,l,o||vv(),c)}class iT{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&Vi(l,w=>this.processProvider(w,o,l)),Vi([o],w=>this.processInjectorType(w,[],g)),this.records.set(np,so(void 0,this));const v=this.records.get(ym);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:fe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=Dr,c=pt.Default){this.assertNotDestroyed();const h=xe(this),g=Yn(void 0);try{if(!(c&pt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function op(s){return"function"==typeof s||"object"==typeof s&&s instanceof qn}(o)&&qt(o);w=D&&this.injectableDefInScope(D)?so(wv(o),rp):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&pt.Self?vv():this.parent).get(o,l=c&pt.Optional&&l===Dr?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Qi]=v[Qi]||[]).unshift(fe(o)),h)throw v;return function ri(s,o,l,c){const h=s[Qi];throw o[V]&&h.unshift(o[V]),s.message=function Xn(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=fe(o);if(Array.isArray(o))h=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}h=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Qi]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Yn(g),xe(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(fe(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(o,l,c){if(!(o=Q(o)))return!1;let h=jr(o);const g=null==h&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==c.indexOf(v);if(void 0!==g&&(h=jr(g)),null==h)return!1;if(null!=h.imports&&!w){let R;c.push(v);try{Vi(h.imports,F=>{this.processInjectorType(F,l,c)&&(void 0===R&&(R=[]),R.push(F))})}finally{}if(void 0!==R)for(let F=0;F<R.length;F++){const{ngModule:U,providers:K}=R[F];Vi(K,_e=>this.processProvider(_e,U,K||gt))}}this.injectorDefTypes.add(v);const D=Qr(v)||(()=>new v);this.records.set(v,so(D,rp));const A=h.providers;if(null!=A&&!w){const R=o;Vi(A,F=>this.processProvider(F,R,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,l,c){let h=pa(o=Q(o))?o:Q(o&&o.provide);const g=function sT(s,o,l){return Ev(s)?so(void 0,s.useValue):so(qw(s),rp)}(o);if(pa(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=so(void 0,rp,!0),v.factory=()=>It(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,g)}hydrate(o,l){return l.value===rp&&(l.value=ip,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Zw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Q(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function wv(s){const o=qt(s),l=null!==o?o.factory:Qr(s);if(null!==l)return l;if(s instanceof qn)throw new ke(204,!1);if(s instanceof Function)return function nh(s){const o=s.length;if(o>0)throw Bi(o,"?"),new ke(204,!1);const l=function _i(s){const o=s&&(s[zi]||s[ls]);if(o){const l=function Ps(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new ke(204,!1)}function qw(s,o,l){let c;if(pa(s)){const h=Q(s);return Qr(h)||wv(h)}if(Ev(s))c=()=>Q(s.useValue);else if(function zw(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...It(s.deps||[]));else if(function bm(s){return!(!s||!s.useExisting)}(s))c=()=>Xe(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function Hi(s){return!!s.deps}(s))return Qr(h)||wv(h);c=()=>new h(...It(s.deps))}return c}function so(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Ev(s){return null!==s&&"object"==typeof s&&W in s}function pa(s){return"function"==typeof s}let ns=(()=>{class s{static create(l,c){var h;if(Array.isArray(l))return bv({name:""},c,l,"");{const g=null!==(h=l.name)&&void 0!==h?h:"";return bv({name:g},l.parent,l.providers,g)}}}return s.THROW_IF_NOT_FOUND=Dr,s.NULL=new _m,s.\u0275prov=ln({token:s,providedIn:"any",factory:()=>Xe(np)}),s.__NG_ELEMENT_ID__=-1,s})();function ah(s,o){ms(Mf(s)[1],Dn())}function Nm(s){let o=function ql(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(Jr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,"");h=o.\u0275dir}if(h){if(l){c.push(h);const v=s;v.inputs=$a(s.inputs),v.declaredInputs=$a(s.declaredInputs),v.outputs=$a(s.outputs);const w=h.hostBindings;w&&Mm(s,w);const D=h.viewQuery,A=h.contentQueries;if(D&&qa(s,D),A&&Rm(s,A),ie(s.inputs,h.inputs),ie(s.declaredInputs,h.declaredInputs),ie(s.outputs,h.outputs),Jr(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Nm&&(l=!1)}}o=Object.getPrototypeOf(o)}!function uT(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=xn(h.hostAttrs,l=xn(l,h.hostAttrs))}}(c)}function $a(s){return s===_r?{}:s===gt?[]:s}function qa(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function Rm(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,g)=>{o(c,h,g),l(c,h,g)}:o}function Mm(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let Rc=null;function lh(){if(!Rc){const s=Ht.Symbol;if(s&&s.iterator)Rc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Rc=c)}}}return Rc}function za(s){return!!Om(s)&&(Array.isArray(s)||!(s instanceof Map)&&lh()in s)}function Om(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ga(s,o,l){return s[o]=l}function Si(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Mc(s,o,l,c){const h=Si(s,o,l);return Si(s,o+1,c)||h}function km(s,o,l,c){const h=Ce();return Si(h,Ks(),o)&&(Vt(),function Ds(s,o,l,c,h,g){const v=Ar(s,o);eh(o[11],v,g,s.value,l,c,h)}(Mn(),h,s,o,l,c)),km}function Oc(s,o,l,c){return Si(s,Ks(),l)?o+pe(l)+c:Nt}function dp(s,o,l,c,h,g,v,w){const D=Ce(),A=Vt(),R=s+20,F=A.firstCreatePass?function cp(s,o,l,c,h,g,v,w,D){const A=o.consts,R=Jd(o,s,4,v||null,Xr(A,w));Yf(o,l,R,Xr(A,D)),ms(o,R);const F=R.tViews=Zf(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,A,D,o,l,c,h,g,v):A.data[R];ei(F,!1);const U=D[11].createComment("");Jg(A,D,U,F),xr(U,D),Qf(D,D[R]=hm(U,D,U,F)),hl(F)&&ui(A,D,F),null!=v&&Wf(D,F,w)}function xv(s){return Oi(function Pu(){return _t.lFrame.contextLView}(),20+s)}function hi(s,o=pt.Default){const l=Ce();return null===l?Xe(s,o):ea(Dn(),l,Q(s),o)}function Bv(){throw new Error("invalid")}function Wm(s,o,l){const c=Ce();return Si(c,Ks(),o)&&ts(Vt(),Mn(),c,s,o,c[11],l,!1),Wm}function Yl(s,o,l,c,h){const v=h?"class":"style";mm(s,l,o.inputs[v],v,c)}function Zm(s,o,l,c){const h=Ce(),g=Vt(),v=20+s,w=h[11],D=h[v]=qd(w,o,function fy(){return _t.lFrame.currentNamespace}()),A=g.firstCreatePass?function vT(s,o,l,c,h,g,v){const w=o.consts,A=Jd(o,s,2,h,Xr(w,g));return Yf(o,l,A,Xr(w,v)),null!==A.attrs&&th(A,A.attrs,!1),null!==A.mergedAttrs&&th(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,h,0,o,l,c):g.data[v];ei(A,!0);const R=A.mergedAttrs;null!==R&&Ki(w,D,R);const F=A.classes;null!==F&&Zy(w,D,F);const U=A.styles;return null!==U&&yw(w,D,U),64!=(64&A.flags)&&Jg(g,h,D,A),0===function xa(){return _t.lFrame.elementDepthCount}()&&xr(D,h),function El(){_t.lFrame.elementDepthCount++}(),hl(A)&&(ui(g,h,A),function sv(s,o,l){if(ud(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}(g,A,h)),null!==c&&Wf(h,A),Zm}function ph(){let s=Dn();Ou()?ku():(s=s.parent,ei(s,!1));const o=s;!function Dl(){_t.lFrame.elementDepthCount--}();const l=Vt();return l.firstCreatePass&&(ms(l,s),ud(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ff(s){return 0!=(16&s.flags)}(o)&&Yl(l,o,Ce(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Pg(s){return 0!=(32&s.flags)}(o)&&Yl(l,o,Ce(),o.stylesWithoutHost,!1),ph}function Uv(s,o,l,c){return Zm(s,o,l,c),ph(),Uv}function Gv(){return Ce()}function Pr(s){return!!s&&"function"==typeof s.then}function Lc(s){return!!s&&"function"==typeof s.subscribe}const Wa=Lc;function gp(s,o,l,c){const h=Ce(),g=Vt(),v=Dn();return function ur(s,o,l,c,h,g,v,w){const D=hl(c),R=s.firstCreatePass&&Gw(s),F=o[8],U=_v(o);let K=!0;if(3&c.type||w){const Ge=Ar(c,o),st=w?w(Ge):Ge,De=U.length,vt=w?Yt=>w(dn(Yt[c.index])):c.index;if(yn(l)){let Yt=null;if(!w&&D&&(Yt=function Le(s,o,l,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===l&&h[g+1]===c){const w=o[7],D=h[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,c.index)),null!==Yt)(Yt.__ngLastListenerFn__||Yt).__ngNextListenerFn__=g,Yt.__ngLastListenerFn__=g,K=!1;else{g=mp(c,o,F,g,!1);const vn=l.listen(st,h,g);U.push(g,vn),R&&R.push(h,vt,De,De+1)}}else g=mp(c,o,F,g,!0),st.addEventListener(h,g,v),U.push(g),R&&R.push(h,vt,De,v)}else g=mp(c,o,F,g,!1);const _e=c.outputs;let Ve;if(K&&null!==_e&&(Ve=_e[h])){const Ge=Ve.length;if(Ge)for(let st=0;st<Ge;st+=2){const Ss=o[Ve[st]][Ve[st+1]].subscribe(g),_u=U.length;U.push(g,Ss),R&&R.push(h,c.index,_u,-(_u+1))}}}(g,h,h[11],v,s,o,!!l,c),gp}function mh(s,o,l,c){try{return!1!==l(c)}catch(h){return gm(s,h),!1}}function mp(s,o,l,c,h){return function g(v){if(v===Function)return c;const w=2&s.flags?Nr(s.index,o):o;0==(32&o[2])&&gv(w);let D=mh(o,0,c,v),A=g.__ngNextListenerFn__;for(;A;)D=mh(o,0,A,v)&&D,A=A.__ngNextListenerFn__;return h&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function ot(s=1){return function Ys(s){return(_t.lFrame.contextLView=function ju(s,o){for(;s>0;)o=o[15],s--;return o}(s,_t.lFrame.contextLView))[8]}(s)}function Mt(s,o){let l=null;const c=function LC(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const g=o[h];if("*"!==g){if(null===c?bw(s,g,!0):BC(c,g))return h}else l=h}return l}function yE(s){const o=Ce()[16][6];if(!o.projection){const c=o.projection=Bi(s?s.length:1,null),h=c.slice();let g=o.child;for(;null!==g;){const v=s?Mt(g,s):0;null!==v&&(h[v]?h[v].projectionNext=g:c[v]=g,h[v]=g),g=g.next}}}function Ze(s,o=0,l){const c=Ce(),h=Vt(),g=Jd(h,20+s,16,null,l||null);null===g.projection&&(g.projection=o),ku(),64!=(64&g.flags)&&function _w(s,o,l){Wy(o[11],0,o,l,Wd(s,l,o),fw(l.parent||o[6],l,o))}(h,c,g)}function ue(s,o,l){return Re(s,"",o,"",l),ue}function Re(s,o,l,c,h){const g=Ce(),v=Oc(g,o,l,c);return v!==Nt&&ts(Vt(),Mn(),g,s,v,g[11],h,!1),Re}function CE(s,o,l,c,h){const g=s[l+1],v=null===o;let w=c?io(g):Po(g),D=!1;for(;0!==w&&(!1===D||v);){const R=s[w+1];TE(s[w],o)&&(D=!0,s[w+1]=c?sm(R):im(R)),w=c?io(R):Po(R)}D&&(s[l+1]=c?im(g):sm(g))}function TE(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&eo(s,o)>=0}const yt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vc(s){return s.substring(yt.key,yt.keyEnd)}function Tt(s,o){const l=yt.textEnd;return l===o?-1:(o=yt.keyEnd=function rn(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,yt.key=o,l),ma(s,o,l))}function ma(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function zv(s,o,l){return $i(s,o,l,!1),zv}function _a(s,o){return $i(s,o,null,!0),_a}function Km(s){!function Vo(s,o,l,c){const h=Vt(),g=ki(2);h.firstUpdatePass&&Ql(h,null,g,c);const v=Ce();if(l!==Nt&&Si(v,g,l)){const w=h.data[Rr()];if(Jm(w,c)&&!ya(h,g)){let D=c?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(l=de(D,l||"")),Yl(h,w,v,l,c)}else!function Xl(s,o,l,c,h,g,v,w){h===Nt&&(h=gt);let D=0,A=0,R=0<h.length?h[0]:null,F=0<g.length?g[0]:null;for(;null!==R||null!==F;){const U=D<h.length?h[D+1]:void 0,K=A<g.length?g[A+1]:void 0;let Ve,_e=null;R===F?(D+=2,A+=2,U!==K&&(_e=F,Ve=K)):null===F||null!==R&&R<F?(D+=2,_e=R):(A+=2,_e=F,Ve=K),null!==_e&&Wv(s,o,l,c,_e,Ve,v,w),R=D<h.length?h[D]:null,F=A<g.length?g[A]:null}}(h,w,v,v[11],v[g+1],v[g+1]=function va(s,o,l){if(null==l||""===l)return gt;const c=[],h=ws(l);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(c,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(c,g,h[g]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,g)}}(ni,Lo,s,!0)}function Lo(s,o){for(let l=function cr(s){return function qv(s){yt.key=0,yt.keyEnd=0,yt.value=0,yt.valueEnd=0,yt.textEnd=s.length}(s),Tt(s,ma(s,0,yt.textEnd))}(o);l>=0;l=Tt(o,l))ni(s,Vc(o),!0)}function $i(s,o,l,c){const h=Ce(),g=Vt(),v=ki(2);g.firstUpdatePass&&Ql(g,s,v,c),o!==Nt&&Si(h,v,o)&&Wv(g,g.data[Rr()],h,h[11],s,h[v+1]=function bh(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(ws(s)))),s}(o,l),c,v)}function ya(s,o){return o>=s.expandoStartIndex}function Ql(s,o,l,c){const h=s.data;if(null===h[l+1]){const g=h[Rr()],v=ya(s,l);Jm(g,c)&&null===o&&!v&&(o=!1),o=function _p(s,o,l,c){const h=function ka(s){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Bo(l=Ym(null,s,o,l,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Ym(h,s,o,l,c),null===g){let D=function NE(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Po(c))return s[io(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=Ym(null,s,o,D[1],c),D=Bo(D,o.attrs,c),function He(s,o,l,c){s[io(l?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else g=function RE(s,o,l){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=Bo(c,s[g].hostAttrs,l);return Bo(c,o.attrs,l)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),l}(h,g,o,c),function AA(s,o,l,c,h,g){let v=g?o.classBindings:o.styleBindings,w=io(v),D=Po(v);s[c]=l;let R,A=!1;if(Array.isArray(l)){const F=l;R=F[1],(null===R||eo(F,R)>0)&&(A=!0)}else R=l;if(h)if(0!==D){const U=io(s[w+1]);s[c+1]=rm(U,w),0!==U&&(s[U+1]=Iw(s[U+1],c)),s[w+1]=function Sw(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=rm(w,0),0!==w&&(s[w+1]=Iw(s[w+1],c)),w=c;else s[c+1]=rm(D,0),0===w?w=c:s[D+1]=Iw(s[D+1],c),D=c;A&&(s[c+1]=im(s[c+1])),CE(s,R,c,!0),CE(s,R,c,!1),function Cs(s,o,l,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&eo(g,o)>=0&&(l[c+1]=sm(l[c+1]))}(o,R,s,c,g),v=rm(w,D),g?o.classBindings=v:o.styleBindings=v}(h,g,o,l,v,c)}}function Ym(s,o,l,c,h){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=o[w],c=Bo(c,g.hostAttrs,h),g!==s);)w++;return null!==s&&(l.directiveStylingLast=w),c}function Bo(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ni(s,v,!!l||o[++g]))}return void 0===s?null:s}function Wv(s,o,l,c,h,g,v,w){if(!(3&o.type))return;const D=s.data,A=D[w+1];vh(function Hl(s){return 1==(1&s)}(A)?Uc(D,o,l,h,Po(A),v):void 0)||(vh(g)||function Tw(s){return 2==(2&s)}(A)&&(g=Uc(D,null,l,h,w,v)),function OC(s,o,l,c,h){const g=yn(s);if(o)h?g?s.addClass(l,c):l.classList.add(c):g?s.removeClass(l,c):l.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:re.DashCase;if(null==h)g?s.removeStyle(l,c,v):l.style.removeProperty(c);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),v|=re.Important),g?s.setStyle(l,c,h,v):l.style.setProperty(c,h,w?"important":"")}}}(c,v,yo(Rr(),l),h,g))}function Uc(s,o,l,c,h,g){const v=null===o;let w;for(;h>0;){const D=s[h],A=Array.isArray(D),R=A?D[1]:D,F=null===R;let U=l[h+1];U===Nt&&(U=F?gt:void 0);let K=F?Rd(U,c):R===c?U:void 0;if(A&&!vh(K)&&(K=Rd(D,c)),vh(K)&&(w=K,v))return w;const _e=s[h+1];h=v?io(_e):Po(_e)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(w=Rd(D,c))}return w}function vh(s){return void 0!==s}function Jm(s,o){return 0!=(s.flags&(o?16:32))}function wh(s,o=""){const l=Ce(),c=Vt(),h=s+20,g=c.firstCreatePass?Jd(c,h,1,o,null):c.data[h],v=l[h]=$d(l[11],o);Jg(c,l,v,g),ei(g,!1)}function Qm(s){return yp("",s,""),Qm}function yp(s,o,l){const c=Ce(),h=Oc(c,s,o,l);return h!==Nt&&function Ha(s,o,l){const c=yo(o,s);Bf(s[11],c,l)}(c,Rr(),h),yp}function e0(s,o,l){const c=Ce();return Si(c,Ks(),o)&&ts(Vt(),Mn(),c,s,o,c[11],l,!0),e0}const eu=void 0;var BE=["en",[["a","p"],["AM","PM"],eu],[["AM","PM"],eu,eu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],eu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],eu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",eu,"{1} 'at' {0}",eu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ya(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Uo={};function Ch(s){const o=function jE(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=i_(o);if(l)return l;const c=o.split("-")[0];if(l=i_(c),l)return l;if("en"===c)return BE;throw new Error(`Missing locale data for the locale "${s}".`)}function r_(s){return Ch(s)[lt.PluralCase]}function i_(s){return s in Uo||(Uo[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),Uo[s]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const Dp=["zero","one","two","few","many"],Th="en-US",Cp={marker:"element"},Tp={marker:"ICU"};var er=(()=>((er=er||{})[er.SHIFT=2]="SHIFT",er[er.APPEND_EAGERLY=1]="APPEND_EAGERLY",er[er.COMMENT=2]="COMMENT",er))();let s0=Th;function $E(s,o,l){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?pw(s,0,l):dn(l[h])}function qE(s,o,l,c,h){const g=o.insertBeforeIndex;if(Array.isArray(g)){let v=c,w=null;if(3&o.type||(w=v,v=h),null!==v&&0==(2&o.flags))for(let D=1;D<g.length;D++)Cc(s,v,l[g[D]],w,!1)}}function o0(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const c=s[l];Hc(c)||$c(c,o)&&null===zE(c)&&qc(c,o.index)}}function Hc(s){return!(64&s.type)}function $c(s,o){return Hc(o)||s.index>o.index}function zE(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function qc(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(gw($E,qE),s.insertBeforeIndex=o)}function Sh(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function ZE(s,o,l){const c=cm(s,l,64,null,null);return o0(o,c),c}function tu(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function KE(s){return s>>>17}function YE(s){return(131070&s)>>>1}let nu=0,Sp=0;function l0(s,o,l,c){const h=l[11];let v,g=null;for(let w=0;w<o.length;w++){const D=o[w];if("string"==typeof D){const A=o[++w];null===l[A]&&(l[A]=$d(h,D))}else if("number"==typeof D)switch(1&D){case 0:const A=KE(D);let R,F;if(null===g&&(g=A,v=Yg(h,c)),A===g?(R=c,F=v):(R=null,F=dn(l[A])),null!==F){const Ve=YE(D);Cc(h,F,l[Ve],R,!1);const st=Sh(s,Ve);if(null!==st&&"object"==typeof st){const De=tu(st,l);null!==De&&l0(s,st.create[De],l,l[st.anchorIdx])}}break;case 1:const K=o[++w],_e=o[++w];eh(h,yo(D>>>1,l),null,null,K,_e,null)}else switch(D){case Tp:const A=o[++w],R=o[++w];null===l[R]&&xr(l[R]=Uf(h,A),l);break;case Cp:const F=o[++w],U=o[++w];null===l[U]&&xr(l[U]=qd(h,F,null),l)}}}function Ah(s,o,l,c,h){for(let g=0;g<l.length;g++){const v=l[g],w=l[++g];if(v&h){let D="";for(let A=g+1;A<=g+w;A++){const R=l[A];if("string"==typeof R)D+=R;else if("number"==typeof R)if(R<0)D+=pe(o[c-R]);else{const F=R>>>2;switch(3&R){case 1:const U=l[++A],K=l[++A],_e=s.data[F];"string"==typeof _e?eh(o[11],o[F],null,_e,U,D,K):ts(s,_e,o,U,D,o[11],K,!1);break;case 0:const Ve=o[F];null!==Ve&&Bf(o[11],Ve,D);break;case 2:QE(s,Sh(s,F),o,D);break;case 3:ru(s,Sh(s,F),c,o)}}}}else{const D=l[g+1];if(D>0&&3==(3&D)){const R=Sh(s,D>>>2);o[R.currentCaseLViewIndex]<0&&ru(s,R,c,o)}}g+=w}}function ru(s,o,l,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let g=nu;h<0&&(h=c[o.currentCaseLViewIndex]=~h,g=-1),Ah(s,c,o.update[h],l,g)}}function QE(s,o,l,c){const h=function XE(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const c=function GE(s,o){const l=r_(o)(parseInt(s,10)),c=Dp[l];return void 0!==c?c:"other"}(o,function s_(){return s0}());l=s.cases.indexOf(c),-1===l&&"other"!==c&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,c);if(tu(o,l)!==h&&(u0(s,o,l),l[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const v=l[o.anchorIdx];v&&l0(s,o.create[h],l,v)}}function u0(s,o,l){let c=tu(o,l);if(null!==c){const h=o.remove[c];for(let g=0;g<h.length;g++){const v=h[g];if(v>0){const w=yo(v,l);null!==w&&MC(l[11],w)}else u0(s,Sh(s,~v),l)}}}function Ip(){const s=[];let l,c,o=-1;function g(w,D){o=0;const A=tu(w,D);c=null!==A?w.remove[A]:gt}function v(){if(o<c.length){const w=c[o++];return w>0?l[w]:(s.push(o,c),g(l[1].data[~w],l),v())}return 0===s.length?null:(c=s.pop(),o=s.pop(),v())}return function h(w,D){for(l=D;s.length;)s.pop();return g(w.value,D),v}}const Ap=/\ufffd(\d+):?\d*\ufffd/gi,hr=/\ufffd(\d+)\ufffd/,Np=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Pn=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,t1=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Nh=/\uE500/g;function n1(s,o,l,c,h,g,v){const w=Ac(s,c,1,null);let D=w<<er.SHIFT,A=Yo();o===A&&(A=null),null===A&&(D|=er.APPEND_EAGERLY),v&&(D|=er.COMMENT,function Et(s){void 0===Ue&&(Ue=s())}(Ip)),h.push(D,null===g?"":g);const R=cm(s,w,v?32:1,null===g?"":g,null);o0(l,R);const F=R.index;return ei(R,!1),null!==A&&o!==A&&function WE(s,o){let l=s.insertBeforeIndex;null===l?(gw($E,qE),l=s.insertBeforeIndex=[null,o]):(function Z(s,o,l){s!=o&&bt(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(A,F),R}function d0(s,o,l,c,h,g,v){const w=v.match(Ap),D=n1(s,o,l,g,c,w?null:v,!1);w&&Rh(h,v,D.index,null,0,null)}function Rh(s,o,l,c,h,g){const v=s.length,w=v+1;s.push(null,null);const D=v+2,A=o.split(Ap);let R=0;for(let F=0;F<A.length;F++){const U=A[F];if(1&F){const K=h+parseInt(U,10);s.push(-1-K),R|=gn(K)}else""!==U&&s.push(U)}return s.push(l<<2|(c?1:0)),c&&s.push(c,g),s[v]=R,s[w]=s.length-D,R}function gn(s){return 1<<Math.min(s,31)}function Mp(s){let o,g,l="",c=0,h=!1;for(;null!==(o=Pn.exec(s));)h?o[0]===`\ufffd/*${g}\ufffd`&&(c=o.index,h=!1):(l+=s.substring(c,o.index+o[0].length),g=o[1],h=!0);return l+=s.substr(c),l}function Mh(s,o,l,c,h,g){let v=0;const w={type:h.type,currentCaseLViewIndex:Ac(s,o,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function o1(s,o,l){s.push(gn(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,h,g),function Ih(s,o,l){const c=s.data[o];null===c?s.data[o]=l:c.value=l}(s,g,w);const D=h.values;for(let A=0;A<D.length;A++){const R=D[A],F=[];for(let U=0;U<R.length;U++){const K=R[U];if("string"!=typeof K){const _e=F.push(K)-1;R[U]=`\x3c!--\ufffd${_e}\ufffd--\x3e`}}v=r1(s,w,o,l,c,h.cases[A],R.join(""),F)|v}v&&function MT(s,o,l){s.push(o,1,l<<2|3)}(l,v,g)}function a_(s){const o=[],l=[];let c=1,h=0;const g=l_(s=s.replace(Np,function(v,w,D){return c="select"===D?0:1,h=parseInt(w.substr(1),10),""}));for(let v=0;v<g.length;){let w=g[v++].trim();1===c&&(w=w.replace(/\s*(?:=)?(\w+)\s*/,"$1")),w.length&&o.push(w);const D=l_(g[v++]);o.length>l.length&&l.push(D)}return{type:c,mainBinding:h,cases:o,values:l}}function l_(s){if(!s)return[];let o=0;const l=[],c=[],h=/[{}]/g;let g;for(h.lastIndex=0;g=h.exec(s);){const w=g.index;if("}"==g[0]){if(l.pop(),0==l.length){const D=s.substring(o,w);Np.test(D)?c.push(a_(D)):c.push(D),o=w+1}}else{if(0==l.length){const D=s.substring(o,w);c.push(D),o=w+1}l.push("{")}}const v=s.substring(o);return c.push(v),c}function r1(s,o,l,c,h,g,v,w){const D=[],A=[],R=[];o.cases.push(g),o.create.push(D),o.remove.push(A),o.update.push(R);const U=function $g(s){const o=new Ny(s);return function Ry(){try{return!!(new window.DOMParser).parseFromString(Fl(""),"text/html")}catch(s){return!1}}()?new ja(o):o}(Ra()).getInertBodyElement(v),K=function Vd(s){return"content"in s&&function ky(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(U)||U;return K?h0(s,o,l,c,D,A,R,K,h,w,0):0}function h0(s,o,l,c,h,g,v,w,D,A,R){let F=0,U=w.firstChild;for(;U;){const K=Ac(s,l,1,null);switch(U.nodeType){case Node.ELEMENT_NODE:const _e=U,Ve=_e.tagName.toLowerCase();if(Tf.hasOwnProperty(Ve)){f0(h,Cp,Ve,D,K),s.data[K]=Ve;const vt=_e.attributes;for(let Yt=0;Yt<vt.length;Yt++){const vn=vt.item(Yt),Ss=vn.name.toLowerCase();vn.value.match(Ap)?Ld.hasOwnProperty(Ss)&&Rh(v,vn.value,K,vn.name,0,Vl[Ss]?to:Sf[Ss]?Df:null):xT(h,K,vn)}F=h0(s,o,l,c,h,g,v,U,K,A,R+1)|F,i1(g,K,R)}break;case Node.TEXT_NODE:const Ge=U.textContent||"",st=Ge.match(Ap);f0(h,null,st?"":Ge,D,K),i1(g,K,R),st&&(F=Rh(v,Ge,K,null,0,null)|F);break;case Node.COMMENT_NODE:const De=hr.exec(U.textContent||"");if(De){const Yt=A[parseInt(De[1],10)];f0(h,Tp,"",D,K),Mh(s,l,c,D,Yt,K),s1(g,K,R)}}U=U.nextSibling}return F}function i1(s,o,l){0===l&&s.push(o)}function s1(s,o,l){0===l&&(s.push(~o),s.push(o))}function f0(s,o,l,c,h){null!==o&&s.push(o),s.push(l,h,function o_(s,o,l){return s|o<<17|l<<1}(0,c,h))}function xT(s,o,l){s.push(o<<1|1,l.name,l.value)}function m0(s,o,l=-1){const c=Vt(),h=Ce(),g=20+s,v=Xr(c.consts,o),w=Yo();c.firstCreatePass&&function oo(s,o,l,c,h,g){const v=Yo(),w=[],D=[],A=[[]];h=function xp(s,o){if(function RT(s){return-1===s}(o))return Mp(s);{const l=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return Mp(s.substring(l,c))}}(h,g);const R=function AT(s){return s.replace(Nh," ")}(h).split(t1);for(let F=0;F<R.length;F++){let U=R[F];if(0==(1&F)){const K=l_(U);for(let _e=0;_e<K.length;_e++){let Ve=K[_e];if(0==(1&_e)){const Ge=Ve;""!==Ge&&d0(s,v,A[0],w,D,l,Ge)}else{const Ge=Ve;if("object"!=typeof Ge)throw new Error(`Unable to parse ICU expression in "${h}" message.`);Mh(s,l,D,o,Ge,n1(s,v,A[0],l,w,"",!0).index)}}}else{const K=47===U.charCodeAt(0),Ve=(U.charCodeAt(K?1:0),20+Number.parseInt(U.substring(K?2:1)));if(K)A.shift(),ei(Yo(),!1);else{const Ge=ZE(s,A[0],Ve);A.unshift([]),ei(Ge,!0)}}}s.data[c]={create:w,update:D}}(c,null===w?0:w.index,h,g,v,l);const D=c.data[g],R=cw(c,w===h[6]?null:w,h);(function JE(s,o,l,c){const h=s[11];for(let g=0;g<o.length;g++){const v=o[g++],w=o[g],D=(v&er.COMMENT)===er.COMMENT,A=(v&er.APPEND_EAGERLY)===er.APPEND_EAGERLY,R=v>>>er.SHIFT;let F=s[R];null===F&&(F=s[R]=D?h.createComment(w):$d(h,w)),A&&null!==l&&Cc(h,l,F,c,!1)}})(h,D.create,R,w&&8&w.type?h[w.index]:null),Il(!0)}function _0(s,o,l){m0(s,o,l),function Oh(){Il(!1)}()}function u_(s){return function a0(s){s&&(nu|=1<<Math.min(Sp,31)),Sp++}(Si(Ce(),Ks(),s)),u_}function c1(s){!function IT(s,o,l){if(Sp>0){const c=s.data[l];Ah(s,o,Array.isArray(c)?c:c.update,function Ei(){return _t.lFrame.bindingIndex}()-Sp-1,nu)}nu=0,Sp=0}(Vt(),Ce(),s+20)}function Pp(s,o,l,c,h){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)Pp(s[g],o,l,c,h);else{const g=Vt(),v=Ce();let w=pa(s)?s:Q(s.provide),D=qw(s);const A=Dn(),R=1048575&A.providerIndexes,F=A.directiveStart,U=A.providerIndexes>>20;if(pa(s)||!s.multi){const K=new Jo(D,h,hi),_e=c_(w,o,h?R:R+U,F);-1===_e?($r(Xo(A,v),g,w),y0(g,s,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(K),v.push(K)):(l[_e]=K,v[_e]=K)}else{const K=c_(w,o,R+U,F),_e=c_(w,o,R,R+U),Ve=K>=0&&l[K],Ge=_e>=0&&l[_e];if(h&&!Ge||!h&&!Ve){$r(Xo(A,v),g,w);const st=function FT(s,o,l,c,h){const g=new Jo(s,l,hi);return g.multi=[],g.index=o,g.componentProviders=0,v0(g,h,c&&!l),g}(h?PT:d1,l.length,h,c,D);!h&&Ge&&(l[_e].providerFactory=st),y0(g,s,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),l.push(st),v.push(st)}else y0(g,s,K>-1?K:_e,v0(l[h?_e:K],D,!h&&c));!h&&c&&Ge&&l[_e].componentProviders++}}}function y0(s,o,l,c){const h=pa(o),g=function Ww(s){return!!s.useClass}(o);if(h||g){const D=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(D){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=A.indexOf(l);-1===R?A.push(l,[c,D]):A[R+1].push(c,D)}else A.push(l,D)}}}function v0(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function c_(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function d1(s,o,l,c){return d_(this.multi,[])}function PT(s,o,l,c){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=sn(l,l[1],this.providerFactory.index,c);g=w.slice(0,v),d_(h,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],d_(h,g);return g}function d_(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function h1(s,o=[]){return l=>{l.providersResolver=(c,h)=>function kp(s,o,l){const c=Vt();if(c.firstCreatePass){const h=Jr(s);Pp(l,c.data,c.blueprint,h,!0),Pp(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class zc{}class p1{resolveComponentFactory(o){throw function LT(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let pr=(()=>{class s{}return s.NULL=new p1,s})();function VT(){return Wc(Dn(),Ce())}function Wc(s,o){return new qi(Ar(s,o))}let qi=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=VT,s})();function g1(s){return s instanceof qi?s.nativeElement:s}class w0{}let BT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function jT(){const s=Ce(),l=Nr(Dn().index,s);return function UT(s){return s[11]}(xi(l)?l:s)}(),s})(),GT=(()=>{class s{}return s.\u0275prov=ln({token:s,providedIn:"root",factory:()=>null}),s})();class m1{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const _1=new m1("13.2.7"),E0={};function h_(s,o,l,c,h=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&c.push(dn(g)),bi(g))for(let w=10;w<g.length;w++){const D=g[w],A=D[1].firstChild;null!==A&&h_(D[1],D,A,c)}const v=l.type;if(8&v)h_(s,o,l.child,c);else if(32&v){const w=it(l,o);let D;for(;D=w();)c.push(D)}else if(16&v){const w=mw(o,l);if(Array.isArray(w))c.push(...w);else{const D=kn(o[16]);h_(D[1],D,w,c,!0)}}l=h?l.projectionNext:l.next}return c}class Fp{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return h_(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(bi(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(zd(o,c),bn(l,c))}this._attachedToViewContainer=!1}uw(this._lView[1],this._lView)}onDestroy(o){av(this._lView[1],this._lView,null,o)}markForCheck(){gv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ep(this._lView[1],this._lView,this.context)}checkNoChanges(){!function di(s,o,l){Zs(!0);try{ep(s,o,l)}finally{Zs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $y(s,o){Zd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=o}}class HT extends Fp{constructor(o){super(o),this._view=o}detectChanges(){Or(this._view)}checkNoChanges(){!function pm(s){Zs(!0);try{Or(s)}finally{Zs(!1)}}(this._view)}get context(){return null}}class y1 extends pr{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Wt(o);return new D0(l,this.ngModule)}}function v1(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class D0 extends zc{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function UC(s){return s.map(Gi).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return v1(this.componentDef.inputs)}get outputs(){return v1(this.componentDef.outputs)}create(o,l,c,h){const g=(h=h||this.ngModule)?function qT(s,o){return{get:(l,c,h)=>{const g=s.get(l,E0,h);return g!==E0||c===E0?g:o.get(l,c,h)}}}(o,h.injector):o,v=g.get(w0,Zo),w=g.get(GT,null),D=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function ov(s,o,l){if(yn(s))return s.selectRootElement(o,l===zt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(D,c,this.componentDef.encapsulation):qd(v.createRenderer(null,this.componentDef),A,function $T(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),F=this.componentDef.onPush?576:528,U=function Am(s,o){return{components:[],scheduler:s||Vf,clean:nT,playerHandler:o||null,flags:0}}(),K=Zf(0,null,null,1,0,null,null,null,null,null),_e=$f(null,K,U,F,null,null,v,D,w,g);let Ve,Ge;vo(_e);try{const st=function Im(s,o,l,c,h,g){const v=l[1];l[20]=s;const D=Jd(v,20,2,"#host",null),A=D.mergedAttrs=o.hostAttrs;null!==A&&(th(D,A,!0),null!==s&&(Ki(h,s,A),null!==D.classes&&Zy(h,s,D.classes),null!==D.styles&&yw(h,s,D.styles)));const R=c.createRenderer(s,o),F=$f(l,Ti(o),null,o.onPush?64:16,l[20],D,c,R,g||null,null);return v.firstCreatePass&&($r(Xo(D,l),v,o.type),ci(v,D),Xd(D,l.length,1)),Qf(l,F),l[20]=F}(R,this.componentDef,_e,v,D);if(R)if(c)Ki(D,R,["ng-version",_1.full]);else{const{attrs:De,classes:vt}=function Dw(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&l.push(g);else{if(!ro(h))break;h=g}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);De&&Ki(D,R,De),vt&&vt.length>0&&Zy(D,R,vt.join(" "))}if(Ge=Ma(K,20),void 0!==l){const De=Ge.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const Yt=l[vt];De.push(null!=Yt?Array.from(Yt):null)}}Ve=function Xw(s,o,l,c,h){const g=l[1],v=function cv(s,o,l){const c=Dn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Lw(s,c,o,Ac(s,o,1,null),l));const h=sn(o,s,c.directiveStart,c);xr(h,o);const g=Ar(c,o);return g&&xr(g,o),h}(g,l,o);if(c.components.push(v),s[8]=v,h&&h.forEach(D=>D(v,o)),o.contentQueries){const D=Dn();o.contentQueries(1,v,D.directiveStart)}const w=Dn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Js(w.index),kw(l[1],w,0,w.directiveStart,w.directiveEnd,o),Fw(o,v)),v}(st,this.componentDef,_e,U,[ah]),qf(K,_e,null)}finally{wo()}return new w1(this.componentType,Ve,Wc(Ge,_e),_e,Ge)}}class w1 extends class kh{}{constructor(o,l,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new HT(h),this.componentType=o}get injector(){return new Li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Zc{}class C0{}const ce=new Map;class ou extends Zc{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new y1(this);const c=mn(o);this._bootstrapComponents=m(c.bootstrap),this._r3Injector=sp(o,l,[{provide:Zc,useValue:this},{provide:pr,useValue:this.componentFactoryResolver}],fe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ns.THROW_IF_NOT_FOUND,c=pt.Default){return o===ns||o===Zc||o===np?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class p_ extends C0{constructor(o){super(),this.moduleType=o,null!==mn(o)&&function WT(s){const o=new Set;!function l(c){const h=mn(c,!0),g=h.id;null!==g&&(function ao(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${fe(o)} vs ${fe(o.name)}`)}(g,ce.get(g),c),ce.set(g,c));const v=m(h.imports);for(const w of v)o.has(w)||(o.add(w),l(w))}(s)}(o)}create(o){return new ou(this.moduleType,o)}}function g_(s,o,l){const c=wr()+s,h=Ce();return h[c]===Nt?ga(h,c,l?o.call(l):o()):function lp(s,o){return s[o]}(h,c)}function S0(s,o,l,c){return uu(Ce(),wr(),s,o,l,c)}function Br(s,o,l,c,h){return function cu(s,o,l,c,h,g,v){const w=o+l;return Mc(s,w,h,g)?ga(s,w+2,v?c.call(v,h,g):c(h,g)):lu(s,w+2)}(Ce(),wr(),s,o,l,c,h)}function m_(s,o,l,c,h,g){return Kc(Ce(),wr(),s,o,l,c,h,g)}function lu(s,o){const l=s[o];return l===Nt?void 0:l}function uu(s,o,l,c,h,g){const v=o+l;return Si(s,v,h)?ga(s,v+1,g?c.call(g,h):c(h)):lu(s,v+1)}function Kc(s,o,l,c,h,g,v,w){const D=o+l;return function zl(s,o,l,c,h){const g=Mc(s,o,l,c);return Si(s,o+2,h)||g}(s,D,h,g,v)?ga(s,D+3,w?c.call(w,h,g,v):c(h,g,v)):lu(s,D+3)}function __(s,o){const l=Vt();let c;const h=s+20;l.firstCreatePass?(c=function R0(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[h]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,c.onDestroy)):c=l.data[h];const g=c.factory||(c.factory=Qr(c.type)),v=Yn(hi);try{const w=at(!1),D=g();return at(w),function Mv(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,Ce(),h,D),D}finally{Yn(v)}}function M0(s,o,l){const c=s+20,h=Ce(),g=Oi(h,c);return Ja(h,c)?uu(h,wr(),o,g.transform,l,g):g.transform(l)}function x0(s,o,l,c,h){const g=s+20,v=Ce(),w=Oi(v,g);return Ja(v,g)?Kc(v,wr(),o,w.transform,l,c,h,w):w.transform(l,c,h)}function Ja(s,o){return s[1].data[o].pure}function k0(s){return o=>{setTimeout(s,void 0,o)}}const jo=class Fh extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,g,v;let w=o,D=l||(()=>null),A=c;if(o&&"object"==typeof o){const F=o;w=null===(h=F.next)||void 0===h?void 0:h.bind(F),D=null===(g=F.error)||void 0===g?void 0:g.bind(F),A=null===(v=F.complete)||void 0===v?void 0:v.bind(F)}this.__isAsync&&(D=k0(D),w&&(w=k0(w)),A&&(A=k0(A)));const R=super.subscribe({next:w,error:D,complete:A});return o instanceof Y.w0&&o.add(R),R}};function YT(){return this._results[lh()]()}class P0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=lh(),c=P0.prototype;c[l]||(c[l]=YT)}get changes(){return this._changes||(this._changes=new jo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=Mr(o);(this._changesDetected=!function Ju(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Lp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Yc,s})();const y_=Lp,du=class extends y_{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=$f(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(l)),qf(l,c,o),new Fp(c)}};function Yc(){return Vp(Dn(),Ce())}function Vp(s,o){return 4&s.type?new du(o,s,Wc(s,o)):null}let v_=(()=>{class s{}return s.__NG_ELEMENT_ID__=JT,s})();function JT(){return Lh(Dn(),Ce())}const F0=v_,Bp=class extends F0{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return Wc(this._hostTNode,this._hostLView)}get injector(){return new Li(this._hostTNode,this._hostLView)}get parentInjector(){const o=ti(this._hostTNode,this._hostLView);if(Pi(o)){const l=nn(o,this._hostLView),c=Qt(o);return new Li(l[1].data[c+8],l)}return new Li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=T1(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,g){const v=o&&!function Ba(s){return"function"==typeof s}(o);let w;if(v)w=l;else{const F=l||{};w=F.index,c=F.injector,h=F.projectableNodes,g=F.ngModuleRef}const D=v?o:new D0(Wt(o)),A=c||this.parentInjector;if(!g&&null==D.ngModule){const U=(v?A:this.parentInjector).get(Zc,null);U&&(g=U)}const R=D.create(A,h,void 0,g);return this.insert(R.hostView,w),R}insert(o,l){const c=o._lView,h=c[1];if(function bl(s){return bi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[3],U=new Bp(F,F[6],F[3]);U.detach(U.indexOf(o))}}const g=this._adjustIndex(l),v=this._lContainer;!function Kg(s,o,l,c){const h=10+c,g=l.length;c>0&&(l[h-1][4]=o),c<g-10?(o[4]=l[h],In(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function SC(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(h,c,v,g);const w=Xg(g,v),D=c[11],A=Yg(D,v[7]);return null!==A&&function Ec(s,o,l,c,h,g){c[0]=h,c[6]=o,Zd(s,c,l,1,h,g)}(h,v[6],D,c,A,w),o.attachToViewContainerRef(),In(b_(v),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=T1(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=zd(this._lContainer,l);c&&(bn(b_(this._lContainer),l),uw(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=zd(this._lContainer,l);return c&&null!=bn(b_(this._lContainer),l)?new Fp(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function T1(s){return s[8]}function b_(s){return s[8]||(s[8]=[])}function Lh(s,o){let l;const c=o[s.index];if(bi(c))l=c;else{let h;if(8&s.type)h=dn(c);else{const g=o[11];h=g.createComment("");const v=Ar(s,o);Cc(g,Yg(g,v),h,function RC(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=l=hm(c,o,h,s),Qf(o,l)}return new Bp(l,s,o)}class Ii{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ii(this.queryList)}setDirty(){this.queryList.setDirty()}}class D_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let g=0;g<c;g++){const v=l.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new D_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==M1(o,l).matches&&this.queries[l].setDirty()}}class Up{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class jp{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new jp(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class C_{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new C_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,l,hu(l,g)),this.matchTNodeWithReadOption(o,l,To(l,o,g,!1,!1))}else c===Lp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,To(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===qi||h===v_||h===Lp&&4&l.type)this.addMatch(l.index,-2);else{const g=To(l,o,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function hu(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function S1(s,o,l,c){return-1===l?function Vh(s,o){return 11&s.type?Wc(s,o):4&s.type?Vp(s,o):null}(o,s):-2===l?function Jc(s,o,l){return l===qi?Wc(o,s):l===Lp?Vp(o,s):l===v_?Lh(o,s):void 0}(s,o,c):sn(s,s[1],l,o)}function I1(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,v=l.matches,w=[];for(let D=0;D<v.length;D+=2){const A=v[D];w.push(A<0?null:S1(o,g[A],v[D+1],l.metadata.read))}h.matches=w}return h.matches}function fu(s,o,l,c){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const v=I1(s,o,h,l);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)c.push(v[w/2]);else{const A=g[w+1],R=o[-D];for(let F=10;F<R.length;F++){const U=R[F];U[17]===U[3]&&fu(U[1],U,A,c)}if(null!==R[9]){const F=R[9];for(let U=0;U<F.length;U++){const K=F[U];fu(K[1],K,A,c)}}}}}return c}function L0(s){const o=Ce(),l=Vt(),c=Vu();Bu(c+1);const h=M1(l,c);if(s.dirty&&qs(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?fu(l,o,c,[]):I1(l,o,h,c);s.reset(g,g1),s.notifyOnChanges()}return!0}return!1}function Qa(s,o,l){const c=Vt();c.firstCreatePass&&(R1(c,new Up(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),N1(c,Ce(),o)}function pu(s,o,l,c){const h=Vt();if(h.firstCreatePass){const g=Dn();R1(h,new Up(o,l,c),g.index),function XT(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}N1(h,Ce(),l)}function T_(){return function A1(s,o){return s[19].queries[o].queryList}(Ce(),Vu())}function N1(s,o,l){const c=new P0(4==(4&l));av(s,o,c,c.destroy),null===o[19]&&(o[19]=new D_),o[19].queries.push(new Ii(c))}function R1(s,o,l){null===s.queries&&(s.queries=new jp),s.queries.track(new C_(o,l))}function M1(s,o){return s.queries.getByIndex(o)}function Gp(s,o){return Vp(s,o)}function Xc(...s){}const O_=new qn("Application Initializer");let zp=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Xc,this.reject=Xc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Pr(g))l.push(g);else if(Wa(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Xe(O_,8))},s.\u0275prov=ln({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Z0=new qn("AppId",{providedIn:"root",factory:function z1(){return`${K0()}${K0()}${K0()}`}});function K0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const W1=new qn("Platform Initializer"),Z1=new qn("Platform ID"),Y0=new qn("appBootstrapListener");let $h=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})();const k_=new qn("LocaleId",{providedIn:"root",factory:()=>$t(k_,pt.Optional|pt.SkipSelf)||function Q0(){return"undefined"!=typeof $localize&&$localize.locale||Th}()}),uS=new qn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class cS{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Wp=(()=>{class s{compileModuleSync(l){return new p_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=m(mn(l).declarations).reduce((v,w)=>{const D=Wt(w);return D&&v.push(new D0(D)),v},[]);return new cS(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=ln({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const eb=(()=>Promise.resolve(0))();function qh(s){"undefined"==typeof Zone?eb.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ts{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jo(!1),this.onMicrotaskEmpty=new jo(!1),this.onStable=new jo(!1),this.onError=new jo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Kp(){let s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function gu(s){const o=()=>{!function tb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,P_(s),s.isCheckStableRunning=!0,Yp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),P_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,g,v,w)=>{try{return Y1(s),l.invokeTask(h,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),F_(s)}},onInvoke:(l,c,h,g,v,w,D)=>{try{return Y1(s),l.invoke(h,g,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),F_(s)}},onHasTask:(l,c,h,g)=>{l.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,P_(s),Yp(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ts.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ts.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,K1,Xc,Xc);try{return g.runTask(v,l,c)}finally{g.cancelTask(v)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const K1={};function Yp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function P_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Y1(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function F_(s){s._nesting--,Yp(s)}class dS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jo,this.onMicrotaskEmpty=new jo,this.onStable=new jo,this.onError=new jo}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let L_=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ts.assertNotInAngularZone(),qh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qh(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Xe(Ts))},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})(),J1=(()=>{class s{constructor(){this._applications=new Map,Jp.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Jp.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})();class nb{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function V_(s){Jp=s}let lo,Jp=new nb;const X1=new qn("AllowMultipleToken");class eD{constructor(o,l){this.name=o,this.token=l}}function nD(s,o,l=[]){const c=`Platform: ${o}`,h=new qn(c);return(g=[])=>{let v=B_();if(!v||v.injector.get(X1,!1))if(s)s(l.concat(g).concat({provide:h,useValue:!0}));else{const w=l.concat(g).concat({provide:h,useValue:!0},{provide:ym,useValue:"platform"});!function tD(s){if(lo&&!lo.destroyed&&!lo.injector.get(X1,!1))throw new ke(400,"");lo=s.get(rD);const o=s.get(W1,null);o&&o.forEach(l=>l())}(ns.create({providers:w,name:c}))}return function rb(s){const o=B_();if(!o)throw new ke(401,"");return o}()}}function B_(){return lo&&!lo.destroyed?lo:null}let rD=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const w=function ib(s,o){let l;return l="noop"===s?new dS:("zone.js"===s?void 0:s)||new Ts({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),D=[{provide:Ts,useValue:w}];return w.run(()=>{const A=ns.create({providers:D,parent:this.injector,name:l.moduleType.name}),R=l.create(A),F=R.injector.get(An,null);if(!F)throw new ke(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:K=>{F.handleError(K)}});R.onDestroy(()=>{Qp(this._modules,R),U.unsubscribe()})}),function fS(s,o,l){try{const c=l();return Pr(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(F,w,()=>{const U=R.injector.get(zp);return U.runInitializers(),U.donePromise.then(()=>(function HE(s){(function dt(s,o){null==s&&bt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(s0=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(k_,Th)||Th),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,c=[]){const h=U_({},c);return function zh(s,o,l){const c=new p_(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const c=l.injector.get(j_);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new ke(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Xe(ns))},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})();function U_(s,o){return Array.isArray(o)?o.reduce(U_,s):Object.assign(Object.assign({},s),o)}let j_=(()=>{class s{constructor(l,c,h,g,v){this._zone=l,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),D=new P.y(A=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Ts.assertNotInAngularZone(),qh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{R.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ae.T)(w,D.pipe((0,X.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new ke(405,"");let h;h=l instanceof zc?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const g=function hS(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Zc),w=h.create(ns.NULL,[],c||h.selector,g),D=w.location.nativeElement,A=w.injector.get(L_,null),R=A&&w.injector.get(J1);return A&&R&&R.registerApplication(D,A),w.onDestroy(()=>{this.detachView(w.hostView),Qp(this.components,w),R&&R.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Qp(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Y0,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Xe(Ts),Xe(ns),Xe(An),Xe(pr),Xe(zp))},s.\u0275prov=ln({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Qp(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let ed=!0,el=!1;function ob(){return el=!0,ed}function Wh(){if(el)throw new Error("Cannot enable prod mode after platform setup.");ed=!1}let gS=(()=>{class s{}return s.__NG_ELEMENT_ID__=mS,s})();function mS(s){return function ab(s,o,l){if(Us(s)&&!l){const c=Nr(s.index,o);return new Fp(c,c)}return 47&s.type?new Fp(o[16],o):null}(Dn(),Ce(),16==(16&s))}class z_{constructor(){}supports(o){return za(o)}create(o){return new hb(o)}}const vS=(s,o)=>o;class hb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||vS}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,g=null;for(;l||c;){const v=!c||l&&l.currentIndex<fD(c,h,g)?l:c,w=fD(v,h,g),D=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{g||(g=[]);const A=w-h,R=D-h;if(A!=R){for(let U=0;U<A;U++){const K=U<g.length?g[U]:g[U]=0,_e=K+U;R<=_e&&_e<A&&(g[U]=K+1)}g[v.previousIndex]=R-A}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!za(o))throw new ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),c=!0),l=l._next}else h=0,function dT(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[lh()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,w=>{v=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,w,v,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,h)):o=this._addAfter(new hD(l,c),g,h),o}_verifyReinsertion(o,l,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new pb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class hD{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class pb{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new fb,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fD(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class W_{constructor(){}supports(o){return o instanceof Map||Om(o)}create(){return new bS}}class bS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Om(o)))throw new ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const c=new gb(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class gb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pD(){return new eg([new z_])}let eg=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||pD()),deps:[[s,new ji,new Wn]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new ke(901,"")}}return s.\u0275prov=ln({token:s,providedIn:"root",factory:pD}),s})();function Z_(){return new tg([new W_])}let tg=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Z_()),deps:[[s,new ji,new Wn]]}}find(l){const c=this.factories.find(g=>g.supports(l));if(c)return c;throw new ke(901,"")}}return s.\u0275prov=ln({token:s,providedIn:"root",factory:Z_}),s})();const _b=nD(null,"core",[{provide:Z1,useValue:"unknown"},{provide:rD,deps:[ns]},{provide:J1,deps:[]},{provide:$h,deps:[]}]);let tl=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Xe(j_))},s.\u0275mod=J({type:s}),s.\u0275inj=tn({}),s})()},3942:(ct,Te,k)=>{k.d(Te,{Z:()=>ke});var u=k(2090),Y=k(4859),P=k(9681),ae=k(1877);class X{constructor(pe,Ee){this._delegate=pe,this.firebase=Ee,(0,P._addComponent)(pe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(pe,Ee=P._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(pe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(rt=Qe.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:Ee})}_removeServiceInstance(pe,Ee=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ee)}_addComponent(pe){(0,P._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,P._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function de(){const Be=function fe(Be){const pe={},Ee={__esModule:!0,initializeApp:function Se($e,ne={}){const Z=P.initializeApp($e,ne);if((0,u.r3)(pe,Z.name))return pe[Z.name];const se=new Be(Z,Ee);return pe[Z.name]=se,se},app:Qe,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function we($e){const ne=$e.name,Z=ne.replace("-compat","");if(P._registerComponent($e)&&"PUBLIC"===$e.type){const se=(me=Qe())=>{if("function"!=typeof me[Z])throw ie.create("invalid-app-argument",{appName:ne});return me[Z]()};void 0!==$e.serviceProps&&(0,u.ZB)(se,$e.serviceProps),Ee[Z]=se,Be.prototype[Z]=function(...me){return this._getService.bind(this,ne).apply(this,$e.multipleInstances?me:[])}}return"PUBLIC"===$e.type?Ee[Z]:null},removeApp:function rt($e){delete pe[$e]},useAsService:function qe($e,ne){return"serverAuth"===ne?null:ne},modularAPIs:P}};function Qe($e){if(!(0,u.r3)(pe,$e=$e||P._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:$e});return pe[$e]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function be(){return Object.keys(pe).map($e=>pe[$e])}}),Qe.App=Be,Ee}(X);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function pe(Ee){(0,u.ZB)(Be,Ee)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Be}(),H=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=G;!function Ne(Be){(0,P.registerVersion)("@firebase/app-compat","0.1.21",Be)}()},9681:(ct,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>jr,_DEFAULT_ENTRY_NAME:()=>Fn,_addComponent:()=>fn,_addOrOverwriteComponent:()=>Mi,_apps:()=>bt,_clearComponents:()=>qt,_components:()=>hn,_getProvider:()=>as,_registerComponent:()=>ln,_removeServiceInstance:()=>tn,deleteApp:()=>us,getApp:()=>Gr,getApps:()=>ls,initializeApp:()=>zi,onLog:()=>rr,registerVersion:()=>Yr,setLogLevel:()=>Yn});var u=k(5861),Y=k(4859),P=k(1877),ae=k(2090);class X{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ge(et){const Ie=et.getComponent();return"VERSION"===(null==Ie?void 0:Ie.type)}(tt)){const mt=tt.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(tt=>tt).join(" ")}}const ie="@firebase/app",de=new P.Yd("@firebase/app"),Fn="[DEFAULT]",dt={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,hn=new Map;function fn(et,Ie){try{et.container.addComponent(Ie)}catch(tt){de.debug(`Component ${Ie.name} failed to register with FirebaseApp ${et.name}`,tt)}}function Mi(et,Ie){et.container.addOrOverwriteComponent(Ie)}function ln(et){const Ie=et.name;if(hn.has(Ie))return de.debug(`There were multiple attempts to register component ${Ie}.`),!1;hn.set(Ie,et);for(const tt of bt.values())fn(tt,et);return!0}function as(et,Ie){const tt=et.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),et.container.getProvider(Ie)}function tn(et,Ie,tt=Fn){as(et,Ie).clearInstance(tt)}function qt(){hn.clear()}const _i=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ps{constructor(Ie,tt,mt){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}const jr="9.6.10";function zi(et,Ie={}){"object"!=typeof Ie&&(Ie={name:Ie});const tt=Object.assign({name:Fn,automaticDataCollectionEnabled:!1},Ie),mt=tt.name;if("string"!=typeof mt||!mt)throw _i.create("bad-app-name",{appName:String(mt)});const jt=bt.get(mt);if(jt){if((0,ae.vZ)(et,jt.options)&&(0,ae.vZ)(tt,jt.config))return jt;throw _i.create("duplicate-app",{appName:mt})}const Lt=new Y.H0(mt);for(const B of hn.values())Lt.addComponent(B);const j=new Ps(et,tt,Lt);return bt.set(mt,j),j}function Gr(et=Fn){const Ie=bt.get(et);if(!Ie)throw _i.create("no-app",{appName:et});return Ie}function ls(){return Array.from(bt.values())}function us(et){return pt.apply(this,arguments)}function pt(){return(pt=(0,u.Z)(function*(et){const Ie=et.name;bt.has(Ie)&&(bt.delete(Ie),yield Promise.all(et.container.getProviders().map(tt=>tt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function Yr(et,Ie,tt){var mt;let jt=null!==(mt=dt[et])&&void 0!==mt?mt:et;tt&&(jt+=`-${tt}`);const Lt=jt.match(/\s|\//),j=Ie.match(/\s|\//);if(Lt||j){const B=[`Unable to register library "${jt}" with version "${Ie}":`];return Lt&&B.push(`library name "${jt}" contains illegal characters (whitespace or "/")`),Lt&&j&&B.push("and"),j&&B.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void de.warn(B.join(" "))}ln(new Y.wA(`${jt}-version`,()=>({library:jt,version:Ie}),"VERSION"))}function rr(et,Ie){if(null!==et&&"function"!=typeof et)throw _i.create("invalid-log-argument");(0,P.Am)(et,Ie)}function Yn(et){(0,P.Ub)(et)}const En="firebase-heartbeat-store";let ir=null;function Fs(){return ir||(ir=(0,ae.X3)("firebase-heartbeat-database",1,(et,Ie)=>{0===Ie&&et.createObjectStore(En)}).catch(et=>{throw _i.create("storage-open",{originalErrorMessage:et.message})})),ir}function zt(){return(zt=(0,u.Z)(function*(et){try{return(yield Fs()).transaction(En).objectStore(En).get(mr(et))}catch(Ie){throw _i.create("storage-get",{originalErrorMessage:Ie.message})}})).apply(this,arguments)}function ut(et,Ie){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,u.Z)(function*(et,Ie){try{const mt=(yield Fs()).transaction(En,"readwrite");return yield mt.objectStore(En).put(Ie,mr(et)),mt.complete}catch(tt){throw _i.create("storage-set",{originalErrorMessage:tt.message})}})).apply(this,arguments)}function mr(et){return`${et.name}!${et.options.appId}`}class co{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new gt(tt),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var Ie=this;return(0,u.Z)(function*(){const mt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=Tr();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==jt&&!Ie._heartbeatsCache.heartbeats.some(Lt=>Lt.date===jt))return Ie._heartbeatsCache.heartbeats.push({date:jt,agent:mt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Lt=>{const j=new Date(Lt.date).valueOf();return Date.now()-j<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,u.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const tt=Tr(),{heartbeatsToSend:mt,unsentEntries:jt}=function _r(et,Ie=1024){const tt=[];let mt=et.slice();for(const jt of et){const Lt=tt.find(j=>j.agent===jt.agent);if(Lt){if(Lt.dates.push(jt.date),Sr(tt)>Ie){Lt.dates.pop();break}}else if(tt.push({agent:jt.agent,dates:[jt.date]}),Sr(tt)>Ie){tt.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:mt}}(Ie._heartbeatsCache.heartbeats),Lt=(0,ae.L)(JSON.stringify({version:2,heartbeats:mt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=tt,jt.length>0?(Ie._heartbeatsCache.heartbeats=jt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Lt})()}}function Tr(){return(new Date).toISOString().substring(0,10)}class gt{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,u.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function Ta(et){return zt.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var tt=this;return(0,u.Z)(function*(){var mt;if(yield tt._canUseIndexedDBPromise){const Lt=yield tt.read();return ut(tt.app,{lastSentHeartbeatDate:null!==(mt=Ie.lastSentHeartbeatDate)&&void 0!==mt?mt:Lt.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var tt=this;return(0,u.Z)(function*(){var mt;if(yield tt._canUseIndexedDBPromise){const Lt=yield tt.read();return ut(tt.app,{lastSentHeartbeatDate:null!==(mt=Ie.lastSentHeartbeatDate)&&void 0!==mt?mt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Ie.heartbeats]})}})()}}function Sr(et){return(0,ae.L)(JSON.stringify({version:2,heartbeats:et})).length}!function Ut(et){ln(new Y.wA("platform-logger",Ie=>new X(Ie),"PRIVATE")),ln(new Y.wA("heartbeat",Ie=>new co(Ie),"PRIVATE")),Yr(ie,"0.7.20",et),Yr(ie,"0.7.20","esm2017"),Yr("fire-js","")}("")},4859:(ct,Te,k)=>{k.d(Te,{wA:()=>P,H0:()=>fe});var u=k(5861),Y=k(2090);class P{constructor(G,H,Q){this.name=G,this.instanceFactory=H,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class X{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const Q=new Y.BH;if(this.instancesDeferred.set(H,Q),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:H});Ke&&Q.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const Q=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),Ke=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ne){if(Ke)return null;throw Ne}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ie(de){return"EAGER"===de.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,Q]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(H);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ke});Q.resolve(Ne)}catch(Ne){}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,u.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...H.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,Q=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:Q,options:H});for(const[Ne,ke]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ne)&&ke.resolve(Ke);return Ke}onInit(G,H){var Q;const Ke=this.normalizeInstanceIdentifier(H),Ne=null!==(Q=this.onInitCallbacks.get(Ke))&&void 0!==Q?Q:new Set;Ne.add(G),this.onInitCallbacks.set(Ke,Ne);const ke=this.instances.get(Ke);return ke&&G(ke,Ke),()=>{Ne.delete(G)}}invokeOnInitCallbacks(G,H){const Q=this.onInitCallbacks.get(H);if(Q)for(const Ke of Q)try{Ke(G,H)}catch(Ne){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let Q=this.instances.get(G);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(de=G,de===ae?void 0:de),options:H}),this.instances.set(G,Q),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(Q,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Q)}catch(Ke){}var de;return Q||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new X(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,Te,k)=>{k.d(Te,{in:()=>Y,Yd:()=>ie,Ub:()=>fe,Am:()=>de});const u=[];var Y=(()=>{return(G=Y||(Y={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",Y;var G})();const P={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ae=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ge=(G,H,...Q)=>{if(H<G.logLevel)return;const Ke=(new Date).toISOString(),Ne=X[H];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ne](`[${Ke}]  ${G.name}:`,...Q)};class ie{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=ge,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Y))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?P[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...H),this._logHandler(this,Y.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...H),this._logHandler(this,Y.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...H),this._logHandler(this,Y.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...H),this._logHandler(this,Y.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...H),this._logHandler(this,Y.ERROR,...H)}}function fe(G){u.forEach(H=>{H.setLogLevel(G)})}function de(G,H){for(const Q of u){let Ke=null;H&&H.level&&(Ke=P[H.level]),Q.userLogHandler=null===G?null:(Ne,ke,...Be)=>{const pe=Be.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(rt){return null}}).filter(Ee=>Ee).join(" ");ke>=(null!=Ke?Ke:Ne.logLevel)&&G({level:Y[ke].toLowerCase(),message:pe,args:Be,type:Ne.name})}}}},5861:(ct,Te,k)=>{function u(P,ae,X,ge,ie,fe,de){try{var G=P[fe](de),H=G.value}catch(Q){return void X(Q)}G.done?ae(H):Promise.resolve(H).then(ge,ie)}function Y(P){return function(){var ae=this,X=arguments;return new Promise(function(ge,ie){var fe=P.apply(ae,X);function de(H){u(fe,ge,ie,de,G,"next",H)}function G(H){u(fe,ge,ie,de,G,"throw",H)}de(void 0)})}}k.d(Te,{Z:()=>Y})}},ct=>{ct(ct.s=3918)}]);